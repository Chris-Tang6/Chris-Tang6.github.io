

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#333333">
  <meta name="description" content="">
  <meta name="author" content="Wuguo">
  <meta name="keywords" content="">
  
  <title>Mybatis - å°æ­¦çš„Blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.11","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#E63D43","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>å°æ­¦çš„Blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Mybatis">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-08-08 10:00" pubdate>
        2021å¹´8æœˆ8æ—¥ ä¸Šåˆ
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4.3k å­—
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      62
       åˆ†é’Ÿ
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Mybatis</h1>
            
            <div class="markdown-body">
              <h1 id="Javaç¬”è®°â€”â€”Mybatis"><a href="#Javaç¬”è®°â€”â€”Mybatis" class="headerlink" title="Javaç¬”è®°â€”â€”Mybatis"></a>Javaç¬”è®°â€”â€”Mybatis</h1><h2 id="ğŸ›´æˆ‘çš„ç¬¬ä¸€ä¸ªMybatisç¨‹åº"><a href="#ğŸ›´æˆ‘çš„ç¬¬ä¸€ä¸ªMybatisç¨‹åº" class="headerlink" title="ğŸ›´æˆ‘çš„ç¬¬ä¸€ä¸ªMybatisç¨‹åº"></a>ğŸ›´æˆ‘çš„ç¬¬ä¸€ä¸ªMybatisç¨‹åº</h2><h3 id="1ã€åˆ›å»ºæ•°æ®åº“"><a href="#1ã€åˆ›å»ºæ•°æ®åº“" class="headerlink" title="1ã€åˆ›å»ºæ•°æ®åº“"></a>1ã€åˆ›å»ºæ•°æ®åº“</h3><img src="https://i.loli.net/2021/08/09/cUCrMwlSdqOtAGf.png" srcset="/img/loading.gif" lazyload alt="image-20210720211142864" style="zoom:67%;" />

<p>è¿™æ˜¯ä¹‹å‰æˆ‘åšè®¾è®¡æ¨¡å¼è¯¾è®¾ä¸­å»ºçš„ä¸€å¼ è¡¨ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥æŸ¥è¯¢è¿™è¿™å¼ è¡¨ä¸­æ‰€æœ‰çš„è®°å½•ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œå°±åªæŸ¥ä¸‹å‰3ä¸ªå±æ€§å§ã€‚</p>
<h3 id="2ã€åˆ›å»ºmavené¡¹ç›®"><a href="#2ã€åˆ›å»ºmavené¡¹ç›®" class="headerlink" title="2ã€åˆ›å»ºmavené¡¹ç›®"></a>2ã€åˆ›å»ºmavené¡¹ç›®</h3><p>â€‹    åˆ é™¤srcç›®å½•ï¼›</p>
<p>â€‹    å¯¼å…¥ä¾èµ–ï¼šmysqlã€mybatisã€junit</p>
<h3 id="3ã€åˆ›å»ºå­æ¨¡å—module"><a href="#3ã€åˆ›å»ºå­æ¨¡å—module" class="headerlink" title="3ã€åˆ›å»ºå­æ¨¡å—module"></a>3ã€åˆ›å»ºå­æ¨¡å—module</h3><p>åŒæ ·é€‰æ‹©mavené¡¹ç›®ï¼Œè¿™æ ·åé¢çš„å†æ¬¡åˆ›å»ºmavené¡¹ç›®æ—¶å¯ä»¥ç›´æ¥ä»çˆ¶é¡¹ç›®ç»§æ‰¿é…ç½®é¡¹ã€‚</p>
<h3 id="4ã€ç¼–å†™mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#4ã€ç¼–å†™mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="4ã€ç¼–å†™mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>4ã€ç¼–å†™mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</h3><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?useSSL=true<span class="hljs-symbol">&amp;amp;</span>useUnicode=true<span class="hljs-symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="hljs-symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/twg/dao/UserDao.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h3 id="5ã€ç¼–å†™mybatiså·¥å…·ç±»"><a href="#5ã€ç¼–å†™mybatiså·¥å…·ç±»" class="headerlink" title="5ã€ç¼–å†™mybatiså·¥å…·ç±»"></a>5ã€ç¼–å†™mybatiså·¥å…·ç±»</h3><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MybatisUtils</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqlSessionFactory sqlSessionFactory;<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            String resource = <span class="hljs-string">&quot;org/mybatis/example/mybatis-config.xml&quot;</span>;<br>            InputStream inputStream = Resources.getResourceAsStream(resource);<br>            SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title">getSqlSession</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> sqlSessionFactory.openSession();<br>    &#125;<br>    <br>&#125;<br></code></pre></div></td></tr></table></figure>



<h3 id="6ã€ç¼–å†™ä»£ç "><a href="#6ã€ç¼–å†™ä»£ç " class="headerlink" title="6ã€ç¼–å†™ä»£ç "></a>6ã€ç¼–å†™ä»£ç </h3><ul>
<li><p>å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id, String username, String password)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.id = id;<br>        <span class="hljs-keyword">this</span>.username = username;<br>        <span class="hljs-keyword">this</span>.password = password;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure></li>
<li><p>DAO</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.twg.dao;<br><br><span class="hljs-keyword">import</span> com.twg.entity.User;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDao</span> </span>&#123;<br>    <span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getUserList</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></div></td></tr></table></figure></li>
<li><p>DAOæŒä¹…å±‚æ˜ å°„æ–‡ä»¶ï¼Œç”±åŸæ¥çš„UserDaoImplç±»è½¬å˜æˆä¸€ä¸ªMapperé…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.twg.dao.UserDao&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.twg.entity.User&quot;</span>&gt;</span><br>        select * from test.t_user<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>ç‰¹åˆ«æ³¨æ„ï¼š</p>
<p>namespaceï¼šæŒ‡å®šï¼ˆç»‘å®šï¼‰äº†DAOæ¥å£çš„ä½ç½®ï¼›</p>
<p>idï¼šä¸ºnamespaceæ‰€ç»‘å®šçš„æ¥å£ä¸­çš„æ–¹æ³•åï¼›</p>
<p>resultTypeï¼šæŒ‡å®šäº†idæ‰€ç»‘å®šçš„æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œå¦‚æœæ˜¯è¿”å›ä¸€ä¸ªé›†åˆï¼Œåˆ™è¿™é‡Œå†™é›†åˆä¸­å…ƒç´ çš„ç±»å‹ï¼›</p>
</li>
</ul>
<h3 id="7ã€æµ‹è¯•"><a href="#7ã€æµ‹è¯•" class="headerlink" title="7ã€æµ‹è¯•"></a>7ã€æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.twg.dao;<br><br><span class="hljs-keyword">import</span> com.twg.entity.User;<br><span class="hljs-keyword">import</span> com.twg.utils.MybatisUtils;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoTest</span> </span>&#123;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br>        SqlSession sqlSession = MybatisUtils.getSqlSession();<br><br>        <span class="hljs-comment">// æ–¹æ³•1ï¼šgetMapper</span><br>        UserDao userDao = sqlSession.getMapper(UserDao.class);<br>        List&lt;User&gt; userList = userDao.getUserList();<br>        <span class="hljs-comment">// æ–¹æ³•2ï¼š</span><br>        <span class="hljs-comment">//List&lt;User&gt; userList = sqlSession.selectList(&quot;com.twg.dao.UserDao.getUserList&quot;);</span><br><br>        <span class="hljs-keyword">for</span> (User user : userList) &#123;<br>            System.out.println(user);<br>        &#125;<br><br>        sqlSession.close();<br><br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>



<h3 id="8ã€å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜"><a href="#8ã€å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜" class="headerlink" title="8ã€å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜"></a>8ã€å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜</h3><ul>
<li><p>æ˜ å°„æ–‡ä»¶æ²¡æœ‰åœ¨mybatisä¸»é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ</p>
<p><img src="https://i.loli.net/2021/08/09/gu9qBPfUDECvYhi.png" srcset="/img/loading.gif" lazyload alt="image-20210720205949405"></p>
</li>
<li><p>æ„å»ºé¡¹ç›®åï¼Œæ‰¾ä¸åˆ°æ˜ å°„æ–‡ä»¶</p>
<ul>
<li>åœ¨porn.xmlä¸­é…ç½®resourcesï¼Œæ¥é˜²æ­¢èµ„æºå¯¼å‡ºå¼‚å¸¸ï¼›</li>
<li>ä¹Ÿå¯ä»¥ç›´æ¥å°†æ˜ å°„æ–‡ä»¶æ”¾åˆ°resourcesç›®å½•ä¸‹ï¼›</li>
</ul>
</li>
<li><p>æ˜ å°„æ–‡ä»¶ä¸­çš„å‚æ•°ä¸€å®šè¦å†™å¯¹</p>
<ul>
<li>namespaceï¼šè¡¨æ˜è¿™ä¸ªæ˜ å°„æ–‡ä»¶æ‰€ç»‘å®šçš„æ¥å£ç±»æ˜¯å“ªä¸ª</li>
<li>idï¼šç»‘å®šæ¥å£ä¸­çš„å“ªä¸ªæ–¹æ³•ï¼Œæ–¹æ³•åä¸€å®šè¦å’Œæ¥å£ä¸­å®šä¹‰çš„åå­—ä¸€æ ·</li>
<li>resultTypeï¼šè¡¨æ˜è¿”å›å€¼ç±»å‹</li>
</ul>
<p><img src="https://i.loli.net/2021/08/09/YOlcNbxG3JDHCgK.png" srcset="/img/loading.gif" lazyload alt="image-20210720210326930"></p>
</li>
</ul>
<h2 id="ğŸ›«è§£é”å…¶å®ƒå§¿åŠ¿â€”â€”CRUD"><a href="#ğŸ›«è§£é”å…¶å®ƒå§¿åŠ¿â€”â€”CRUD" class="headerlink" title="ğŸ›«è§£é”å…¶å®ƒå§¿åŠ¿â€”â€”CRUD"></a>ğŸ›«è§£é”å…¶å®ƒå§¿åŠ¿â€”â€”CRUD</h2><ol>
<li><p>å›é¡¾ä¸‹é€šè¿‡mybatiså†™ä¸€ä¸ªæ¥å£çš„æµç¨‹</p>
<ol>
<li><p>åœ¨Mapperä¸­å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•</p>
</li>
<li><p>åœ¨æ˜ å°„æ–‡ä»¶(XXMapper.xml)ä¸­ç»‘å®šè¿™ä¸ªæ–¹æ³•</p>
</li>
<li><p>è¿›è¡Œæµ‹è¯•/ä½¿ç”¨ï¼Œæ³¨æ„å¦‚æœæ˜¯<strong>å¢åˆ æ”¹</strong>éœ€è¦æäº¤äº‹ç‰©ï¼ˆâ€sqlSession.commit();â€ï¼‰</p>
</li>
</ol>
</li>
<li><p>çœ‹çœ‹åœ¨æ˜ å°„æ–‡ä»¶ä¸­è¿˜å¯ä»¥å†™å“ªäº›æ ‡ç­¾</p>
<p><img src="https://i.loli.net/2021/08/09/9ZwByJvxt6j54KM.png" srcset="/img/loading.gif" lazyload alt="image-20210721221129218"></p>
</li>
<li><p>å¢</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å‘ç”¨æˆ·è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½•</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> user:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> æ–°å¢åŠ çš„è®°å½•çš„id</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">inserUser</span><span class="hljs-params">(User user)</span></span>;<br></code></pre></div></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;inserUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.twg.entity.User&quot;</span>&gt;</span><br>    insert into test.t_user (username, password)<br>    values (#&#123;username&#125;, #&#123;password&#125;)<br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li>
<li><p>åˆ </p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é€šè¿‡æŒ‡å®šidåˆ é™¤ä¸€æ¡ç”¨æˆ·è¡¨è®°å½•</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">delUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br></code></pre></div></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;delUser&quot;</span>&gt;</span><br>    delete<br>    from t_user<br>    where id = #&#123;id&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li>
<li><p>æ”¹</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ›´æ–°ä¸€æ¡ç”¨æˆ·è¡¨ä¿¡æ¯</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> user</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">updateUser</span><span class="hljs-params">(User user)</span></span>;<br></code></pre></div></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.twg.entity.User&quot;</span>&gt;</span><br>    update t_user<br>    set username    = #&#123;username&#125;,<br>        password=#&#123;password&#125;<br>    where id = #&#123;id&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li>
<li><p>æŸ¥</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> id:ç”¨æˆ·çš„id</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> è¿”å›æŒ‡å®šç”¨æˆ·idçš„ä¿¡æ¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function">User <span class="hljs-title">getUserById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br></code></pre></div></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.twg.entity.User&quot;</span>&gt;</span><br>    select *<br>    from test.t_user<br>    where id = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li>
</ol>
<h2 id="ğŸä¸‡èƒ½çš„Map"><a href="#ğŸä¸‡èƒ½çš„Map" class="headerlink" title="ğŸä¸‡èƒ½çš„Map"></a>ğŸä¸‡èƒ½çš„Map</h2><p>å½“å®ä½“ç±»çš„å±æ€§è¿‡å¤šæ—¶ï¼ˆè¡¨çš„å­—æ®µå¤ªå¤šï¼‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨Mapã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é€šè¿‡mapçš„æ–¹å¼æŸ¥æ‰¾æŒ‡ç‚¹ç”¨æˆ·</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> map</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-function">User <span class="hljs-title">getUserById2</span><span class="hljs-params">(Map&lt;String, Object&gt; map)</span></span>;<br></code></pre></div></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById2&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.twg.entity.User&quot;</span>&gt;</span><br>    select *<br>    from test.t_user<br>    where id = #&#123;helloId&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testGetUserById2</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MybatisUtils.getSqlSession();<br><br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>    map.put(<span class="hljs-string">&quot;helloId&quot;</span>,<span class="hljs-number">1</span>);<br>    System.out.println(mapper.getUserById2(map));<br><br>    sqlSession.close();<br>&#125;<br></code></pre></div></td></tr></table></figure>



<h2 id="ğŸ­æ¨¡ç³ŠæŸ¥è¯¢"><a href="#ğŸ­æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="ğŸ­æ¨¡ç³ŠæŸ¥è¯¢"></a>ğŸ­æ¨¡ç³ŠæŸ¥è¯¢</h2><p>ä¸ºäº†é˜²æ­¢SQLæ³¨å…¥ï¼Œæ³¨æ„åœ¨ä¼ å…¥å‚æ•°æ—¶å°†å‚æ•°å†™si.</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">//æ–¹æ³•1</span><br>List&lt;User&gt; userList = mapper.getUserList(<span class="hljs-string">&quot;%æ%&quot;</span>);<br></code></pre></div></td></tr></table></figure>



<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-operator">/</span><span class="hljs-operator">/</span>æ–¹æ³•<span class="hljs-number">2</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">where</span> name <span class="hljs-keyword">like</span> &quot;%&quot;#&#123;<span class="hljs-keyword">value</span>&#125;&quot;%&quot;<br></code></pre></div></td></tr></table></figure>



<h2 id="ğŸ€ç¯å¢ƒé…ç½®"><a href="#ğŸ€ç¯å¢ƒé…ç½®" class="headerlink" title="ğŸ€ç¯å¢ƒé…ç½®"></a>ğŸ€ç¯å¢ƒé…ç½®</h2><h3 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h3><p>Mybatiså¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ˜¯æ¯ä¸ªSqlSessionFactoryåªèƒ½é€‰æ‹©ä¸€ç§ã€‚</p>
<p>é»˜è®¤äº‹ç‰©ç®¡ç†å™¨â€”â€”JDBC</p>
<p>è¿æ¥æ± â€”â€”POOLED</p>
<p><img src="https://i.loli.net/2021/08/09/5SV6hzo7mEcipKv.png" srcset="/img/loading.gif" lazyload alt="image-20210725203805540"></p>
<h3 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><p>å¯ä»¥é€šè¿‡propertieså±æ€§æ¥åº”ç”¨é…ç½®æ–‡ä»¶ã€‚</p>
<p>è¿™äº›å±æ€§éƒ½æ˜¯å¯ä»¥æ›¿æ¢äº†ï¼Œä¾‹å¦‚.propertiesæ–‡ä»¶</p>
<p><img src="https://i.loli.net/2021/08/09/6TaEfCX52LUOMWH.png" srcset="/img/loading.gif" lazyload alt="image-20210725205432826"></p>
<p><img src="https://i.loli.net/2021/08/09/cDNaj4vsQF5RuT6.png" srcset="/img/loading.gif" lazyload alt="image-20210725205256245"></p>
<p>å¯ä»¥é€šè¿‡å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶æ¥ç¡®å®šå‚æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<propertiy>æ ‡ç­¾æ¥æŒ‡å®šã€‚å¤–éƒ¨æ–‡ä»¶çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚</p>
<p><img src="https://i.loli.net/2021/08/09/AEWywKmgINoXUG2.png" srcset="/img/loading.gif" lazyload alt="image-20210725205507441"></p>
<p>é…ç½®å¥½å‚æ•°ï¼Œå°±å¯ä»¥é€šè¿‡ <strong>${ }</strong> çš„æ–¹å¼ä½¿ç”¨äº†ã€‚</p>
<h3 id="ç±»å‹åˆ«å"><a href="#ç±»å‹åˆ«å" class="headerlink" title="ç±»å‹åˆ«å"></a>ç±»å‹åˆ«å</h3><p>ä¸ºä»€ä¹ˆè¦å–åˆ«åï¼Ÿâ€”â€”ä¸ºäº†ç®€æ´</p>
<p>ä¸‹é¢è¿™äº›è¿”å›å€¼ç±»å‹ã€å‚æ•°ç±»å‹å†™çš„å¤ªé•¿äº†ï¼Œä¹Ÿå®¹æ˜“å‡ºé”™ã€‚</p>
<p><img src="https://i.loli.net/2021/08/09/6VAB5ONuskPpY3o.png" srcset="/img/loading.gif" lazyload alt="image-20210725205938230"></p>
<p>2ç§è§£å†³åŠæ³•ï¼š</p>
<ul>
<li>ç»™å®ä½“ç±»å–åˆ«å</li>
<li>ç»™å®ä½“ç±»çš„åŒ…å–åˆ«åï¼Œè¿™é‡Œè‡ªåŠ¨è‡ªåŠ¨å°†åˆ«åå–æˆï¼Œè¿™ä¸ªåŒ…ä¸­ç±»åï¼Œå¹¶å°†é¦–å­—æ¯å°å†™ã€‚å¦‚æœéœ€è¦æ”¹æˆåˆ«çš„åå­—ï¼Œåœ¨å®ä½“ç±»ä¸ŠåŠ ä¸Šæ³¨è§£@Alias(â€œxxxâ€)</li>
</ul>
<p><img src="https://i.loli.net/2021/08/09/IV76yXUGtPdMZzL.png" srcset="/img/loading.gif" lazyload alt="image-20210725210404834"></p>
<h3 id="æ˜ å°„å™¨"><a href="#æ˜ å°„å™¨" class="headerlink" title="æ˜ å°„å™¨"></a>æ˜ å°„å™¨</h3><p>ç»‘å®šæ˜ å°„æ–‡ä»¶ã€‚</p>
<ul>
<li>é€šè¿‡æŒ‡å®šèµ„æºç›®å½•â€”â€”æ¨èâœ¨</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/twg/dao/UserMapper.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<ul>
<li>ä¸‹é¢ä¸¤ç§æœ‰é™åˆ¶ï¼š<ul>
<li>æ¥å£å’Œå…¶é…ç½®æ–‡ä»¶éœ€è¦åœ¨åŒä¸€åŒ…ä¸‹</li>
<li>éœ€è¦åŒå</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.twg.dao.UserMapper&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.dao.UserMapper&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h3 id="ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"><a href="#ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"></a>ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ</h3><p><img src="https://i.loli.net/2021/08/09/DME7TjzcWqO1Xyl.png" srcset="/img/loading.gif" lazyload alt="image-20210725212908950"></p>
<p><img src="https://i.loli.net/2021/08/09/RL5XC12pWmfh4oB.png" srcset="/img/loading.gif" lazyload alt="image-20210725213039250"></p>
<h2 id="ğŸ—è§£å†³å±æ€§åä¸å­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜"><a href="#ğŸ—è§£å†³å±æ€§åä¸å­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜" class="headerlink" title="ğŸ—è§£å†³å±æ€§åä¸å­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜"></a>ğŸ—è§£å†³å±æ€§åä¸å­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜</h2><p>é—®é¢˜ï¼šå½“å±æ€§åä¸å­—æ®µåä¸ä¸€è‡´æ—¶ï¼ŒæŸ¥è¯¢å‡ºæ¥çš„ç»“æœä¼šæ˜¾ç¤ºâ€œnullâ€</p>
<p>ä¾‹å¦‚ï¼Œåœ¨è¡¨ä¸­å¯†ç å­—æ®µæ˜¯pwdï¼Œä½†æ˜¯æˆ‘åœ¨å®ä½“ç±»ä¸­çš„å±æ€§å†™çš„æ˜¯password.</p>
<p>è§£å†³ï¼š</p>
<ul>
<li><p>èµ·åˆ«å</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.twg.entity.User&quot;</span>&gt;</span><br>    select id,name,pwd as password<br>    from test.t_user<br>    where id = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li>
<li><p>resultMap</p>
<p>ç»“æœé›†æ˜ å°„</p>
  <resultMap id="UserMap" type="User">
      <result column="pwd" property="password"/>
  </resultMap>

  <select id="getUserById" resultMap="UserMap">
      select id,name,pwd
      from test.t_user
      where id = #{id}
  </select></li>
</ul>
<h2 id="ğŸ“ƒæ—¥å¿—"><a href="#ğŸ“ƒæ—¥å¿—" class="headerlink" title="ğŸ“ƒæ—¥å¿—"></a>ğŸ“ƒæ—¥å¿—</h2><p>å½“ä»£ç å‡ºç°å¼‚å¸¸ï¼Œéœ€è¦æ’é”™æ—¶ï¼Œæ—¥å¿—å°±æ˜¯æœ€å¥½çš„å·¥å…·ï¼</p>
<p>ä»¥å‰ï¼šæ‰‹åŠ¨è¾“å‡ºï¼Œæ‰“å°</p>
<p>ç°åœ¨ï¼šæ—¥å¿—å·¥å‚</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;logImpl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p><img src="https://i.loli.net/2021/08/09/QUDinhLNYEwbRzH.png" srcset="/img/loading.gif" lazyload alt="image-20210725220515609"></p>
<h3 id="Log4j"><a href="#Log4j" class="headerlink" title="Log4j"></a>Log4j</h3><p>ä¹Ÿæ˜¯ä¸€ç§æ—¥å¿—ï¼Œæ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡ä»–å¯ä»¥æ§åˆ¶æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼Œæ—¥å¿—çš„è¾“é€ç›®çš„åœ°ã€æ—¥å¿—çš„çº§åˆ«ç­‰ã€‚</p>
<p>1ã€å¯¼å…¥log4jä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.17<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<p>2ã€æ·»åŠ log4j.propertiesé…ç½®æ–‡ä»¶</p>
<figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç </span><br><span class="hljs-meta">log4j.rootLogger</span>=<span class="hljs-string">DEBUG,console,file</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span><br><span class="hljs-meta">log4j.appender.console</span> = <span class="hljs-string">org.apache.log4j.ConsoleAppender</span><br><span class="hljs-meta">log4j.appender.console.Target</span> = <span class="hljs-string">System.out</span><br><span class="hljs-meta">log4j.appender.console.Threshold</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.appender.console.layout</span> = <span class="hljs-string">org.apache.log4j.PatternLayout</span><br><span class="hljs-meta">log4j.appender.console.layout.ConversionPattern</span>=<span class="hljs-string">ã€%cã€‘-%m%n</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span><br><span class="hljs-meta">log4j.appender.file</span> = <span class="hljs-string">org.apache.log4j.RollingFileAppender</span><br><span class="hljs-meta">log4j.appender.file.File</span>=<span class="hljs-string">./log/kuang.log</span><br><span class="hljs-meta">log4j.appender.file.MaxFileSize</span>=<span class="hljs-string">10mb</span><br><span class="hljs-meta">log4j.appender.file.Threshold</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.appender.file.layout</span>=<span class="hljs-string">org.apache.log4j.PatternLayout</span><br><span class="hljs-meta">log4j.appender.file.layout.ConversionPattern</span>=<span class="hljs-string">[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">#æ—¥å¿—è¾“å‡ºçº§åˆ«</span><br><span class="hljs-meta">log4j.logger.org.mybatis</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.logger.java.sql</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.logger.java.sql.Statement</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.logger.java.sql.ResultSet</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.logger.java.sql.PreparedStatement</span>=<span class="hljs-string">DEBUG</span><br></code></pre></div></td></tr></table></figure>



<p>3ã€é…ç½®mybatis</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;logImpl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;LOG4J&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p><img src="https://i.loli.net/2021/08/09/Gn8orupZyiDBL1I.png" srcset="/img/loading.gif" lazyload alt="image-20210726202742355"></p>
<h2 id="ğŸ“‘åˆ†é¡µ"><a href="#ğŸ“‘åˆ†é¡µ" class="headerlink" title="ğŸ“‘åˆ†é¡µ"></a>ğŸ“‘åˆ†é¡µ</h2><p>ä¸ºä»€ä¹ˆéœ€è¦åˆ†é¡µâ€”â€”æ•°æ®å¤ªå¤šï¼Œä¸æ–¹ä¾¿å¤„ç†</p>
<p>ä¹‹å‰ï¼šé€šè¿‡SQLä¸­çš„limit</p>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span> limit <span class="hljs-number">3</span><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span> æŸ¥è¯¢[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>)<br></code></pre></div></td></tr></table></figure>

<p>ç°åœ¨ï¼šmybatiså®ç°</p>
<h2 id="âš™ä½¿ç”¨æ³¨è§£"><a href="#âš™ä½¿ç”¨æ³¨è§£" class="headerlink" title="âš™ä½¿ç”¨æ³¨è§£"></a>âš™ä½¿ç”¨æ³¨è§£</h2><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.mybatis.example;<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">BlogMapper</span> </span>&#123;<br>  <span class="hljs-meta">@Select(&quot;SELECT * FROM blog WHERE id = #&#123;id&#125;&quot;)</span><br>  <span class="hljs-function">Blog <span class="hljs-title">selectBlog</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<img src="https://i.loli.net/2021/08/09/oTEWCIpB9b5iAkg.png" srcset="/img/loading.gif" lazyload alt="image-20210726211745259" style="zoom:200%;" />

<p>åŒæ ·ï¼Œä½¿ç”¨æ³¨è§£è¿™ç§æ–¹å¼ï¼Œä¹Ÿéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œmapperã€‚</p>
<p>å½“å­˜åœ¨å¤šä¸ªå‚æ•°æ—¶ï¼Œæ¯ä¸ªå‚æ•°å‰é¢å¿…é¡»åŠ ä¸Š@param()æ³¨è§£</p>
<ul>
<li>åŸºæœ¬æ•°æ®ç±»å‹ã€Stringéœ€è¦åŠ ä¸Š</li>
<li>åº”ç”¨ç±»å‹ä¸éœ€è¦</li>
<li>åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥ä¸ç”¨</li>
<li>åœ¨sqlä¸­å¼•ç”¨çš„å°±æ˜¯@paramä¸­å¡«å†™çš„å‚æ•°</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> </span>&#123;<br>  <span class="hljs-meta">@Select(&quot;SELECT * FROM user where id = #&#123;id&#125; and name = #&#123;name&#125;&quot;)</span><br>  <span class="hljs-function">User <span class="hljs-title">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@param(&quot;id&quot;)</span> <span class="hljs-keyword">int</span> id, <span class="hljs-meta">@param(&quot;name&quot;)</span> String username)</span></span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>



<h2 id="ğŸˆLombok"><a href="#ğŸˆLombok" class="headerlink" title="ğŸˆLombok"></a>ğŸˆLombok</h2><p>ä½¿ç”¨Lombokï¼Œå¯ä»¥ä¸å¿…å†å†™å“ªäº›æ­»æ¿çš„getterã€setteræ–¹æ³•äº†ã€‚</p>
<p>ä½†æ˜¯ï¼šèˆå¼ƒäº†ä¸€å®šè§„èŒƒï¼Œå¾—åˆ°äº†ä¸€äº›ä¾¿åˆ©ã€‚</p>
<ol>
<li><p>ideaå®‰è£…Lombokæ’ä»¶</p>
<p><img src="https://i.loli.net/2021/08/09/SFiTw6y3xvMpbea.png" srcset="/img/loading.gif" lazyload alt="image-20210726214816522"></p>
</li>
<li><p>å¯¼å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li>
<li><p>ä½¿ç”¨æ³¨è§£@Data</p>
<p><img src="https://i.loli.net/2021/08/09/z1iUIylDjENPOcf.png" srcset="/img/loading.gif" lazyload alt="image-20210726215304305"></p>
</li>
</ol>
<h2 id="ğŸåŠ¨æ€SQL"><a href="#ğŸåŠ¨æ€SQL" class="headerlink" title="ğŸåŠ¨æ€SQL"></a>ğŸåŠ¨æ€SQL</h2><p>whatï¼šæ ¹æ®ä¸åŒçš„æ¡ä»¶ç”Ÿæˆä¸åŒçš„SQLè¯­å¥</p>
<p>åœ¨å®é™…çš„åº”ç”¨ä¸­å¸¸å¸¸é€šè¿‡æŒ‡å®šå¤šä¸ªæ¡ä»¶æ¥æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€å¼ è´­ä¹°è®°å½•è¡¨ï¼Œæˆ‘éœ€è¦å¯ä»¥æŒ‡å®šVIPçš„idï¼ˆv_idï¼‰ï¼Œäº§å“çš„id(p_id)ä»¥åŠè´­ä¹°æ—¶é—´æ¥æŸ¥è¯¢ï¼Œå½“ç”¨æˆ·æ²¡æœ‰æŒ‡å®šæŸä¸ªæ¡ä»¶æ—¶ï¼ŒæŸ¥è¯¢æ—¶å°±ä¸å¯¹è¿™ä¸ªå­—æ®µè¿›è¡Œé™åˆ¶ï¼Œè¿™é‡Œå°±å¯ä»¥é€šè¿‡åŠ¨æ€SQLæ¥å®ç°ã€‚</p>
<p><img src="https://i.loli.net/2021/08/09/m5skxG9EKALZNhY.png" srcset="/img/loading.gif" lazyload alt="image-20210727162040219"></p>
<p>å®˜ç½‘ä¸­ç»™äº†è¿™æ ·ä¸€äº›æ ‡ç­¾</p>
<p><img src="https://i.loli.net/2021/08/09/cF914Ok7CAziYBK.png" srcset="/img/loading.gif" lazyload alt="image-20210727163240019"></p>
<h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><ol>
<li><p>ç¼–å†™æ¥å£</p>
<p>æ¥å£ä¸­æœ‰ä¸€ä¸ªMapå‚æ•°ï¼Œæ˜¯ä¸ºäº†æŒ‡å®šæŸ¥è¯¢æ¡ä»¶ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">BuyProductMapper</span> </span>&#123;<br>    <span class="hljs-comment">/**é€šè¿‡å¤šä¸ªæ¡ä»¶ï¼ŒæŸ¥è¯¢BuyProductè¡¨</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> map</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;BuyProduct&gt; <span class="hljs-title">getBuyIf</span><span class="hljs-params">(Map map)</span></span>;<br>&#125;<br><br></code></pre></div></td></tr></table></figure></li>
<li><p>ç¼–å†™mapper</p>
<p>ä¸ºäº†å®ç°åŠ¨æ€çš„SQLï¼Œè¿™é‡Œä¸»è¦æ˜¯ä½¿ç”¨äº†<if>æ ‡ç­¾ï¼Œå½“æˆ‘ä»¬ä¼ çš„mapå‚æ•°ä¸­ï¼Œå­˜åœ¨æŸä¸ªkeyï¼Œå°±åœ¨åŸå…ˆçš„SQLè¯­å¥åé¢æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.twg.dao.BuyProductMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getBuyIf&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;BuyProduct&quot;</span>&gt;</span><br>        select * from test.buyproduct where 1=1<br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;v_id != null&quot;</span>&gt;</span><br>            and v_id = #&#123;v_id&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;p_id != null&quot;</span>&gt;</span><br>            and p_id = #&#123;p_id&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;time != null&quot;</span>&gt;</span><br>            and time &gt; #&#123;time&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BuyProductMapperTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getBuyIf</span><span class="hljs-params">()</span></span>&#123;<br>        SqlSession sqlSession = MybatisUtils.getSqlSession();<br><br>        BuyProductMapper mapper = sqlSession.getMapper(BuyProductMapper.class);<br>        HashMap&lt;String, String&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br><span class="hljs-comment">//        map.put(&quot;v_id&quot;,&quot;1&quot;);</span><br><span class="hljs-comment">//        map.put(&quot;p_id&quot;,&quot;1&quot;);</span><br>        map.put(<span class="hljs-string">&quot;time&quot;</span>,<span class="hljs-string">&quot;2021-7-1&quot;</span>);<br>        List&lt;BuyProduct&gt; buys = mapper.getBuyIf(map);<br>        <span class="hljs-keyword">for</span> (BuyProduct buy : buys) &#123;<br>            System.out.println(buy);<br>        &#125;<br><br>        sqlSession.close();<br><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<ul>
<li><p>map:{â€œtimeâ€,â€2021-7-1â€}</p>
<p>å¯ä»¥çœ‹åˆ°æŸ¥è¯¢åˆ°äº†æ‰€æœ‰æ—¶é—´åœ¨2021-7-1ä¹‹åçš„è®°å½•</p>
<p><img src="https://i.loli.net/2021/08/09/2KlBcQfIRU7NTDn.png" srcset="/img/loading.gif" lazyload alt="image-20210727162919531"></p>
</li>
<li><p>map:{(â€œv_idâ€,â€1â€), (â€œp_idâ€,â€1â€)}</p>
<p>é€šè¿‡æŒ‡å®šç”¨æˆ·idå’Œäº§å“idï¼Œæˆ‘ä»¬æŸ¥è¯¢åˆ°äº†ä¸€æ¡æ•°æ®</p>
<p><img src="https://i.loli.net/2021/08/09/2DU7Jc9lQd3h1Rq.png" srcset="/img/loading.gif" lazyload alt="image-20210727163057263"></p>
</li>
</ul>
<h3 id="chooseã€whenã€otherwise"><a href="#chooseã€whenã€otherwise" class="headerlink" title="chooseã€whenã€otherwise"></a>chooseã€whenã€otherwise</h3><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨æ‰€æœ‰çš„æ¡ä»¶ï¼Œè€Œåªæ˜¯æƒ³ä»å¤šä¸ªæ¡ä»¶ä¸­é€‰æ‹©ä¸€ä¸ªä½¿ç”¨ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒMyBatis æä¾›äº† choose å…ƒç´ ï¼Œå®ƒæœ‰ç‚¹åƒ Java ä¸­çš„ switch è¯­å¥ã€‚</p>
<ol>
<li><p>æ¥å£</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»å¤šä¸ªæ¡ä»¶ä¸­é€‰å–ä¸€ä¸ªæ¥æŸ¥è¯¢è´­ç‰©è®°å½•</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> map</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;BuyProduct&gt; <span class="hljs-title">getBuyChoose</span><span class="hljs-params">(Map map)</span></span>;<br></code></pre></div></td></tr></table></figure></li>
<li><p>mapper</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getBuyChoose&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;BuyProduct&quot;</span>&gt;</span><br>    select * from test.buyproduct<br>    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">choose</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;v_id&quot;</span>&gt;</span><br>                and v_id like #&#123;v_id&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;p_id&quot;</span>&gt;</span><br>                and p_id like #&#123;p_id&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">otherwise</span>&gt;</span><br>                and time &gt;= CURDATE()<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">otherwise</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">choose</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>è¿™é‡Œæˆ‘ä½¿ç”¨äº†<select>æ ‡ç­¾ï¼Œ<em>where</em> å…ƒç´ åªä¼šåœ¨å­å…ƒç´ è¿”å›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥ â€œWHEREâ€ å­å¥ã€‚è€Œä¸”ï¼Œè‹¥å­å¥çš„å¼€å¤´ä¸º â€œANDâ€ æˆ– â€œORâ€ï¼Œ<em>where</em> å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤ã€‚<select>ç­‰ä»·äºä¸‹é¢çš„<trim>ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">trim</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">&quot;WHERE&quot;</span> <span class="hljs-attr">prefixOverrides</span>=<span class="hljs-string">&quot;AND |OR &quot;</span>&gt;</span><br>  ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">trim</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getBuyChoose</span><span class="hljs-params">()</span></span>&#123;<br>    SqlSession sqlSession = MybatisUtils.getSqlSession();<br><br>    BuyProductMapper mapper = sqlSession.getMapper(BuyProductMapper.class);<br>    HashMap&lt;String, String&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>    <span class="hljs-comment">//        map.put(&quot;v_id&quot;,&quot;1&quot;);</span><br>    <span class="hljs-comment">//        map.put(&quot;p_id&quot;,&quot;1&quot;);</span><br>    List&lt;BuyProduct&gt; buys = mapper.getBuyChoose(map);<br>    <span class="hljs-keyword">for</span> (BuyProduct buy : buys) &#123;<br>        System.out.println(buy);<br>    &#125;<br>    sqlSession.close();<br>&#125;<br></code></pre></div></td></tr></table></figure>



<ul>
<li>å½“mapä¸ºç©ºæ—¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ä¸­å†™çš„sqlï¼Œä»–ä¼šé»˜è®¤æ·»åŠ <otherwise>ä¸­çš„æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤æŸ¥è¯¢åˆ°ä»Šå¤©çš„è´­ä¹°è®°å½•ã€‚</li>
</ul>
<p><img src="https://i.loli.net/2021/08/09/KcTm2r9naVN6LBG.png" srcset="/img/loading.gif" lazyload alt="image-20210727174434406"></p>
<ul>
<li><p>map:{(â€œv_idâ€,â€1â€), (â€œp_idâ€,â€1â€)}</p>
<p>ç”±äºchooseã€whenã€otherwiseç±»ä¼¼äºJavaä¸­çš„switchè¯­å¥ï¼Œå“ªæ€•æˆ‘è¿™é‡Œç»™å‡ºäº†ä¸¤ä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œå®ƒæ ¹æ®æˆ‘ä»¬å†™çš„mapperï¼Œå®ƒä¼šä¼˜å…ˆå–v_idä½œä¸ºæ¡ä»¶ï¼Œæ‰€ä»¥æŸ¥è¯¢å‡ºäº†ä¸‹é¢è¿™äº›è®°å½•ã€‚</p>
<p><img src="https://i.loli.net/2021/08/09/8ewJXuKjcIygtCr.png" srcset="/img/loading.gif" lazyload alt="image-20210727174807964"></p>
</li>
</ul>
<h3 id="trimã€whereã€set"><a href="#trimã€whereã€set" class="headerlink" title="trimã€whereã€set"></a>trimã€whereã€set</h3><p><em>where</em> å…ƒç´ åªä¼šåœ¨å­å…ƒç´ è¿”å›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥ â€œWHEREâ€ å­å¥ã€‚è€Œä¸”ï¼Œè‹¥å­å¥çš„å¼€å¤´ä¸º â€œANDâ€ æˆ– â€œORâ€ï¼Œ<em>where</em> å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤ã€‚</p>
<p>å¦‚æœ <em>where</em> å…ƒç´ ä¸ä½ æœŸæœ›çš„ä¸å¤ªä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ trim å…ƒç´ æ¥å®šåˆ¶ <em>where</em> å…ƒç´ çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œå’Œ <em>where</em> å…ƒç´ ç­‰ä»·çš„è‡ªå®šä¹‰ trim å…ƒç´ ä¸ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">trim</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">&quot;WHERE&quot;</span> <span class="hljs-attr">prefixOverrides</span>=<span class="hljs-string">&quot;AND |OR &quot;</span>&gt;</span><br>  ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">trim</span>&gt;</span><br></code></pre></div></td></tr></table></figure>

<p><em>set</em> å…ƒç´ ä¼šåŠ¨æ€åœ°åœ¨è¡Œé¦–æ’å…¥ SET å…³é”®å­—ï¼Œå¹¶ä¼šåˆ æ‰é¢å¤–çš„é€—å·ï¼ˆè¿™äº›é€—å·æ˜¯åœ¨ä½¿ç”¨æ¡ä»¶è¯­å¥ç»™åˆ—èµ‹å€¼æ—¶å¼•å…¥çš„ï¼‰ã€‚</p>
<p>æ¥çœ‹çœ‹ä¸ <em>set</em> å…ƒç´ ç­‰ä»·çš„è‡ªå®šä¹‰ <em>trim</em> å…ƒç´ å§ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">trim</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">&quot;SET&quot;</span> <span class="hljs-attr">suffixOverrides</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span><br>  ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">trim</span>&gt;</span><br></code></pre></div></td></tr></table></figure>



<h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h3><figure class="highlight pgsql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs pgsql">&lt;<span class="hljs-keyword">select</span> id=&quot;selectPostIn&quot; resultType=&quot;domain.blog.Post&quot;&gt;<br>  <span class="hljs-keyword">SELECT</span> *<br>  <span class="hljs-keyword">FROM</span> POST P<br>  <span class="hljs-keyword">WHERE</span> ID <span class="hljs-keyword">in</span><br>  &lt;<span class="hljs-keyword">foreach</span> item=&quot;item&quot; <span class="hljs-keyword">index</span>=&quot;index&quot; collection=&quot;list&quot;<br>      <span class="hljs-keyword">open</span>=&quot;(&quot; separator=&quot;,&quot; <span class="hljs-keyword">close</span>=&quot;)&quot;&gt;<br>        #&#123;item&#125;<br>  &lt;/<span class="hljs-keyword">foreach</span>&gt;<br>&lt;/<span class="hljs-keyword">select</span>&gt;<br></code></pre></div></td></tr></table></figure>

<p>foreachå…ƒç´ çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå®ƒå…è®¸ä½ æŒ‡å®šä¸€ä¸ªé›†åˆï¼Œå£°æ˜å¯ä»¥åœ¨å…ƒç´ ä½“å†…ä½¿ç”¨çš„é›†åˆé¡¹ï¼ˆitemï¼‰å’Œç´¢å¼•ï¼ˆindexï¼‰å˜é‡ã€‚å®ƒä¹Ÿå…è®¸ä½ æŒ‡å®šå¼€å¤´ä¸ç»“å°¾çš„å­—ç¬¦ä¸²ä»¥åŠé›†åˆé¡¹è¿­ä»£ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚</p>
<h2 id="ğŸŒŠç¼“å­˜"><a href="#ğŸŒŠç¼“å­˜" class="headerlink" title="ğŸŒŠç¼“å­˜"></a>ğŸŒŠç¼“å­˜</h2><p>å°†æ•°æ®ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚</p>
<ul>
<li>ä¸€çº§ç¼“å­˜ï¼ˆæœ¬åœ°ç¼“å­˜ï¼‰â€”â€”é»˜è®¤ï¼ŒsqlSessionåŸŸ</li>
<li>äºŒçº§ç¼“å­˜â€”â€”namespace</li>
<li>è‡ªå®šä¹‰ç¼“å­˜</li>
</ul>
<h3 id="ä¸€çº§ç¼“å­˜"><a href="#ä¸€çº§ç¼“å­˜" class="headerlink" title="ä¸€çº§ç¼“å­˜"></a>ä¸€çº§ç¼“å­˜</h3><p>ä¸æ•°æ®åº“åŒä¸€æ¬¡ä¼šè¯æœŸé—´æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ï¼›</p>
<p>ä¹‹åå†æ¬¡æŸ¥è¯¢æ—¶ä¼šç›´æ¥ä»ç¼“å­˜ä¸­è·å–ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testGetUserById</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MybatisUtils.getSqlSession();<br><br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    System.out.println(mapper.getUserById(<span class="hljs-number">1</span>));<br>    System.out.println(<span class="hljs-string">&quot;-----------------------&quot;</span>);<br>    System.out.println(mapper.getUserById(<span class="hljs-number">1</span>));<br>    sqlSession.close();<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><img src="https://i.loli.net/2021/08/09/EKrdux9ClIRZbqL.png" srcset="/img/loading.gif" lazyload alt="image-20210728220543416"></p>
<p>ä»æ—¥å¿—ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶æŸ¥è¯¢äº†ä¸¤æ¬¡ï¼Œä½†æ˜¯åªæœ‰ä¸€æ¡selectè¯­å¥ã€‚</p>
<p>å¤±æ•ˆçš„æƒ…å†µï¼š</p>
<ul>
<li>æŸ¥è¯¢ä¸åŒçš„ä¸œè¥¿</li>
<li>å¢åˆ æ”¹æ“ä½œï¼Œå¯èƒ½ä¼šæ”¹å˜æ•°æ®ï¼Œç¼“å­˜ä¹Ÿä¼šå¤±æ•ˆ</li>
<li>æŸ¥è¯¢ä¸åŒçš„mapper</li>
</ul>
<h3 id="äºŒçº§ç¼“å­˜"><a href="#äºŒçº§ç¼“å­˜" class="headerlink" title="äºŒçº§ç¼“å­˜"></a>äºŒçº§ç¼“å­˜</h3><p>å› ä¸ºä¸€çº§ç¼“å­˜çš„ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥å‡ºç°äº†äºŒçº§ç¼“å­˜ã€‚â€”â€”namespaceåŸŸï¼Œå…¨å±€ç¼“å­˜ã€‚</p>
<p>å·¥ä½œæœºåˆ¶</p>
<ul>
<li>ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šæ”¾åˆ°ä¸€çº§ç¼“å­˜</li>
<li>å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›æ­¤æ—¶ä¸€çº§ç¼“å­˜çš„æ•°æ®å°±ä¼šä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­</li>
<li>ï¼ˆåœ¨åŒä¸€ä¸ªmapperï¼‰æ–°çš„ä¼šè¯å†æ¬¡æŸ¥è¯¢ä¿¡æ¯æ—¶ï¼Œå°±ä¼šç›´æ¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–æ•°æ®</li>
<li>ä¸åŒçš„mapperæŸ¥è¯¢å‡ºçš„æ•°æ®ä¼šæ”¾åˆ°è‡ªå·±å¯¹åº”çš„ç¼“å­˜ä¸­</li>
</ul>
<p>æ­¥éª¤ï¼š</p>
<ol>
<li><p>æ˜¾å¼åœ°åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å¯å…¨å±€ç¼“å­˜</p>
<p><img src="https://i.loli.net/2021/08/09/7acVSluyYqpvBdH.png" srcset="/img/loading.gif" lazyload alt="image-20210729092625651"></p>
</li>
<li><p>åœ¨å½“å‰mapperä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªå¯ç”¨äº†æœ¬åœ°çš„ä¼šè¯ç¼“å­˜ï¼Œå®ƒä»…ä»…å¯¹ä¸€ä¸ªä¼šè¯ä¸­çš„æ•°æ®è¿›è¡Œç¼“å­˜ã€‚ è¦å¯ç”¨å…¨å±€çš„äºŒçº§ç¼“å­˜ï¼Œåªéœ€è¦åœ¨ä½ çš„ SQL æ˜ å°„æ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">cache</span>/&gt;</span><br></code></pre></div></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥å®šåˆ¶å…¶ä¸­çš„å‚æ•°ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">cache</span></span><br><span class="hljs-tag">  <span class="hljs-attr">eviction</span>=<span class="hljs-string">&quot;FIFO&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">flushInterval</span>=<span class="hljs-string">&quot;60000&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;512&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">readOnly</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br></code></pre></div></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testGetUserById</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MybatisUtils.getSqlSession();<br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    System.out.println(mapper.getUserById(<span class="hljs-number">1</span>));<br>    sqlSession.close();<br><br>    SqlSession sqlSession2 = MybatisUtils.getSqlSession();<br>    UserMapper mapper2 = sqlSession2.getMapper(UserMapper.class);<br>    System.out.println(<span class="hljs-string">&quot;-----------------------&quot;</span>);<br>    System.out.println(mapper2.getUserById(<span class="hljs-number">1</span>));<br>    sqlSession2.close();<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><img src="https://i.loli.net/2021/08/09/qY3MPfXNelDj27h.png" srcset="/img/loading.gif" lazyload alt="image-20210729093139833"></p>
<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘åˆ›å»ºäº†ä¸¤ä¸ªsqlsessionå¯¹è±¡ï¼Œå¹¶é€šè¿‡è¯¥å¯¹è±¡è·å–ä¸­åŒç±»å‹çš„mapperï¼Œå½“æˆ‘ä½¿ç”¨å®Œç¬¬ä¸€ä¸ªsqlsessionå¹¶å…³é—­åï¼Œå†ä½¿ç”¨ä¸€ä¸ªæ–°çš„sqlsessionæ—¶ï¼Œå¯ä»¥çœ‹åˆ°æ—¥å¿—ä¸­å¹¶æ²¡æœ‰å†æ¬¡æŸ¥è¯¢æ•°æ®åº“ï¼Œè¯´æ˜äºŒçº§ç¼“å­˜èµ·ä½œç”¨äº†ã€‚</p>
<h3 id="è‡ªå®šä¹‰ç¼“å­˜Ehcache"><a href="#è‡ªå®šä¹‰ç¼“å­˜Ehcache" class="headerlink" title="è‡ªå®šä¹‰ç¼“å­˜Ehcache"></a>è‡ªå®šä¹‰ç¼“å­˜Ehcache</h3><p>é™¤äº†ä¸Šè¿°è‡ªå®šä¹‰ç¼“å­˜çš„æ–¹å¼ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å®ç°ä½ è‡ªå·±çš„ç¼“å­˜ï¼Œæˆ–ä¸ºå…¶ä»–ç¬¬ä¸‰æ–¹ç¼“å­˜æ–¹æ¡ˆåˆ›å»ºé€‚é…å™¨ï¼Œæ¥å®Œå…¨è¦†ç›–ç¼“å­˜è¡Œä¸ºã€‚</p>
</li>
<li><p>å¯¼å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.caches/mybatis-ehcache --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.caches<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-ehcache<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></div></td></tr></table></figure></li>
<li><p>å¯ç”¨ç¼“å­˜</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">cache</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>/&gt;</span><br></code></pre></div></td></tr></table></figure></li>
<li><p>æ·»åŠ ehcacheé…ç½®æ–‡ä»¶â€”â€”ehcache.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"> <span class="hljs-meta">&lt;?xml version=1.0 encoding=UTF-8 ?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ehcache</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">http://www.w3.org/2001/XMLSchema-instance</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:noNamespaceSchemaLocation</span>=<span class="hljs-string">http://ehcache.org/ehcache.xsd</span></span><br><span class="hljs-tag">         <span class="hljs-attr">updateCheck</span>=<span class="hljs-string">false</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">diskStore</span> <span class="hljs-attr">path</span>=<span class="hljs-string">./tmpdir/Tmp_EhCache/</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">defaultCache</span></span><br><span class="hljs-tag">            <span class="hljs-attr">eternal</span>=<span class="hljs-string">false</span></span><br><span class="hljs-tag">            <span class="hljs-attr">maxElementsInMemory</span>=<span class="hljs-string">10000</span></span><br><span class="hljs-tag">            <span class="hljs-attr">overflowToDisk</span>=<span class="hljs-string">false</span></span><br><span class="hljs-tag">            <span class="hljs-attr">diskPersistent</span>=<span class="hljs-string">false</span></span><br><span class="hljs-tag">            <span class="hljs-attr">timeToIdleSeconds</span>=<span class="hljs-string">1800</span></span><br><span class="hljs-tag">            <span class="hljs-attr">timeToLiveSeconds</span>=<span class="hljs-string">259200</span></span><br><span class="hljs-tag">            <span class="hljs-attr">memoryStoreEvictionPolicy</span>=<span class="hljs-string">LRU/</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">cache</span></span><br><span class="hljs-tag">            <span class="hljs-attr">name</span>=<span class="hljs-string">cloud_user</span></span><br><span class="hljs-tag">            <span class="hljs-attr">eternal</span>=<span class="hljs-string">false</span></span><br><span class="hljs-tag">            <span class="hljs-attr">maxElementsInMemory</span>=<span class="hljs-string">5000</span></span><br><span class="hljs-tag">            <span class="hljs-attr">overflowToDisk</span>=<span class="hljs-string">false</span></span><br><span class="hljs-tag">            <span class="hljs-attr">diskPersistent</span>=<span class="hljs-string">false</span></span><br><span class="hljs-tag">            <span class="hljs-attr">timeToIdleSeconds</span>=<span class="hljs-string">1800</span></span><br><span class="hljs-tag">            <span class="hljs-attr">timeToLiveSeconds</span>=<span class="hljs-string">1800</span></span><br><span class="hljs-tag">            <span class="hljs-attr">memoryStoreEvictionPolicy</span>=<span class="hljs-string">LRU/</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ehcache</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li>
</ol>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Java/">Java</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/08/08/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92DP/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">åŠ¨æ€è§„åˆ’DP</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/08/08/Java%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Spring/">
                        <span class="hidden-mobile">Spring</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- ä¸è’œå­ç»Ÿè®¡PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="busuanzi_value_site_pv"></span>
             æ¬¡
          </span>
      
      
        <!-- ä¸è’œå­ç»Ÿè®¡UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="busuanzi_value_site_uv"></span>
             äºº
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script  src="/js/local-search.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>















<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>


</body>
</html>
