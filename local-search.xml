<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>æ‰“ä¸ªæ‹›å‘¼å§ï¼</title>
    <link href="/2021/08/08/hello-world/"/>
    <url>/2021/08/08/hello-world/</url>
    
    <content type="html"><![CDATA[<p>å¤§å®¶å¥½ï¼Œæˆ‘å«å°æ­¦ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ã€‚åœ¨è¿™é‡Œæˆ‘ä¼šåˆ†äº«ä¸€äº›å­¦ä¹ ç¬”è®°ä»¥åŠç”Ÿæ´»ä¸Šå»çš„è¶£äº‹ã€‚æ„Ÿè°¢å¤§å®¶çš„å…³æ³¨ğŸ˜‹ğŸ˜‹</p><p><em>æ‰“ä¸ªå¹¿å‘Šå“ˆï¼š</em></p><p>æˆ‘åœ¨Bç«™ä¸Š [<a href="https://space.bilibili.com/54377431">@å°äº”å¾ˆå“‡å¡</a>] ä¹Ÿä¼šä¸Šä¼ ä¸€äº›è§†é¢‘ï¼Œå¦‚æœå–œæ¬¢çœ‹çš„è¯ï¼Œä¸å¦¨ä¸‰è¿ä¸€æ³¢~</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Javaç¬”è®°-åå°„</title>
    <link href="/2021/08/08/Java%E7%AC%94%E8%AE%B0-%E5%8F%8D%E5%B0%84Reflection/"/>
    <url>/2021/08/08/Java%E7%AC%94%E8%AE%B0-%E5%8F%8D%E5%B0%84Reflection/</url>
    
    <content type="html"><![CDATA[<h1 id="Javaç¬”è®°-åå°„Reflection"><a href="#Javaç¬”è®°-åå°„Reflection" class="headerlink" title="Javaç¬”è®°-åå°„Reflection"></a>Javaç¬”è®°-åå°„Reflection</h1><p><a href="https://www.bilibili.com/video/BV1g84y1F7df">ã€éŸ©é¡ºå¹³è®²Javaã€‘Javaåå°„ä¸“é¢˜ -åå°„ åå°„æœºåˆ¶ ç±»åŠ è½½ reflection Class ç±»ç»“æ„ ç­‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibili</a></p><h2 id="ä¸ºä»€ä¹ˆéœ€è¦åå°„ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦åå°„ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦åå°„ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦åå°„ï¼Ÿ</h2><p>å¤§éƒ¨åˆ†çš„æ¡†æ¶éƒ½æ˜¯åŸºäºJavaä¸­çš„åå°„æœºåˆ¶å®ç°çš„ï¼Œå¯ä»¥è¯´æ˜¯åå°„æˆå°±äº†Javaçš„ç¹è£ã€‚</p><p>è®¾æƒ³æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šé€šè¿‡è¯»å–é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºéœ€è¦çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„æ–¹æ³•ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥ä»…ä»…é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶å°±å¯ä»¥æ”¹å˜ä¸šåŠ¡åŠŸèƒ½ï¼Œè€Œä¸ç”¨å»æ”¹å˜ä»£ç ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œå°±æ­£å¥½å¯ä»¥é€šè¿‡åå°„æ¥å®ç°ã€‚è¿™ç§åœºæ™¯å°±ç»å¸¸å‡ºç°åœ¨ä¸€äº›æ¡†æ¶çš„å®ç°ä¸­ï¼ŒåŒæ—¶ä¹Ÿä½“ç°äº†è®¾è®¡æ¨¡å¼ä¸­çš„å¼€é—­åŸåˆ™OCPã€‚</p><h2 id="æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ˜¯ä»€ä¹ˆï¼Ÿ"></a>æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><img src="C:\Users\admin\AppData\Roaming\Typora\typora-user-images\image-20210504211008065.png" alt="image-20210504211008065"></p><h2 id="æ€ä¹ˆä½¿ç”¨ï¼Ÿ"><a href="#æ€ä¹ˆä½¿ç”¨ï¼Ÿ" class="headerlink" title="æ€ä¹ˆä½¿ç”¨ï¼Ÿ"></a>æ€ä¹ˆä½¿ç”¨ï¼Ÿ</h2><p><img src="C:\Users\admin\AppData\Roaming\Typora\typora-user-images\image-20210504214623691.png" alt="image-20210504214623691"></p><p><img src="C:\Users\admin\AppData\Roaming\Typora\typora-user-images\image-20210504214718992.png" alt="image-20210504214718992"></p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">Class cls = Class.forName(<span class="hljs-string">&quot;com.twg.Cat&quot;</span>);<br><br>Method m = cls.getMethod(<span class="hljs-string">&quot;hi&quot;</span>);  <span class="hljs-comment">//è·å–æ–¹æ³•</span><br>m.invoke();  <span class="hljs-comment">// æ‰§è¡Œæ–¹æ³•</span><br><br>Object o = cls.newInstance();  <span class="hljs-comment">// è·å–å¯¹è±¡</span><br>Field f = cls.getField(<span class="hljs-string">&quot;name&quot;</span>);  <span class="hljs-comment">// è·å–å±æ€§</span><br>f.get(o);<br><br><br>cls.getConstructor();  <span class="hljs-comment">// è·å–æ„é€ æ–¹æ³•</span><br>cls.getConstructor(String.class);  <span class="hljs-comment">// è·å–å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•</span><br></code></pre></div></td></tr></table></figure><p><img src="C:\Users\admin\AppData\Roaming\Typora\typora-user-images\image-20210504214819250.png" alt="image-20210504214819250"></p><p><img src="C:\Users\admin\AppData\Roaming\Typora\typora-user-images\image-20210504215446703.png" alt="image-20210504215446703"></p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">method.setAccessible(<span class="hljs-keyword">true</span>);  <span class="hljs-comment">// å–æ¶ˆè®¿é—®æ£€æŸ¥</span><br></code></pre></div></td></tr></table></figure><h2 id="Classç±»"><a href="#Classç±»" class="headerlink" title="Classç±»"></a>Classç±»</h2><h3 id="Classçš„å‡ ç§æˆå‘˜æ–¹æ³•"><a href="#Classçš„å‡ ç§æˆå‘˜æ–¹æ³•" class="headerlink" title="Classçš„å‡ ç§æˆå‘˜æ–¹æ³•"></a>Classçš„å‡ ç§æˆå‘˜æ–¹æ³•</h3><p><img src="H:\blog\assertPics\image-20210504220901447.png" alt="image-20210504220901447"></p><figure class="highlight reasonml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs reasonml">Class&lt;?&gt; cls = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Class</span>.</span></span><span class="hljs-keyword">for</span><span class="hljs-constructor">Name(<span class="hljs-string">&quot;com.twg.Car&quot;</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(cls);  <span class="hljs-comment">// com.twg.Car</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(cls.get<span class="hljs-constructor">Class()</span>);  <span class="hljs-comment">// java.lang.Class</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(cls.get<span class="hljs-constructor">Package()</span>.get<span class="hljs-constructor">Name()</span>);  <span class="hljs-comment">// com.twg</span><br><br><span class="hljs-comment">// é€šè¿‡clsåˆ›å»ºå¯¹è±¡å®ä¾‹</span><br>Car car = (Car)cls.<span class="hljs-keyword">new</span><span class="hljs-constructor">Instance()</span>;<br><br><span class="hljs-comment">// è·å–å±æ€§ï¼Œä½†æ˜¯è¯¥æ–¹æ³•ä¸èƒ½è·å–ç§æœ‰å±æ€§</span><br>Field brand = cls.get<span class="hljs-constructor">Field(<span class="hljs-string">&quot;barnd&quot;</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(brand.get(car));<br>brand.set(car,<span class="hljs-string">&quot;å¥”é©°&quot;</span>);<br><br><span class="hljs-comment">// è·å–æ‰€æœ‰å±æ€§</span><br>Field<span class="hljs-literal">[]</span> fields = cls.get<span class="hljs-constructor">Fields()</span>;<br><br></code></pre></div></td></tr></table></figure><h3 id="è·å–ç±»å¯¹è±¡çš„å‡ ç§æ–¹æ³•"><a href="#è·å–ç±»å¯¹è±¡çš„å‡ ç§æ–¹æ³•" class="headerlink" title="è·å–ç±»å¯¹è±¡çš„å‡ ç§æ–¹æ³•"></a>è·å–ç±»å¯¹è±¡çš„å‡ ç§æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// 1) Class.forName()å·²çŸ¥ç±»çš„å…¨è·¯å¾„ï¼Œä¸€èˆ¬è¯»å–é…ç½®æ–‡ä»¶è·å–</span><br>Class.forName(<span class="hljs-string">&quot;xxx.xxx&quot;</span>);<br><br><span class="hljs-comment">// 2) ç±»å.classç”¨äºå‚æ•°ä¼ é€’</span><br>System.out.println(Car.class);<br><br><span class="hljs-comment">// 3) å¯¹è±¡.getClass()æœ‰å¯¹è±¡å®ä¾‹æ—¶</span><br>car.getClass();<br><br><span class="hljs-comment">// 4) é€šè¿‡ç±»åŠ è½½å™¨ã€4ç§ã€‘</span><br>ClassLoader classLoader = car.getClass().getClassLoader();<br>Class cls = classLoader.loadClass(classAllPath);<br><br><span class="hljs-comment">// 5) åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆint short long float double char boolean byteï¼‰</span><br>Class cls = <span class="hljs-keyword">int</span>.class;<br><br><span class="hljs-comment">// 6) åŸºæœ¬æ•°æ®ç±»å‹çš„åŒ…è£…ç±»</span><br>Class cls = Integer.TYPE;<br><br></code></pre></div></td></tr></table></figure><h3 id="åŠ¨æ€åŠ è½½-amp-é™æ€åŠ è½½"><a href="#åŠ¨æ€åŠ è½½-amp-é™æ€åŠ è½½" class="headerlink" title="åŠ¨æ€åŠ è½½&amp;é™æ€åŠ è½½"></a>åŠ¨æ€åŠ è½½&amp;é™æ€åŠ è½½</h3><p>é™æ€åŠ è½½ï¼šç¼–è¯‘æ—¶å°±åŠ è½½è¿™ä¸ªç±»ï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šæŠ¥é”™ï¼Œä¾èµ–æ€§å¤ªå¼º</p><p>åŠ¨æ€åŠ è½½ï¼šè¿è¡Œæ—¶æ‰åŠ è½½ï¼Œé™ä½äº†ä¾èµ–æ€§ï¼Œåå°„å°±æ˜¯åŠ¨æ€åŠ è½½</p><h2 id="ç±»åŠ è½½"><a href="#ç±»åŠ è½½" class="headerlink" title="ç±»åŠ è½½"></a>ç±»åŠ è½½</h2><p><img src="H:\blog\assertPics\image-20210505161219670.png" alt="image-20210505161219670"></p><p><img src="H:\blog\assertPics\image-20210505161619906.png" alt="image-20210505161619906"></p><ol><li><p>åŠ è½½</p><p>å°†å­—èŠ‚ç ä»ä¸åŒçš„æ•°æ®æºï¼ˆclassæ–‡ä»¶ã€jaråŒ…ã€ç½‘ç»œï¼‰è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å­—èŠ‚æµåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶ç”Ÿæˆè¯¥ç±»çš„java.lang.Classå¯¹è±¡ã€‚</p></li><li><p>è¿æ¥</p><p><img src="H:\blog\assertPics\image-20210505162004958.png" alt="image-20210505162004958"></p><p><img src="H:\blog\assertPics\image-20210505162255152.png" alt="image-20210505162255152"></p><p><img src="H:\blog\assertPics\image-20210505162709684.png" alt="image-20210505162709684"></p></li><li><p>åˆå§‹åŒ–</p><p><img src="H:\blog\assertPics\image-20210505163248206.png" alt="image-20210505163248206"></p></li></ol><h2 id="è·å–ç±»çš„ç»“æ„ä¿¡æ¯"><a href="#è·å–ç±»çš„ç»“æ„ä¿¡æ¯" class="headerlink" title="è·å–ç±»çš„ç»“æ„ä¿¡æ¯"></a>è·å–ç±»çš„ç»“æ„ä¿¡æ¯</h2><p><img src="H:\blog\assertPics\image-20210505170602330.png" alt="image-20210505170602330"></p><h2 id="åå°„â€çˆ†ç ´â€"><a href="#åå°„â€çˆ†ç ´â€" class="headerlink" title="åå°„â€çˆ†ç ´â€"></a>åå°„â€çˆ†ç ´â€</h2><p>æ‰€è°“çˆ†ç ´ï¼Œå°±æ˜¯å¯ä»¥è®¿é—®åˆ°ç§æœ‰çš„å±æ€§æˆ–æ–¹æ³•ã€‚</p><p>çˆ†ç ´åˆ›å»ºå®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">Constructor con = userClass.getDeclaredConstructor(<span class="hljs-keyword">int</span>.class,String.class);<br>con.setAccessible(<span class="hljs-keyword">true</span>);  <span class="hljs-comment">// çˆ†ç ´</span><br>Object obj = con.newInstance(<span class="hljs-number">100</span>,<span class="hljs-string">&quot;Bob&quot;</span>);<br><br></code></pre></div></td></tr></table></figure><p>çˆ†ç ´æ“ä½œå±æ€§</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">Field f = userClass.getDeclaredField(<span class="hljs-string">&quot;age&quot;</span>);<br>f.setAccessible(<span class="hljs-keyword">true</span>);<br>f.set(å¯¹è±¡obj,<span class="hljs-number">100</span>);<br>f.get(å¯¹è±¡obj);<span class="hljs-comment">//å¦‚æœæ˜¯é™æ€å±æ€§ï¼Œobjè¿™ä¸ªå‚æ•°å¯ä»¥å†™null</span><br></code></pre></div></td></tr></table></figure><p>çˆ†ç ´æ–¹æ³•</p><figure class="highlight oxygene"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs oxygene"><span class="hljs-function"><span class="hljs-keyword">Method</span> <span class="hljs-title">m</span> = <span class="hljs-title">userClass</span>.<span class="hljs-title">getDeclaredMethod</span><span class="hljs-params">(æ–¹æ³•å,XX.<span class="hljs-keyword">class</span>)</span>;</span><br>m.setAccessible(<span class="hljs-keyword">true</span>);  <span class="hljs-comment">// çˆ†ç ´</span><br>Object returnValue = m.invoke(obj,å®å‚åˆ—è¡¨);  <span class="hljs-comment">// é™æ€æ–¹æ³•ï¼Œobjå¯ä»¥å¡«null</span><br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaç¬”è®°-æ­£åˆ™</title>
    <link href="/2021/08/08/Java%E7%AC%94%E8%AE%B0-%E6%AD%A3%E5%88%99/"/>
    <url>/2021/08/08/Java%E7%AC%94%E8%AE%B0-%E6%AD%A3%E5%88%99/</url>
    
    <content type="html"><![CDATA[<h1 id="Javaç¬”è®°-æ­£åˆ™"><a href="#Javaç¬”è®°-æ­£åˆ™" class="headerlink" title="Javaç¬”è®° æ­£åˆ™"></a>Javaç¬”è®° æ­£åˆ™</h1><h2 id="åˆæ¢æ­£åˆ™"><a href="#åˆæ¢æ­£åˆ™" class="headerlink" title="åˆæ¢æ­£åˆ™"></a>åˆæ¢æ­£åˆ™</h2><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>       String str = <span class="hljs-string">&quot;1919å¹´ï¼Œä¸€ä½æ•™æˆåœ¨ã€Šæ–°é’å¹´ã€‹ä¸Šå‘è¡¨äº†ä¸€ç¯‡ç³»ç»Ÿä»‹ç»é©¬å…‹æ€ä¸»ä¹‰ç†è®ºçš„æ–‡ç« ï¼Œ&quot;</span> +<br>               <span class="hljs-string">&quot;çƒ­æƒ…èµé¢‚é©¬å…‹æ€ä¸»ä¹‰ä¸ºâ€œä¸–ç•Œæ”¹é€ åŸåŠ¨çš„å­¦è¯´â€ï¼Œå¹¶å…¬å¼€ç”³æ˜è‡ªå·±å¯¹é©¬å…‹æ€ä¸»ä¹‰çš„ä¿¡ä»°ï¼Œ&quot;</span> +<br>               <span class="hljs-string">&quot;ä½†åŒæ—¶ä¹Ÿè®¤ä¸ºï¼Œä¸å¯å°†â€œé©¬æ°çš„å­¦è¯´â€å°±â€œé‚£æ ·æ•´ä¸ªæ‹¿æ¥ï¼Œåº”ç”¨äºæˆ‘ä»¬ç”Ÿå­˜çš„ç¤¾ä¼šâ€ã€‚&quot;</span> +<br>               <span class="hljs-string">&quot;æ­¤åï¼Œä»–æ›´æ˜¯æ˜ç¡®æå‡ºï¼Œå¯¹å¾…é©¬å…‹æ€ä¸»ä¹‰å¿…é¡»ç ”ç©¶å®ƒâ€œæ€æ ·åº”ç”¨äºä¸­å›½ä»Šæ—¥çš„æ”¿æ²»ç»æµæƒ…å½¢â€ã€‚&quot;</span> +<br>               <span class="hljs-string">&quot;è¿™ä½æ•™æˆä¾¿æ˜¯ä¸­å›½å…±äº§å…šçš„ä¸»è¦åˆ›å§‹äººä¹‹ä¸€â€”â€”æå¤§é’Šã€‚ä»¥ç§‘å­¦çš„æ€åº¦å¯¹å¾…é©¬å…‹æ€ä¸»ä¹‰ï¼Œ&quot;</span> +<br>               <span class="hljs-string">&quot;è§†é©¬å…‹æ€ä¸»ä¹‰æ˜¯é©å‘½çš„ç§‘å­¦ï¼Œè€Œä¸æ˜¯æŠ½è±¡çš„å­¦ç†å’Œä¸å˜çš„æ•™æ¡ï¼Œè¿™æ ·çš„æ€åº¦ï¼Œæ­£æ˜¯ä¸­å›½å…±äº§å…šäººä¸€ä»¥è´¯ä¹‹çš„ç«‹åœºè¿½æ±‚ï¼Œ&quot;</span> +<br>               <span class="hljs-string">&quot;è´¯ç©¿äºæˆ‘ä»¬å…šçš„ç™¾å¹´å¥‹æ–—å†ç¨‹ã€‚&quot;</span>;<br>       String rgx = <span class="hljs-string">&quot;\\d\\d\\d\\d&quot;</span>;<br>       Pattern pattern = Pattern.compile(rgx);<br>       Matcher matcher = pattern.matcher(str);<br>       <span class="hljs-keyword">while</span> (matcher.find())&#123;<br>           System.out.println(matcher.group(<span class="hljs-number">0</span>));<br>       &#125;<br><br>   &#125;<br></code></pre></div></td></tr></table></figure><p><img src="H:\blog\assertPics\image-20210606101110770.png" alt="image-20210606101110770"></p><p>æ‰¾åˆ°åï¼Œå°†å­å­—ç¬¦ä¸²çš„å¼€å§‹ç´¢å¼•è®°å½•åˆ°matcherå¯¹è±¡çš„å±æ€§int[] groupsçš„groups[0]=0ä¸­ï¼Œå°†ç»“æŸçš„ç´¢å¼•+1è®°å½•åˆ°groups[1]=4ä¸­ã€‚</p><p>åŒæ—¶è®°å½•oldLastçš„å€¼ï¼Œè®°å½•ä¸ºâ€œç»“æŸçš„ç´¢å¼•+1â€ï¼Œå³ä¸‹æ¬¡find()ä»â€œ4â€è¿™ä¸ªä½ç½®å¼€å§‹æ‰¾ã€‚</p><p>matcher.group(0)ï¼šæˆªå–strçš„å­ä¸²ï¼šä½ç½®ä»groups[0]-groups[1]</p><p>group(x)ï¼šxå¯ä»¥ä¸ºå…¶å®ƒå‚æ•°ï¼Œå½“æ­£åˆ™ä¸­ä½¿ç”¨åˆ°åˆ†ç»„æ—¶ï¼šä¾‹å¦‚ä¸Šé¢çš„æ­£åˆ™æ¢æˆ</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">(\\d\\d)(\\d\\d)<br><br><span class="hljs-keyword">while</span> (matcher.find())&#123;<br>System.out.println(matcher.group(<span class="hljs-number">0</span>));<span class="hljs-comment">//1919</span><br>    System.out.println(matcher.group(<span class="hljs-number">1</span>));<span class="hljs-comment">//19</span><br>    System.out.println(matcher.group(<span class="hljs-number">2</span>));<span class="hljs-comment">//19</span><br>&#125;<br></code></pre></div></td></tr></table></figure><p>group()æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">group</span><span class="hljs-params">(<span class="hljs-keyword">int</span> group)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (first &lt; <span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalStateException(<span class="hljs-string">&quot;No match found&quot;</span>);<br>        <span class="hljs-keyword">if</span> (group &lt; <span class="hljs-number">0</span> || group &gt; groupCount())<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IndexOutOfBoundsException(<span class="hljs-string">&quot;No group &quot;</span> + group);<br>        <span class="hljs-keyword">if</span> ((groups[group*<span class="hljs-number">2</span>] == -<span class="hljs-number">1</span>) || (groups[group*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>] == -<span class="hljs-number">1</span>))<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">return</span> getSubSequence(groups[group * <span class="hljs-number">2</span>], groups[group * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>]).toString();<br>    &#125;<br></code></pre></div></td></tr></table></figure><h2 id="åå‘å¼•ç”¨"><a href="#åå‘å¼•ç”¨" class="headerlink" title="åå‘å¼•ç”¨"></a>åå‘å¼•ç”¨</h2><figure class="highlight taggerscript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs taggerscript">åŒ¹é…ä¸¤ä¸ªè¿ç»­çš„ç›¸åŒæ•°å­—ï¼š(<span class="hljs-symbol">\\</span>d)<span class="hljs-symbol">\\</span>1<br><br>åŒ¹é…äº”ä¸ªè¿ç»­çš„ç›¸åŒæ•°å­—ï¼š(<span class="hljs-symbol">\\</span>d)<span class="hljs-symbol">\\</span>1&#123;4&#125;<br><br>åŒ¹é…ä¸ªä½ä¸åƒä½ç›¸åŒï¼Œåä½ä¸ç™¾ä½ç›¸åŒçš„æ•°ï¼š(<span class="hljs-symbol">\\</span>d))(<span class="hljs-symbol">\\</span>d)<span class="hljs-symbol">\\</span>2<span class="hljs-symbol">\\</span>1<br></code></pre></div></td></tr></table></figure><h2 id="ç»“å·´å»é‡æ¡ˆä¾‹"><a href="#ç»“å·´å»é‡æ¡ˆä¾‹" class="headerlink" title="ç»“å·´å»é‡æ¡ˆä¾‹"></a>ç»“å·´å»é‡æ¡ˆä¾‹</h2><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Reg03</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        String content = <span class="hljs-string">&quot;æˆ‘æˆ‘ã€‚ã€‚ã€‚ã€‚æˆ‘ã€‚ã€‚è¦å­¦ã€‚å­¦å­¦å­¦Java&quot;</span>;<br>        String s1 = Pattern.compile(<span class="hljs-string">&quot;\\ã€‚&quot;</span>).matcher(content).replaceAll(<span class="hljs-string">&quot;&quot;</span>);<br>        String s2 = Pattern.compile(<span class="hljs-string">&quot;(.)\\1+&quot;</span>).matcher(s1).replaceAll(<span class="hljs-string">&quot;$1&quot;</span>);<br>        System.out.println(content);<br>        System.out.println(s1);<br>        System.out.println(s2);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="Stringç±»ä¸­ä½¿ç”¨æ­£åˆ™"><a href="#Stringç±»ä¸­ä½¿ç”¨æ­£åˆ™" class="headerlink" title="Stringç±»ä¸­ä½¿ç”¨æ­£åˆ™"></a>Stringç±»ä¸­ä½¿ç”¨æ­£åˆ™</h2><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Reg04</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-comment">//æ›¿æ¢</span><br>        String s = <span class="hljs-string">&quot;hello123wo0rld&quot;</span>;<br>        System.out.println(s);<br>        s = s.replaceAll(<span class="hljs-string">&quot;\\d&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>        System.out.println(s);<br><br>        <span class="hljs-comment">//åˆ†å‰²</span><br>        String s2 = <span class="hljs-string">&quot;2000-03-27 12:00:00&quot;</span>;<br>        System.out.println(s2);<br>        String[] split = s2.split(<span class="hljs-string">&quot;-|:|\\s&quot;</span>);<span class="hljs-comment">//â€œ\\sâ€è¡¨ç¤ºç©ºæ ¼</span><br>        <span class="hljs-keyword">for</span> (String s1 : split) &#123;<br>            System.out.println(s1);<br>        &#125;<br><br>        <span class="hljs-comment">//åŒ¹é…</span><br>        String s3 = <span class="hljs-string">&quot;13833330000&quot;</span>;<br>        System.out.println(s3.matches(<span class="hljs-string">&quot;1(38|37)\\d&#123;8&#125;&quot;</span>));<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="H:\blog\assertPics\image-20210616171059331.png" alt="image-20210616171059331"></p><h2 id="åŒ¹é…é‚®ç®±"><a href="#åŒ¹é…é‚®ç®±" class="headerlink" title="åŒ¹é…é‚®ç®±"></a>åŒ¹é…é‚®ç®±</h2><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Reg05</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        String s = <span class="hljs-string">&quot;wuguotang@gamil.com&quot;</span>;<br>        <span class="hljs-keyword">if</span>(s.matches(<span class="hljs-string">&quot;^[\\w|_]+@([\\w]+\\.)+[a-z|A-Z]+$&quot;</span>))&#123;<br>            System.out.println(<span class="hljs-string">&quot;yes&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;no&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="åŒ¹é…æ•°å­—-æ­£ã€è´Ÿï¼Œæ•´ï¼Œå°æ•°ã€‚"><a href="#åŒ¹é…æ•°å­—-æ­£ã€è´Ÿï¼Œæ•´ï¼Œå°æ•°ã€‚" class="headerlink" title="åŒ¹é…æ•°å­—-æ­£ã€è´Ÿï¼Œæ•´ï¼Œå°æ•°ã€‚"></a>åŒ¹é…æ•°å­—-æ­£ã€è´Ÿï¼Œæ•´ï¼Œå°æ•°ã€‚</h2><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Reg05</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        String s = <span class="hljs-string">&quot;-0.012&quot;</span>;<br>        <span class="hljs-keyword">if</span>(s.matches(<span class="hljs-string">&quot;^[+-]([1-9]\\d*|0)(.\\d+)?$&quot;</span>))&#123;<br>            System.out.println(<span class="hljs-string">&quot;yes&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;no&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure><h2 id="å¯¹URLè¿›è¡Œè§£æ"><a href="#å¯¹URLè¿›è¡Œè§£æ" class="headerlink" title="å¯¹URLè¿›è¡Œè§£æ"></a>å¯¹URLè¿›è¡Œè§£æ</h2><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Reg05</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        String s = <span class="hljs-string">&quot;https://www.fanyi.baidu.com:8080/home/index.html&quot;</span>;<br>        Pattern compile = Pattern.compile(<span class="hljs-string">&quot;^([a-zA-Z]+)://([a-zA-Z.]+):(\\d+)[\\w-/]*/([\\w.]+)$&quot;</span>);<br>        Matcher matcher = compile.matcher(s);<br>        <span class="hljs-keyword">if</span>(matcher.find())&#123;<br>            System.out.println(matcher.group(<span class="hljs-number">0</span>));<br>            System.out.println(matcher.group(<span class="hljs-number">1</span>));<br>            System.out.println(matcher.group(<span class="hljs-number">2</span>));<br>            System.out.println(matcher.group(<span class="hljs-number">3</span>));<br>            System.out.println(matcher.group(<span class="hljs-number">4</span>));<br><br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="H:\blog\assertPics\image-20210616175659937.png" alt="image-20210616175659937"></p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">Pattern.compile(<span class="hljs-string">&quot;^hello\\sworld$&quot;</span>)<br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaç¬”è®°-é›†åˆ</title>
    <link href="/2021/08/08/Java%E7%AC%94%E8%AE%B0-%E9%9B%86%E5%90%88%E4%B8%93%E9%A2%98/"/>
    <url>/2021/08/08/Java%E7%AC%94%E8%AE%B0-%E9%9B%86%E5%90%88%E4%B8%93%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="Javaç¬”è®°-é›†åˆä¸“é¢˜"><a href="#Javaç¬”è®°-é›†åˆä¸“é¢˜" class="headerlink" title="Javaç¬”è®°-é›†åˆä¸“é¢˜"></a>Javaç¬”è®°-é›†åˆä¸“é¢˜</h1><h2 id="é›†åˆä½“ç³»å›¾"><a href="#é›†åˆä½“ç³»å›¾" class="headerlink" title="é›†åˆä½“ç³»å›¾"></a>é›†åˆä½“ç³»å›¾</h2><p>é›†åˆä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼š</p><p>â€‹    Collectionï¼š Listã€Setï¼›å±äºå•åˆ—é›†åˆ</p><p>â€‹    Mapï¼šåŒåˆ—é›†åˆï¼Œå­˜æ”¾Key-Value</p><p><img src="H:\blog\assertPics\image-20210506192747886.png" alt="image-20210506192747886"></p><p><img src="H:\blog\assertPics\image-20210506192801220.png" alt="image-20210506192801220"></p><h2 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h2><p>è¿™äº›æ˜¯Listå’ŒSetéƒ½ç»§æ‰¿äº†çš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">ArrayList arrayList = <span class="hljs-keyword">new</span> ArrayList();<br>arrayList.add(<span class="hljs-string">&quot;é˜¿æ­¦&quot;</span>);<br>arrayList.add(<span class="hljs-number">18</span>);<br>arrayList.add(<span class="hljs-number">0.8f</span>);<br>arrayList.add(<span class="hljs-keyword">true</span>);<br>arrayList.add(<span class="hljs-keyword">true</span>);<br>System.out.println(arrayList);<br>arrayList.remove(<span class="hljs-number">2</span>);<br>System.out.println(arrayList);<br>arrayList.remove(<span class="hljs-keyword">true</span>);<br>System.out.println(arrayList);<br>System.out.println(arrayList.size());<br><span class="hljs-comment">// contains();addAll();clearAll();</span><br></code></pre></div></td></tr></table></figure><p><img src="H:\blog\assertPics\image-20210506203531547.png" alt="image-20210506203531547"></p><h3 id="éå†Collection"><a href="#éå†Collection" class="headerlink" title="éå†Collection"></a>éå†Collection</h3><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">Iterator iterator = arrayList.iterator();<br><span class="hljs-comment">// å¿«æ·é”®itit</span><br><span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>    Object next = iterator.next();<br>    System.out.println(<span class="hljs-string">&quot;obj: &quot;</span> + next);<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨å¢å¼ºforæ›¿æ¢è¿­ä»£å™¨ï¼Œå…¶åº•å±‚ä»æ˜¯è¿­ä»£å™¨</span><br><span class="hljs-comment">// å¿«æ·é”®arrayList.for</span><br>System.out.println(<span class="hljs-string">&quot;å¢å¼ºforè¿­ä»£===========&quot;</span>);<br><span class="hljs-keyword">for</span> (Object o : arrayList) &#123;<br>    System.out.println(<span class="hljs-string">&quot;obj:&quot;</span> + o);<br>&#125;<br></code></pre></div></td></tr></table></figure><h3 id="ArrayListåº•å±‚"><a href="#ArrayListåº•å±‚" class="headerlink" title="ArrayListåº•å±‚"></a>ArrayListåº•å±‚</h3><p><img src="H:\blog\assertPics\image-20210506212823395.png" alt="image-20210506212823395"></p><p>ä¸Šé¢çš„transientè¡¨ç¤ºï¼šè¢«ä¿®é¥°çš„å±æ€§æ˜¯ç¬é—´çš„ï¼ŒçŸ­æš‚çš„ï¼Œä¸ä¼šè¢«åºåˆ—åŒ–ã€‚</p><h4 id="ä½¿ç”¨æ— å‚æ„é€ å™¨åˆ›å»ºArrayListï¼š"><a href="#ä½¿ç”¨æ— å‚æ„é€ å™¨åˆ›å»ºArrayListï¼š" class="headerlink" title="ä½¿ç”¨æ— å‚æ„é€ å™¨åˆ›å»ºArrayListï¼š"></a>ä½¿ç”¨æ— å‚æ„é€ å™¨åˆ›å»ºArrayListï¼š</h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayListSource</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ArrayList list = <span class="hljs-keyword">new</span> ArrayList();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">12</span>; i++) &#123;<br>            list.add(i);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>ä½¿ç”¨æ— å‚æ„é€ å™¨ï¼Œé¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªç©ºçš„elementDataæ•°ç»„ï¼›ä»è¿™é‡Œå¯è§ï¼šArrayListçš„åº•å±‚æ˜¯é€šè¿‡æ•°ç»„å®ç°çš„ï¼Œè€Œè¿™ä¸ªelementDataå°±æ˜¯å­˜æ”¾æ•°æ®çš„æ•°ç»„ã€‚</p><p><img src="H:\blog\assertPics\image-20210506213448685.png" alt="image-20210506213448685"></p><p><img src="H:\blog\assertPics\image-20210506213539990.png" alt="image-20210506213539990"></p><p>ç„¶åæˆ‘ä»¬çœ‹æ·»åŠ å…ƒç´ çš„æ–¹æ³•ï¼š</p><p>eï¼šä»£è¡¨è¦æ·»åŠ çš„å…ƒç´ ï¼›</p><p>modCountï¼šè®°å½•é›†åˆè¢«ä¿®æ”¹çš„æ¬¡æ•°</p><p>åœ¨è¿™ä¸ªaddä¸­å…¶å®è°ƒç”¨äº†å¦ä¸€ä¸ªaddæ–¹æ³•ï¼Œè€Œè¿™ç¬¬äºŒä¸ªæ˜¯çœŸæ­£å®ç°æ·»åŠ æ“ä½œçš„ã€‚</p><p><img src="H:\blog\assertPics\image-20210506213916692.png" alt="image-20210506213916692"></p><p>sï¼šæŒ‡ç¤ºåœ¨ArrayListä¸­æ·»åŠ çš„å…ƒç´ ä¸ªæ•°ï¼›</p><p>elementData.lengthï¼šè¡¨ç¤ºå½“å‰çš„å®¹é‡ï¼›</p><p>å½“ä¸¤è€…ç›¸ç­‰ï¼Œè¡¨ç¤ºå½“å‰å®¹é‡ä¸å¤Ÿï¼Œéœ€è¦è‡ªåŠ¨å¢åŠ å®¹é‡äº†ã€‚â€“&gt;grow()</p><p>ç¡®ä¿æœ‰å‰©ä½™çš„ç©ºé—´æ¥æ·»åŠ å…ƒç´ åï¼Œæ‰è¿›è¡ŒçœŸæ­£çš„æ·»åŠ å…ƒç´ ï¼š</p><p>elementData[s]=e;     //æ·»åŠ åˆ°å°¾éƒ¨</p><p>size = s+1;                 //æ›´æ–°å…ƒç´ ä¸ªæ•°</p><p><img src="H:\blog\assertPics\image-20210506214028824.png" alt="image-20210506214028824"></p><p>s==elementData.lengthï¼šéœ€è¦æ‰©å®¹æ—¶</p><p>æ‰©å®¹çš„æ–¹æ³•ï¼š</p><p>minCapacityï¼šæŒ‡ç¤ºå½“å‰ArrayListæ‰€éœ€è¦çš„æœ€å°å®¹é‡ï¼Œæ·»åŠ å½“å‰è¿™ä¸ªå…ƒç´ æ‰€éœ€è¦çš„å®¹é‡ã€‚</p><p>newCapacity()ï¼šè®¡ç®—è‡ªåŠ¨æ‰©å®¹åçš„å®¹é‡</p><p>æ‰©å®¹ï¼šå°†åŸæ•°ç»„å¤åˆ¶åˆ°ä¸€ä¸ªæ›´å¤§çš„æ•°ç»„â€“ã€‹Array.copyOf()ï¼Œè¿™æ ·å¯ä»¥ä¿ç•™åŸå…ˆçš„æ•°æ®</p><p><img src="H:\blog\assertPics\image-20210506214058167.png" alt="image-20210506214058167"></p><p><img src="H:\blog\assertPics\image-20210506214115602.png" alt="image-20210506214115602"></p><p>æœ€åçœ‹ä¸‹æ‰©å®¹çš„å®¹é‡æ˜¯æ€ä¹ˆç®—çš„â€“ã€‹newCapacity()</p><p>ç¬¬ä¸€æ¬¡æ‰©å®¹æƒ…å†µç‰¹æ®Šï¼Œé€šè¿‡æ–¹æ³•ä¸­ç¬¬äºŒæ¡è¯­å¥è®¡ç®—å¾—åˆ°çš„newCapacityä»ç„¶æ˜¯0ï¼Œæ‰€ä»¥è¦é€šè¿‡ä¸‹é¢çš„åˆ¤æ–­æ¥è¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚</p><p>åé¢çš„å°±æ˜¯æŒ‰ç…§ï¼šnewCapacity = oldCapacity + (oldCapacity&gt;&gt;1);  // ç­‰ä»·äºæ‰©å®¹åˆ°åŸæ¥å®¹é‡çš„1.5å€</p><p><img src="H:\blog\assertPics\image-20210506214231510.png" alt="image-20210506214231510"></p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">DEFAULT_CAPACITY = <span class="hljs-number">10</span>;<span class="hljs-comment">//é»˜è®¤å®¹é‡æ˜¯10</span><br>MAX_ARRAY_SIZE = Integer.MAX_VALUE - <span class="hljs-number">8</span>  <span class="hljs-comment">// MAX_VALUE = 0x7fffffff=2147483647</span><br></code></pre></div></td></tr></table></figure><p><img src="H:\blog\assertPics\image-20210506214409897.png" alt="image-20210506214409897"></p><h4 id="ä½¿ç”¨å¸¦å‚æ„é€ å™¨"><a href="#ä½¿ç”¨å¸¦å‚æ„é€ å™¨" class="headerlink" title="ä½¿ç”¨å¸¦å‚æ„é€ å™¨"></a>ä½¿ç”¨å¸¦å‚æ„é€ å™¨</h4><p>ä½¿ç”¨å¸¦å‚æ•°çš„æ„é€ å™¨æ—¶ï¼ŒelementDataçš„é»˜è®¤å®¹é‡å°±æ˜¯æ‰€ä¼ çš„å‚æ•°ï¼Œåé¢å®¹é‡çš„è‡ªåŠ¨å¢é•¿ä¹Ÿæ˜¯å¢åŠ åˆ°åŸæ¥çš„1.5å€ã€‚</p><p><img src="H:\blog\assertPics\image-20210507091027392.png" alt="image-20210507091027392"></p><p><img src="H:\blog\assertPics\image-20210507091322938.png" alt="image-20210507091322938"></p><p><img src="H:\blog\assertPics\image-20210507091549618.png" alt="image-20210507091549618"></p><h3 id="Vectoråº•å±‚"><a href="#Vectoråº•å±‚" class="headerlink" title="Vectoråº•å±‚"></a>Vectoråº•å±‚</h3><p><img src="H:\blog\assertPics\image-20210507173525791.png" alt="image-20210507173525791"></p><h4 id="æ— å‚æ„é€ å™¨"><a href="#æ— å‚æ„é€ å™¨" class="headerlink" title="æ— å‚æ„é€ å™¨"></a>æ— å‚æ„é€ å™¨</h4><p><img src="H:\blog\assertPics\image-20210507173912482.png" alt="image-20210507173912482"></p><p>ä»æºç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸ç®¡æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æœ‰å‚è¿˜æ˜¯æ— å‚çš„æ„é€ å™¨ï¼Œå®ƒæœ€ç»ˆéƒ½æ˜¯é€šè¿‡Vector(int initialCapacity, int capacityIncrement)å®ç°çš„ï¼›è€Œä¸”ä½¿ç”¨æ— å‚æ„é€ å™¨ï¼Œå®é™…æ˜¯åˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤å®¹é‡ä¸º10çš„Vectorã€‚</p><p><img src="H:\blog\assertPics\image-20210509100555854.png" alt="image-20210509100555854"></p><p><img src="H:\blog\assertPics\image-20210509100609556.png" alt="image-20210509100609556"></p><p><img src="H:\blog\assertPics\image-20210509100622650.png" alt="image-20210509100622650"></p><p>æˆ‘ä»¬å†æ¥çœ‹ä¸‹add()æ–¹æ³•ï¼Œæ„Ÿè§‰å’ŒArrayListçš„add()å¾ˆç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼ŒVectoræ‰©å®¹æ—¶ï¼Œæ—¶æ‰©å®¹åˆ°åŸæ¥çš„2å€ã€‚</p><p><img src="H:\blog\assertPics\image-20210507175430706.png" alt="image-20210507175430706"></p><p><img src="H:\blog\assertPics\image-20210507175448610.png" alt="image-20210507175448610"></p><p><img src="H:\blog\assertPics\image-20210507175504372.png" alt="image-20210507175504372"></p><p><img src="H:\blog\assertPics\image-20210507175516183.png" alt="image-20210507175516183"></p><p><img src="H:\blog\assertPics\image-20210507175535486.png" alt="image-20210507175535486"></p><p><img src="H:\blog\assertPics\image-20210507175656167.png" alt="image-20210507175656167"></p><h3 id="LinkedListåº•å±‚"><a href="#LinkedListåº•å±‚" class="headerlink" title="LinkedListåº•å±‚"></a>LinkedListåº•å±‚</h3><p>åº•å±‚å®ç°äº†åŒå‘é“¾è¡¨å’ŒåŒç«¯é˜Ÿåˆ—çš„ç‰¹ç‚¹ã€‚</p><p>çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ²¡æœ‰å®ç°åŒæ­¥ã€‚</p><p><img src="H:\blog\assertPics\image-20210507181602078.png" alt="image-20210507181602078"></p><p><img src="H:\blog\assertPics\image-20210507181850120.png" alt="image-20210507181850120"></p><p><img src="H:\blog\assertPics\image-20210507181906299.png" alt="image-20210507181906299"></p><p><img src="H:\blog\assertPics\image-20210507232843541.png" alt="image-20210507232843541"></p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LinkedListSource</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        LinkedList linkedList = <span class="hljs-keyword">new</span> LinkedList();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>            linkedList.add(i);<br>        &#125;<br>        linkedList.remove(<span class="hljs-number">3</span>);       <br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure><h4 id="æ„é€ å™¨"><a href="#æ„é€ å™¨" class="headerlink" title="æ„é€ å™¨"></a>æ„é€ å™¨</h4><p>é¦–å…ˆçœ‹ä¸‹LinkedListçš„æ„é€ å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªç©ºçš„æ–¹æ³•ã€‚æ‰§è¡Œåç»™å±æ€§è¿›è¡Œåˆå§‹åŒ–å·¥ä½œã€‚</p><p><img src="H:\blog\assertPics\image-20210509101851357.png" alt="image-20210509101851357"></p><p><img src="H:\blog\assertPics\image-20210509102134987.png" alt="image-20210509102134987"></p><h4 id="add"><a href="#add" class="headerlink" title="add()"></a>add()</h4><p><img src="H:\blog\assertPics\image-20210509102236045.png" alt="image-20210509102236045"></p><p><img src="H:\blog\assertPics\image-20210509102516662.png" alt="image-20210509102516662"></p><p>æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œé“¾è¡¨çš„å¤´å°¾æŒ‡é’ˆéƒ½æ˜¯æŒ‡å‘è¿™ä¸ªå…ƒç´ ã€‚</p><p><img src="H:\blog\assertPics\image-20210509102619712.png" alt="image-20210509102619712"></p><p>è¯•ç€å†æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥çœ‹åˆ°ä»–ä»¬ç¡®å®å½¢æˆäº†åŒå‘é“¾è¡¨çš„ç»“æ„ã€‚</p><p><img src="H:\blog\assertPics\image-20210509102923166.png" alt="image-20210509102923166"></p><p><img src="H:\blog\assertPics\image-20210509103039749.png" alt="image-20210509103039749"></p><h4 id="remove"><a href="#remove" class="headerlink" title="remove()"></a>remove()</h4><p><img src="H:\blog\assertPics\image-20210509103340598.png" alt="image-20210509103340598"></p><p><img src="H:\blog\assertPics\image-20210509103540914.png" alt="image-20210509103540914"></p><p><img src="H:\blog\assertPics\image-20210509103527755.png" alt="image-20210509103527755"></p><p>checkElementIndex()æ˜¯æ£€æŸ¥æ‰€è¦åˆ é™¤çš„å…ƒç´ ä¸‹æ ‡æ˜¯å¦æ˜¯æœ‰æ•ˆçš„ã€‚</p><p>unlink(Node<E> x)æ¥åˆ é™¤é“¾è¡¨ä¸­çš„å…ƒç´ ï¼Œè®©å…¶å‰é¢çš„å…ƒç´ ï¼ŒæŒ‡å‘x.nextï¼Œè®©åé¢çš„å…ƒç´ æŒ‡å‘x.preï¼Œè®©x.item=nullã€‚</p><p><img src="H:\blog\assertPics\image-20210509104940970.png" alt="image-20210509104940970"></p><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>Setå’ŒListä¸€æ ·ï¼Œéƒ½ç»§æ‰¿è‡ªCollectionï¼Œæ‰€ä»¥å¸¸ç”¨æ–¹æ³•å’ŒCollectionä¸€æ ·ã€‚</p><p>éå†æ–¹å¼ä¹Ÿä¸€æ ·ï¼Œä½†æ˜¯ä¸èƒ½ä½¿ç”¨ã€ç´¢å¼•ã€‘çš„æ–¹å¼æ¥éå†ï¼Œå› ä¸ºSetä¸­å…ƒç´ æ˜¯æ— åºçš„ã€‚åº•å±‚çš„å®ç°ä¸å†æ˜¯æ•°ç»„ï¼Œè€Œæ˜¯æ•°ç»„+é“¾è¡¨ã€‚</p><p>ä¸èƒ½å­˜æ”¾é‡å¤çš„å…ƒç´ ï¼›</p><p>æ˜¯æ— åºçš„ï¼šæ·»åŠ çš„é¡ºåºä¸å–å‡ºçš„é¡ºåºä¸åŒï¼Œä½†æ˜¯æ¯æ¬¡å–å‡ºçš„é¡ºåºæ˜¯å›ºå®šçš„ï¼›</p><h3 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h3><p>HashSetåº•å±‚æ˜¯HashMapï¼Œ-ã€‹</p><p>ï¼ˆæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼‰jdk8.0</p><p>ï¼ˆæ•°ç»„+é“¾è¡¨ï¼‰jdk7.0</p><p><img src="H:\blog\assertPics\image-20210509110025408.png" alt="image-20210509110025408"></p><h3 id="LinkedHashSet"><a href="#LinkedHashSet" class="headerlink" title="LinkedHashSet"></a>LinkedHashSet</h3><p>å…¶åº•å±‚æ˜¯LinkedHashMapï¼›ï¼ˆå’ŒHashSetç»´æŠ¤çš„æ˜¯HashMapç»“æ„ï¼‰</p><p>åº•å±‚ç»´æŠ¤ä¸€ä¸ªæ•°ç»„+åŒå‘é“¾è¡¨ï¼›</p><p>ç”±äºæœ‰äº†åŒå‘é“¾è¡¨ï¼Œè¿™æ ·å°±å¯ä»¥è®©æ’å…¥é¡ºåºä¸å–å‡ºçš„é¡ºå¯»ä¸€è‡´ï¼›ï¼ˆå’ŒHashSetä¸åŒï¼‰</p><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p><img src="H:\blog\assertPics\image-20210510101714810.png" alt="image-20210510101714810"></p><p><img src="H:\blog\assertPics\image-20210506192801220.png" alt="image-20210506192801220"></p><h3 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h3><p>åˆå§‹å¤§å°16ï¼Œ</p><p>åŠ è½½åº”å­ï¼š0.75</p><h3 id="Hashtable"><a href="#Hashtable" class="headerlink" title="Hashtable"></a>Hashtable</h3><p>keyã€valueå‡ä¸å…è®¸ä¸ºç©ºï¼ŒNullPointerExceptionï¼›</p><p>æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›</p><p><img src="H:\blog\assertPics\image-20210510112226641.png" alt="image-20210510112226641"></p><p>åº•å±‚ï¼šHashtable$Entry[]ï¼Œåˆå§‹å¤§å°ï¼š11ï¼›</p><p>å½“count&gt;=thresholdæ—¶ï¼Œ</p><p>æ‰©å®¹ç®—æ³•ï¼šnew = (old&lt;&lt;2)+1ï¼›æ–°å®¹é‡ = åŸæ¥çš„*2+1ï¼›</p><p><img src="H:\blog\assertPics\image-20210510151249644.png" alt="image-20210510151249644"></p><h3 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h3><p><img src="H:\blog\assertPics\image-20210510151626481.png" alt="image-20210510151626481"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><img src="H:\blog\assertPics\image-20210510152742275.png" alt="image-20210510152742275"></p>]]></content>
    
    
    <categories>
      
      <category>ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaç¬”è®°-æ³›å‹</title>
    <link href="/2021/08/08/Java%E7%AC%94%E8%AE%B0-%E6%B3%9B%E5%9E%8B/"/>
    <url>/2021/08/08/Java%E7%AC%94%E8%AE%B0-%E6%B3%9B%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="Javaç¬”è®°-æ³›å‹"><a href="#Javaç¬”è®°-æ³›å‹" class="headerlink" title="Javaç¬”è®°-æ³›å‹"></a>Javaç¬”è®°-æ³›å‹</h1><h2 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h2><p>ç”±äºä¹‹å‰ä¸èƒ½å¤Ÿå¯¹åŠ å…¥åˆ°é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œçº¦æŸï¼Œå¯èƒ½ä¼šå‡ºç°ç±»å‹è½¬æ¢å¼‚å¸¸ClassCastExceptionçš„å¼‚å¸¸ã€‚(ä¸å®‰å…¨ğŸ’”)</p><p>åœ¨éå†é›†åˆçš„æ—¶å€™ï¼Œéœ€è¦ç±»å‹è½¬æ¢ï¼Œæ•°æ®é‡ä¸€å¤§ï¼Œæ•ˆç‡å°±ä½ã€‚(æ•ˆç‡ä½ğŸ’”)</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">generic01</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ArrayList list = <span class="hljs-keyword">new</span> ArrayList();<br>        list.add(<span class="hljs-keyword">new</span> Dog(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">3</span>));<br>        list.add(<span class="hljs-keyword">new</span> Dog(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">5</span>));<br>        list.add(<span class="hljs-keyword">new</span> Dog(<span class="hljs-string">&quot;lily&quot;</span>, <span class="hljs-number">1</span>));<br><br>        list.add(<span class="hljs-keyword">new</span> Cat(<span class="hljs-string">&quot;kitty&quot;</span>, <span class="hljs-number">4</span>));<br><br>        <span class="hljs-keyword">for</span> (Object o : list) &#123;<br>            System.out.println(((Dog) o).getName() + <span class="hljs-string">&quot;-&quot;</span> + ((Dog) o).getAge());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="H:\blog\assertPics\image-20210511151918974.png" alt="image-20210511151918974"></p><p>ä½¿ç”¨æ³›å‹åï¼Œé€šè¿‡å¯¹å­˜å…¥åˆ°é›†åˆä¸­å…ƒç´ è¿›è¡Œç±»å‹çº¦æŸï¼Œå¯ä»¥è‡ªåŠ¨æ£€æŸ¥æ·»åŠ çš„å…ƒç´ ç±»å‹æ˜¯å¦æ˜¯çº¦å®šçš„ç±»å‹ï¼›</p><p>åŒæ—¶åœ¨éå†æ—¶ï¼Œä¸éœ€è¦å†è¿›è¡Œè½¬å‹ï¼Œä½¿å¾—æ•ˆç‡æé«˜ğŸ§¡ğŸ§¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">generic01</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ArrayList&lt;Dog&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;Dog&gt;();<br>        list.add(<span class="hljs-keyword">new</span> Dog(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">3</span>));<br>        list.add(<span class="hljs-keyword">new</span> Dog(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">5</span>));<br>        list.add(<span class="hljs-keyword">new</span> Dog(<span class="hljs-string">&quot;lily&quot;</span>, <span class="hljs-number">1</span>));<br><br><span class="hljs-comment">//        list.add(new Cat(&quot;kitty&quot;, 4));    //ä½¿ç”¨æ³›å‹åï¼Œä½¿ç”¨è¿™æ¡è¯­å¥ï¼Œä¼šæç¤ºé”™è¯¯</span><br><br>        <span class="hljs-keyword">for</span> (Dog o : list) &#123;<br>            System.out.println(o.getName() + <span class="hljs-string">&quot;-&quot;</span> + o.getAge());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>å¦‚æœå°†ä¸Šé¢çš„é‚£è¡Œä»£ç å–æ¶ˆæ³¨é‡Šï¼Œè¯•å›¾å‘listä¸­æ·»åŠ Catå¯¹è±¡æ—¶ï¼Œideaå°†ä¼šæç¤ºæˆ‘æœ‰è¯­æ³•é”™è¯¯ï¼Œè¿™æ­£ä½“ç°å‡ºä½¿ç”¨æ³›å‹çš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ç±»å‹è¿›è¡Œã€çº¦æŸã€‘ï¼Œä¿è¯äº†ä»£ç çš„å®‰å…¨æ€§ã€‚</p><p>âŒé”™è¯¯æç¤ºï¼š</p><p><img src="H:\blog\assertPics\image-20210511152257920.png" alt="image-20210511152257920"></p><h2 id="æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ˜¯ä»€ä¹ˆï¼Ÿ"></a>æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><img src="H:\blog\assertPics\image-20210511153557534.png" alt="image-20210511153557534"></p><p><img src="H:\blog\assertPics\image-20210511153709638.png" alt="image-20210511153709638"></p><p>åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šEæ˜¯ä»€ä¹ˆç±»å‹ï¼›</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p><img src="H:\blog\assertPics\image-20210511154016796.png" alt="image-20210511154016796"></p><p>1ã€æ³›å‹ä¸­æŒ‡å®šçš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯åº”ç”¨ç±»å‹ï¼Œä¸å¯ä»¥æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆshort\int\long\byte\float\double\boolean\charï¼‰ï¼›</p><p>2ã€æŒ‡å®šæ³›å‹åï¼Œä¼ å…¥çš„ç±»å‹å¯ä»¥æ˜¯æŒ‡å®šçš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å­ç±»å‹ï¼›</p><p>3ã€æ³›å‹çš„ä½¿ç”¨å½¢å¼</p><p>ä¸‹é¢ä¸¤ç§éƒ½å¯ä»¥ï¼Œæ¨èä½¿ç”¨ç¬¬äºŒç§ï¼Œæ›´åŠ ç®€æ´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">ArrayList&lt;Integer&gt; list1 = <span class="hljs-keyword">new</span> ArryList&lt;Integer&gt;();<br>ArrayList&lt;Integer&gt; list2 = <span class="hljs-keyword">new</span> ArryList&lt;&gt;();<br>ArrayList list3 = <span class="hljs-keyword">new</span> ArryList();   <span class="hljs-comment">//ä¸ä½¿ç”¨æ³›å‹ï¼Œé»˜è®¤æ˜¯Object</span><br></code></pre></div></td></tr></table></figure><h2 id="è‡ªå®šä¹‰æ³›å‹-æ³›å‹æ¥å£-æ³›å‹æ–¹æ³•"><a href="#è‡ªå®šä¹‰æ³›å‹-æ³›å‹æ¥å£-æ³›å‹æ–¹æ³•" class="headerlink" title="è‡ªå®šä¹‰æ³›å‹/æ³›å‹æ¥å£/æ³›å‹æ–¹æ³•"></a>è‡ªå®šä¹‰æ³›å‹/æ³›å‹æ¥å£/æ³›å‹æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">//æ³›å‹</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> ç±»å&lt;<span class="hljs-title">T</span>,<span class="hljs-title">R</span>...&gt;</span>&#123;<br>æˆå‘˜<br>&#125;<br><br><span class="hljs-comment">//æ³›å‹æ¥å£</span><br><span class="hljs-class"><span class="hljs-keyword">interface</span> æ¥å£å&lt;<span class="hljs-title">T</span>,<span class="hljs-title">R</span>...&gt;</span>&#123;    <br>&#125;<br><br><span class="hljs-comment">//æ³›å‹æ–¹æ³•</span><br>ä¿®é¥°ç¬¦ &lt;T,R...&gt; è¿”å›ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨)&#123;    <br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="H:\blog\assertPics\image-20210511165125110.png" alt="image-20210511165125110"></p><p><img src="H:\blog\assertPics\image-20210511165242210.png" alt="image-20210511165242210"></p><p><img src="H:\blog\assertPics\image-20210511170459084.png" alt="image-20210511170459084"></p><p><img src="H:\blog\assertPics\image-20210511172117159.png" alt="image-20210511172117159"></p>]]></content>
    
    
    <categories>
      
      <category>ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VS2017é…ç½®GLUT</title>
    <link href="/2021/08/08/VS2017%E9%85%8D%E7%BD%AEGLUT/"/>
    <url>/2021/08/08/VS2017%E9%85%8D%E7%BD%AEGLUT/</url>
    
    <content type="html"><![CDATA[<h1 id="OpenGL-VS2017é…ç½®GLUT"><a href="#OpenGL-VS2017é…ç½®GLUT" class="headerlink" title="OpenGL-VS2017é…ç½®GLUT"></a>OpenGL-VS2017é…ç½®GLUT</h1><ol><li><p>å°†glutåŒ…è§£å‹ï¼›</p><p><img src="H:\blog\assertPics\image-20210617083853517.png" alt="image-20210617083853517"></p></li><li><p>å°†glut.hæ”¾åˆ°E:\2017\VC\Tools\MSVC\14.16.27023\includeç›®å½•ä¸‹ï¼›</p><p>è¿™ä¸ªç›®å½•ï¼Œæ¯ä¸ªäººçš„å¯èƒ½ä¸ä¸€æ ·ï¼Œæ€ä¹ˆå¾—åˆ°è‡ªå·±çš„é‚£ä¸ªç›®å½•å‘¢ï¼Ÿ</p><p>â€‹    1ï¼‰æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œéšä¾¿includeä¸€ä¸ªæ–‡ä»¶ï¼Œæ¯”å¦‚#include<iostream></p><p>â€‹    2ï¼‰åœ¨è¿™è¡Œä»£ç ä¸Šé¼ æ ‡ã€å³å‡»ã€‘-&gt;æ‰“å¼€æ–‡æ¡£â€œiostreamâ€</p><p><img src="H:\blog\assertPics\image-20210617084312853.png" alt="image-20210617084312853"></p><p>â€‹    3ï¼‰åœ¨æ‰“å¼€çš„çª—å£ã€æ ‡ç­¾ã€‘å¤„ï¼Œã€å³é”®ã€‘é€‰æ‹©-&gt;æ‰“å¼€æ‰€åœ¨çš„æ–‡ä»¶å¤¹</p><p><img src="H:\blog\assertPics\image-20210617084446516.png" alt="image-20210617084446516"></p><p><img src="H:\blog\assertPics\image-20210617084531010.png" alt="image-20210617084531010"></p></li><li><p>å°†glut.libã€glut32.libæ”¾åˆ°E:\2017\VC\Tools\MSVC\14.16.27023\lib\x86ç›®å½•ä¸‹ï¼›</p><p>å½“ä½ å®Œæˆäº†ç¬¬äºŒæ­¥ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹å°±æ˜¯ä¸Šä¸€çº§çš„lib\x86ï¼›</p></li><li><p>å°†å‰©ä¸‹çš„glut.dllã€glut32.dllæ–‡ä»¶æ”¾åˆ°C:\Windows\SysWOW64ä¸‹ï¼›</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å›¾å½¢å­¦</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŠ¨æ€è§„åˆ’DP</title>
    <link href="/2021/08/08/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92DP/"/>
    <url>/2021/08/08/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92DP/</url>
    
    <content type="html"><![CDATA[<h1 id="åŠ¨æ€è§„åˆ’DP"><a href="#åŠ¨æ€è§„åˆ’DP" class="headerlink" title="åŠ¨æ€è§„åˆ’DP"></a>åŠ¨æ€è§„åˆ’DP</h1><p>1ã€æ±‚æ–æ³¢é‚£å¥‘æ•°</p><p>Fibonacciä»¥å¦‚ä¸‹è¢«ä»¥é€’æ¨çš„æ–¹æ³•å®šä¹‰ï¼šF(0)=0ï¼ŒF(1)=1, F(n)=F(n - 1)+F(n - 2)ï¼ˆn â‰¥ 2ï¼Œn âˆˆ N*ï¼‰ï¼Œç®€å•çš„ç†è§£å°±æ˜¯ä»n=2å¼€å§‹ï¼Œæ¯ä¸€é¡¹éƒ½ç­‰äºå‰ä¸¤é¡¹çš„å’Œã€‚<br>é¦–å…ˆä½¿ç”¨å¸¸è§„çš„æ–¹æ³•æ±‚æ–æ³¢é‚£å¥‘æ•°ï¼Œä¹Ÿå°±æ˜¯æ ¹æ®å…¶å®šä¹‰ï¼Œä½¿ç”¨é€’å½’</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getFib2</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;         <br>    <span class="hljs-keyword">if</span>(n&lt;=<span class="hljs-number">2</span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br><span class="hljs-keyword">return</span> getFib2(n-<span class="hljs-number">1</span>)+getFib2(n-<span class="hljs-number">2</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure><p>é€’å½’æ–¹æ³•å¾€å¾€è€—æ—¶ï¼Œæ¶ˆè€—å†…å­˜ã€‚è€Œä¸”ä¸Šé¢çš„æ–¹æ³•æœ‰å¾ˆå¤šé‡å¤è®¡ç®—ã€‚ä¾‹å¦‚ï¼Œæˆ‘åœ¨è®¡ç®—Fib(5)æ—¶ï¼Œéœ€è¦è®¡ç®—Fib(4)+Fib(3)ï¼›ç”±äºn=4,n=3å‡ä¸æ˜¯é€’å½’çš„ç»ˆæ­¢æ¡ä»¶ï¼Œæ‰€ä»¥ä»–ä»¬éƒ½éœ€è¦å†é€’å½’ä¸‹å»ã€‚å…ˆçœ‹Fib(4)ï¼š</p><p>ç”±äºFib(4)ç”±äºæ²¡æœ‰åˆ°è¾¾é€’å½’çš„ç»ˆæ­¢æ¡ä»¶ï¼Œä»ç„¶éœ€è¦é€’å½’è®¡ç®—ï¼šFib(3)+Fib(2)ï¼Œç„¶åFib(3)å†é€’å½’ä¸€æ¬¡æ‰ç»ˆäºè®¡ç®—å‡ºFib(4)ï¼›</p><p>åŒç†ï¼ŒFib(3)ä¹Ÿæ˜¯è¿™æ ·ç®—çš„ã€‚</p><p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œåœ¨æ±‚Fib(5)æ—¶ï¼Œæˆ‘ä»¬å°±è®¡ç®—äº†ä¸¤æ¬¡Fib(3)ï¼Œè¿™å°±å‘ç”Ÿäº†å¤šä½™çš„è®¡ç®—ã€‚</p><p>ä¸‹é¢çš„å°±ç”¨DPæ¥ä¼˜åŒ–ä¸‹ã€‚å…·ä½“çš„ç»†èŠ‚ä¹Ÿå°±æ˜¯ï¼Œä½¿ç”¨ä¸€ä¸ªè¾“å…¥æ¥å­˜å‚¨å·²ç»è®¡ç®—è¿‡çš„ç»“æœï¼Œæ¯”å¦‚ä¸Šé¢çš„Fib(3)ï¼Œå½“æˆ‘ä»¬åé¢å†æ¬¡éœ€è¦è¿™ä¸ªç»“æœæ—¶ï¼Œç›´æ¥æŸ¥è¯¢è¿™ä¸ªæ•°ç»„å³å¯ï¼Œè¿™å¯æ¯”å†ç®—ä¸€éè¦åˆ’å¾—æ¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br>    <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> []dp =<span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">100</span>];<span class="hljs-comment">//å®šä¹‰å­˜å‚¨è¡¨</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getFib</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(n&lt;=<span class="hljs-number">2</span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(dp[n]!=<span class="hljs-number">0</span>)&#123;<span class="hljs-comment">//æŸ¥è¡¨</span><br>            <span class="hljs-keyword">return</span> dp[n];<br>        &#125;<br>        <span class="hljs-comment">//å½“æŸ¥è¯¢è¡¨åï¼Œå‘ç°æ²¡æœ‰è®¡ç®—è¿‡æ—¶ï¼Œå†ä½¿ç”¨é€’å½’æ¥ç®—ï¼Œå¹¶å­˜åˆ°è¡¨ä¸­</span><br>        dp[n]=getFib(n-<span class="hljs-number">1</span>)+getFib(n-<span class="hljs-number">2</span>);<br>        <span class="hljs-keyword">return</span> dp[n];<br>    &#125;<br>    <br>&#125;<br></code></pre></div></td></tr></table></figure><p>æœ€åï¼Œæ¥çœ‹ä¸‹DPçš„é™ç»´æ‰“å‡»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> n = <span class="hljs-number">42</span>;<br>    <span class="hljs-keyword">long</span> start = System.currentTimeMillis();<br>    System.out.println(getFib(n));<br>    <span class="hljs-keyword">long</span> s1 = System.currentTimeMillis();<br>    System.out.println(<span class="hljs-string">&quot;DP:&quot;</span>+(s1-start)+<span class="hljs-string">&quot;ms&quot;</span>);<br><br>    System.out.println(getFib2(n));<br>    System.out.println(<span class="hljs-string">&quot;DiGui:&quot;</span>+(System.currentTimeMillis()-s1)+<span class="hljs-string">&quot;ms&quot;</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="H:\blog\assertPics\image-20210606203117881.png" alt="image-20210606203117881"></p><p>2ã€ä¸¢æ£‹å­é—®é¢˜</p>]]></content>
    
    
    <categories>
      
      <category>ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring</title>
    <link href="/2021/08/08/Java%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Spring/"/>
    <url>/2021/08/08/Java%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Spring/</url>
    
    <content type="html"><![CDATA[<h1 id="Javaç¬”è®°â€”â€”Spring"><a href="#Javaç¬”è®°â€”â€”Spring" class="headerlink" title="Javaç¬”è®°â€”â€”Spring"></a>Javaç¬”è®°â€”â€”Spring</h1><p>Springç†å¿µâ€”â€”ç®€åŒ–ä¼ä¸šçº§åº”ç”¨å¼€å‘çš„å¤æ‚æ€§ï¼Œä½¿å¾—ç°æœ‰çš„æŠ€æœ¯æ›´å®¹æ˜“ä½¿ç”¨ï¼Œæ˜¯ä¸€ä¸ªå¤§æ‚çƒ©ï¼Œæ•´åˆäº†æ‰€æœ‰çš„æŠ€æœ¯æ¡†æ¶ã€‚</p><p>SSMï¼šSpringMVC+Spring+Mybatis</p><p>å¼€å‘æ–‡æ¡£ï¼š<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/">Spring Framework Documentation</a></p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></div></td></tr></table></figure><h2 id="ğŸ‘ä¼˜ç‚¹"><a href="#ğŸ‘ä¼˜ç‚¹" class="headerlink" title="ğŸ‘ä¼˜ç‚¹"></a>ğŸ‘ä¼˜ç‚¹</h2><ul><li>å¼€æºã€å…è´¹çš„æ¡†æ¶ï¼ˆå®¹å™¨ï¼‰</li><li>è½»é‡çº§ã€éå…¥ä¾µå¼çš„æ¡†æ¶</li><li><strong>æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰</strong></li><li>æ”¯æŒäº‹åŠ¡å¤„ç†ï¼Œå¯¹æ¡†æ¶æ•´åˆçš„æ”¯æŒ</li></ul><p>Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„IOCå’ŒAOPæ¡†æ¶</p><h2 id="ğŸ‡ç»„æˆ"><a href="#ğŸ‡ç»„æˆ" class="headerlink" title="ğŸ‡ç»„æˆ"></a>ğŸ‡ç»„æˆ</h2><p><img src="C:\Users\admin\AppData\Roaming\Typora\typora-user-images\image-20210729170952116.png" alt="image-20210729170952116"></p><p>Spring Boot</p><ul><li>ä¸€ä¸ªå¿«é€Ÿå¼€å‘çš„è„šæ‰‹æ¶</li><li>åŸºäºSpringBootå¯ä»¥å¿«é€Ÿå¼€å‘å•ä¸ªå¾®æœåŠ¡</li><li>çº¦å®šå¤§äºé…ç½®</li></ul><p>Spring Cloud</p><ul><li>æ˜¯åŸºäºSpring Bootå®ç°çš„</li></ul><p>åœ¨å­¦ä¹ Spring Bootä¹‹å‰éœ€è¦å®Œå…¨æŒæ¡Springä»¥åŠSpringMVCã€‚</p><p>å¼Šç«¯ï¼šé…ç½®ååˆ†ç¹çã€‚</p><h2 id="ğŸ¥IOCâ€”â€”æ§åˆ¶åè½¬"><a href="#ğŸ¥IOCâ€”â€”æ§åˆ¶åè½¬" class="headerlink" title="ğŸ¥IOCâ€”â€”æ§åˆ¶åè½¬"></a>ğŸ¥IOCâ€”â€”æ§åˆ¶åè½¬</h2><p>æ§åˆ¶åè½¬æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼ŒDI(ä¾èµ–æ³¨å…¥)æ˜¯å®ç°IoCçš„ä¸€ç§æ–¹æ³•ï¼Œä¹Ÿæœ‰äººè®¤ä¸ºDIåªæ˜¯IOCçš„å¦ä¸€ç§è¯´æ³•ã€‚æ²¡æœ‰IOCçš„ç¨‹åºä¸­ , æˆ‘ä»¬ä½¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ , å¯¹è±¡çš„åˆ›å»ºä¸å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»å®Œå…¨ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç¨‹åºè‡ªå·±æ§åˆ¶ï¼Œæ§åˆ¶åè½¬åå°†å¯¹è±¡çš„åˆ›å»ºè½¬ç§»ç»™ç¬¬ä¸‰æ–¹ï¼Œä¸ªäººè®¤ä¸ºæ‰€è°“æ§åˆ¶åè½¬å°±æ˜¯ï¼šè·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼åè½¬äº†ã€‚<br><strong>IOCæ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒ</strong>ï¼Œä½¿ç”¨å¤šç§æ–¹å¼å®Œç¾çš„å®ç°äº†IOCï¼Œå¯ä»¥ä½¿ç”¨XMLé…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨è§£ï¼Œæ–°ç‰ˆæœ¬çš„Springä¹Ÿå¯ä»¥é›¶é…ç½®å®ç°IOCã€‚</p><p>Springå®¹å™¨åœ¨åˆå§‹åŒ–æ—¶<strong>å…ˆè¯»å–é…ç½®æ–‡ä»¶</strong>ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶æˆ–å…ƒæ•°æ®<strong>åˆ›å»ºä¸ç»„ç»‡å¯¹è±¡å­˜å…¥å®¹å™¨</strong>ä¸­ï¼Œç¨‹åºä½¿ç”¨æ—¶<strong>å†ä»IOCå®¹å™¨ä¸­å–å‡ºéœ€è¦çš„å¯¹è±¡</strong>ã€‚</p><p>é‡‡ç”¨XMLæ–¹å¼é…ç½®Beançš„æ—¶å€™ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯æ˜¯å’Œå®ç°åˆ†ç¦»çš„ï¼Œè€Œé‡‡ç”¨æ³¨è§£çš„æ–¹å¼å¯ä»¥æŠŠä¸¤è€…åˆä¸ºä¸€ä½“ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯ç›´æ¥ä»¥æ³¨è§£çš„å½¢å¼å®šä¹‰åœ¨å®ç°ç±»ä¸­ï¼Œä»è€Œè¾¾åˆ°äº†é›¶é…ç½®çš„ç›®çš„ã€‚</p><p>æ§åˆ¶åè½¬æ˜¯ä¸€ç§é€šè¿‡æè¿°ï¼ˆXMLæˆ–æ³¨è§£ï¼‰å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹å»ç”Ÿäº§æˆ–è·å–ç‰¹å®šå¯¹è±¡çš„æ–¹å¼ã€‚åœ¨Springä¸­å®ç°æ§åˆ¶åè½¬çš„æ˜¯IOCå®¹å™¨ï¼Œå…¶å®ç°æ–¹æ³•æ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDependency Injection,DIï¼‰ã€‚</p><h2 id="ğŸ¥¥å°é²œâ€”â€”Hello-Spring"><a href="#ğŸ¥¥å°é²œâ€”â€”Hello-Spring" class="headerlink" title="ğŸ¥¥å°é²œâ€”â€”Hello Spring"></a>ğŸ¥¥å°é²œâ€”â€”Hello Spring</h2><ol><li><p>æ·»åŠ ä¾èµ–â€”â€”spring-webmvc</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.3.7.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>ç¼–å†™å®ä½“ç±»â€”â€”User</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.twg.pojo;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Author</span> Tang Wuguo</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Description</span> //TODO $</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span> $ 2021-7-29$</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    String name;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ä½¿ç”¨æ— å‚æ„é€ åˆ›å»ºUserå¯¹è±¡&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ä½¿ç”¨æœ‰å‚æ„é€ &quot;</span>);<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li><p>ç¼–å†™é…ç½®æ–‡ä»¶â€”â€”beans.xml</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.pojo.User&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;twg&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.twg.pojo;<br><br><span class="hljs-keyword">import</span> org.springframework.context.ApplicationContext;<br><span class="hljs-keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Author</span> Tang Wuguo</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Description</span> //TODO $</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span> $ 2021-7-29$</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestUser</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;beans.xml&quot;</span>);<br>         User user = (User) context.getBean(<span class="hljs-string">&quot;user&quot;</span>);<br>        System.out.println(user);<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure></li></ol><img src="C:\Users\admin\AppData\Roaming\Typora\typora-user-images\image-20210729211200259.png" alt="image-20210729211200259" style="zoom:67%;" /><p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡Springåˆ›å»ºuserå¯¹è±¡æ˜¯ï¼Œé€šè¿‡æ— å‚æ„é€ æ¥åˆ›å»ºçš„ï¼ˆè¿™æ˜¯Springä¸­IOCåˆ›å»ºå¯¹è±¡çš„é»˜è®¤æ–¹å¼ï¼‰ï¼Œè€Œåœ¨é…ç½®æ–‡ä»¶ä¸­ç»™nameå±æ€§èµ‹å€¼æ˜¯é€šè¿‡setteræ–¹æ³•å®ç°çš„ã€‚</p><h3 id="IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼"><a href="#IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼" class="headerlink" title="IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼"></a>IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼</h3><ol><li><p>ä½¿ç”¨æ— å‚æ„é€ â€”â€”é»˜è®¤</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.pojo.User&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;twg&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>ä½¿ç”¨æœ‰å‚æ„é€ </p><ol><li><p>ä¸‹æ ‡èµ‹å€¼</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.pojo.User&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;twg1&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>é€šè¿‡æŒ‡å®šç±»å‹â€”â€”ä¸æ¨è</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.pojo.User&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;java.lang.String&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;twg2&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>é€šè¿‡å‚æ•°åâ€”â€”æ¨è</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.pojo.User&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;twg3&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li></ol></li></ol><h2 id="ğŸ‹Springçš„é…ç½®"><a href="#ğŸ‹Springçš„é…ç½®" class="headerlink" title="ğŸ‹Springçš„é…ç½®"></a>ğŸ‹Springçš„é…ç½®</h2><ol><li><p>åˆ«åâ€”â€”alias</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">alias</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;user2&quot;</span>/&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>beans</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.pojo.User&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user3&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;twg3&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></div></td></tr></table></figure><p>idï¼šbeançš„å”¯ä¸€è¡¨ç¤ºç¬¦</p><p>classï¼šbeanå¯¹è±¡å¯¹åº”çš„å…¨é™å®šå</p><p>nameï¼šä¹Ÿæ˜¯åˆ«åï¼Œä½†æ˜¯å¯ä»¥å–å¤šä¸ªï¼Œå¯ä»¥ç”¨é€—å·ã€ç©ºæ ¼ä»¥åŠåˆ†å·æ¥åˆ†å‰²å¤šä¸ªåˆ«å</p></li><li><p>import</p><p>ä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ï¼Œå¯ä»¥å°†å¤šä¸ªé…ç½®æ–‡ä»¶å¯¼å…¥ä¸ºä¸€ä¸ª</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;beans1.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;beans2.xml&quot;</span>/&gt;</span><br></code></pre></div></td></tr></table></figure></li></ol><h2 id="ğŸ’DIâ€”â€”ä¾èµ–æ³¨å…¥"><a href="#ğŸ’DIâ€”â€”ä¾èµ–æ³¨å…¥" class="headerlink" title="ğŸ’DIâ€”â€”ä¾èµ–æ³¨å…¥"></a>ğŸ’DIâ€”â€”ä¾èµ–æ³¨å…¥</h2><ol><li><p>æ„é€ æ³¨å…¥</p></li><li><p>setteræ³¨å…¥</p><ul><li>ä¾èµ–ï¼šbeanå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨</li><li>æ³¨å…¥ï¼šbeanå¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œç”±å®¹å™¨æ¥æ³¨å…¥</li></ul></li><li><p>æ‰©å±•æ–¹å¼æ³¨å…¥</p><ul><li><p>på‘½åç©ºé—´â€”â€”ç›¸å½“ä¸setæ³¨å…¥</p><p>ç°åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼ŒåŠ å…¥å¯¹på‘½åç©ºé—´çš„æ”¯æŒï¼š</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;<br></code></pre></div></td></tr></table></figure><p>å°±å¯ä»¥åœ¨beanæ ‡ç­¾ä¸­ä½¿ç”¨p:nameæ¥ç»™nameèµ‹å€¼äº†ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.pojo.User&quot;</span> <span class="hljs-attr">p:name</span>=<span class="hljs-string">&quot;twg&quot;</span>/&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>cå‘½åç©ºé—´â€”â€”ç›¸å½“äºæ„é€ æ³¨å…¥</p><p>ä¸ä¸Šé¢çš„ç”¨æ³•ç±»ä¼¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml">xmlns:c=&quot;http://www.springframework.org/schema/c&quot;<br></code></pre></div></td></tr></table></figure></li></ul></li></ol><div class="hljs code-wrapper"><pre><code> <figure class="highlight xml"><table><tr><td class="gutter hljs"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user3&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.pojo.User&quot;</span> <span class="hljs-attr">c:name</span>=<span class="hljs-string">&quot;twg_by_user3&quot;</span>/&gt;</span><br></code></pre></div></td></tr></table></figure></code></pre><h2 id="ğŸŒ½Beanä½œç”¨åŸŸ"><a href="#ğŸŒ½Beanä½œç”¨åŸŸ" class="headerlink" title="ğŸŒ½Beanä½œç”¨åŸŸ"></a>ğŸŒ½Beanä½œç”¨åŸŸ</h2><p><img src="H:\blog\Javaç¬”è®°â€”â€”Spring.assets\image-20210731142006189.png" alt="image-20210731142006189"></p><ol><li><p>singleton</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Spring.assets\image-20210731142045563.png" alt="image-20210731142045563"></p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;accountService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.something.DefaultAccountService&quot;</span>/&gt;</span><br><br><span class="hljs-comment">&lt;!-- the following is equivalent, though redundant (singleton scope is the default) --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;accountService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.something.DefaultAccountService&quot;</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;singleton&quot;</span>/&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>prototype</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Spring.assets\image-20210731142127504.png" alt="image-20210731142127504"></p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;accountService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.something.DefaultAccountService&quot;</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;prototype&quot;</span>/&gt;</span><br></code></pre></div></td></tr></table></figure></li></ol><h2 id="ğŸ§‡è‡ªåŠ¨è£…é…Autowired"><a href="#ğŸ§‡è‡ªåŠ¨è£…é…Autowired" class="headerlink" title="ğŸ§‡è‡ªåŠ¨è£…é…Autowired"></a>ğŸ§‡è‡ªåŠ¨è£…é…Autowired</h2><p>Springä¸­çš„ä¸‰ç§è£…é…æ–¹å¼ï¼š</p><ol><li>åœ¨xmlä¸­æ˜¾ç¤ºè£…é…</li><li>åœ¨Javaä¸­æ˜¾ç¤ºé…ç½®</li><li>éšå¼â€”â€”è‡ªåŠ¨è£…é…bean</li></ol><p>ä½¿ç”¨æ³¨è§£</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">        http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></div></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> Dog dog;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> Cat cat;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Dog <span class="hljs-title">getDog</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> dog;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Cat <span class="hljs-title">getCat</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> cat;<br>    &#125;<br>    <br>&#125;<br><br></code></pre></div></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;cat&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.pojo.Cat&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dog&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.pojo.Dog&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;person&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.pojo.Person&quot;</span>/&gt;</span><br></code></pre></div></td></tr></table></figure><p>@Autowireï¼šä½¿ç”¨åœ¨å±æ€§åä¸Šï¼Œä¾¿ä¼šè‡ªåŠ¨æŸ¥æ‰¾IOCå®¹å™¨ä¸­å¯¹åº”çš„ï¼ˆbyNameï¼‰å¯¹è±¡ï¼Œå¹¶è£…é…ã€‚</p><p>@Qualifierï¼šå½“æˆ‘ä»¬ä½¿ç”¨çš„autowireæ³¨è§£ï¼ŒåŒæ—¶åœ¨IOCå®¹å™¨ä¸­æ‰¾ä¸åˆ°è¦è£…é…çš„beanæ—¶ï¼ˆå¯èƒ½æ˜¯å› ä¸ºæœ‰å¤šä¸ªbeanï¼Œè€Œä¸”ä»–ä»¬çš„nameå¹¶ä¸ä¸Personç±»ä¸­å±æ€§åä¸€æ ·ï¼‰ï¼Œè¿™æ˜¯å°±éœ€è¦ä½¿ç”¨@Qualifier(value=â€dog02â€)æ¥æ‰‹åŠ¨æŒ‡å®šï¼Œéœ€è¦è£…é…çš„beanã€‚</p><p>@Nullableï¼šä½¿ç”¨åœ¨æŸä¸ªå­—æ®µå‰é¢ï¼Œè¯´æ˜è¯¥å­—æ®µå¯ä»¥ä¸ºnullã€‚ç­‰ä»·äº @Autowire(required = false)</p><p>@Resourceï¼šä¸@Autowireçš„åŠŸèƒ½ç±»ä¼¼ï¼Œä¸è¿‡å…¶æœºåˆ¶ç›¸åã€‚@Resourceï¼Œé¦–å…ˆé€šè¿‡byTypeâ€”â€”ç±»å‹çœ‹æœ‰æ²¡æœ‰ç¬¦åˆçš„beanï¼Œå¦‚æœæœ‰å¤šä¸ªåˆ™çœ‹beançš„nameã€‚å¦‚æœä¸¤ä¸ªéƒ½ä¸ç¬¦åˆå°±ä¼šæŠ¥é”™äº†ï¼Œè¿™æ—¶å€™å°±éœ€è¦æ‰‹åŠ¨çš„å»æŒ‡å®šè¦è£…é…çš„beanï¼ˆä¾‹å¦‚ï¼š@Resource(name=â€dog02â€ï¼‰</p><h2 id="ğŸ§€ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#ğŸ§€ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="ğŸ§€ä½¿ç”¨æ³¨è§£å¼€å‘"></a>ğŸ§€ä½¿ç”¨æ³¨è§£å¼€å‘</h2><p>ä½¿ç”¨ä¹‹å‰ï¼š</p><ul><li><p>å¯¼å…¥AOPä¾èµ–</p><img src="H:\blog\Javaç¬”è®°â€”â€”Spring.assets\image-20210731164619997.png" alt="image-20210731164619997" style="zoom:80%;" /></li><li><p>å¯¼å…¥contexçº¦æŸï¼Œå¢åŠ æ³¨è§£æ”¯æŒ</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">        http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br>    <br>&lt;--!æŒ‡å®šè¦æ‰«æçš„åŒ…ï¼Œè¿™ä¸ªåŒ…ä¸‹çš„æ³¨è§£å°±ä¼šç”Ÿæ•ˆ--&gt;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.twg.pojo&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li></ul><p>@Componentï¼šç»„ä»¶ ï¼Œä¿®é¥°ä¸€ä¸ªclassï¼Œç­‰ä»·äº<bean id="user" class="com.twg.pojo"/></p><ul><li>dao ã€@Repositoryã€‘</li><li>service ã€@Serviceã€‘</li><li>controller ã€@Controllerã€‘</li><li>bean ã€@ComPonentã€‘</li><li>åŠŸèƒ½ä¸€æ ·ï¼Œå°†ç±»æ·»åŠ åˆ°Springå®¹å™¨ä¸­</li></ul><p>@Valueï¼š(â€œå‚æ•°â€) è‡ªåŠ¨èµ‹å€¼</p><p>@Scopeï¼š(â€œå‚æ•°â€) è®¾ç½®æ¨¡å¼ ä½œç”¨åŸŸ</p><p>@Importï¼š(â€œç±»â€) å°†å¦å¤–ä¸€ä¸ªç±»åˆå¹¶</p><p>æ³¨è§£æ›´åŠ éº»çƒ¦ xmlå®¹æ˜“ç»´æŠ¤</p><p>æœ€å¥½çš„æ–¹å¼ï¼šxml-&gt;bean æ³¨è§£-&gt;å±æ€§çš„æ³¨å…¥</p><h2 id="ğŸ¥ä½¿ç”¨JavaConfigå¼€å‘"><a href="#ğŸ¥ä½¿ç”¨JavaConfigå¼€å‘" class="headerlink" title="ğŸ¥ä½¿ç”¨JavaConfigå¼€å‘"></a>ğŸ¥ä½¿ç”¨JavaConfigå¼€å‘</h2><p>é™¤äº†ä½¿ç”¨xmlé…ç½®æ–‡ä»¶å¼ï¼Œè¿˜å¯ä»¥é€šè¿‡JavaConfigä»£æ›¿é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨çº¯Javaçš„æ¥é…ç½®ã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs ebnf"><span class="hljs-attribute">AnnotationConfigApplicationContext</span><br></code></pre></div></td></tr></table></figure><p>çº¯Javaçš„é…ç½®æ–¹å¼ SpringBootå‰æ34</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">ApplicationContext text = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(LLPConfig.class);User getUser = (User) text.getBean(<span class="hljs-string">&quot;getUser&quot;</span>);System.out.println(getUser.getName());<br></code></pre></div></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Configurable</span><span class="hljs-comment">//é…ç½®ç±»</span><br><span class="hljs-meta">@ComponentScan(&quot;com.LLP&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LLPConfig</span> </span>&#123;    <span class="hljs-meta">@Bean</span><span class="hljs-comment">//æ³¨å†Œä¸€ä¸ªbeanæ ‡ç­¾ æ–¹æ³•çš„åå­—å°±æ˜¯id    public User getUser()&#123;        return new User();    &#125;&#125;</span><br></code></pre></div></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml">@Component//ç»„ä»¶<br>public class User &#123;<br>    @Value(&quot;å°æ–°&quot;)<br>    private String name;<br>    //å®ä½“ç±»<br></code></pre></div></td></tr></table></figure><h2 id="ğŸ¦ä»£ç†æ¨¡å¼â€”â€”Spring-AOPçš„åº•å±‚"><a href="#ğŸ¦ä»£ç†æ¨¡å¼â€”â€”Spring-AOPçš„åº•å±‚" class="headerlink" title="ğŸ¦ä»£ç†æ¨¡å¼â€”â€”Spring AOPçš„åº•å±‚"></a>ğŸ¦ä»£ç†æ¨¡å¼â€”â€”Spring AOPçš„åº•å±‚</h2><p><strong>è§’è‰²ï¼š</strong></p><ul><li>æŠ½è±¡ä¸»é¢˜è§’è‰²</li><li>å…·ä½“ä¸»é¢˜è§’è‰²</li><li>ä»£ç†è§’è‰²</li></ul><p><strong>åˆ†ç±»ï¼š</strong></p><ul><li><p>é™æ€ä»£ç†</p></li><li><p>åŠ¨æ€ä»£ç†ï¼šä»é™æ€ä»£ç†ä¼šå‘ç°â€”â€”æ¯ä¸ªä»£ç†ç±»<strong>åªèƒ½ä¸ºä¸€ä¸ªæ¥å£</strong>æœåŠ¡ï¼Œè¿™æ ·ç¨‹åºå¼€å‘ä¸­å¿…ç„¶ä¼šäº§ç”Ÿè®¸å¤šçš„ä»£ç†ç±»ã€‚æ‰€ä»¥æˆ‘ä»¬æƒ³åŠæ³•é€šè¿‡ä¸€ä¸ªä»£ç†ç±»å®Œæˆå…¨éƒ¨çš„ä»£ç†åŠŸèƒ½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ç”¨åŠ¨æ€ä»£ç†ã€‚åŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œ<strong>é€šè¿‡åå°„æœºåˆ¶å®ç°åŠ¨æ€ä»£ç†ï¼Œå¹¶ä¸”èƒ½å¤Ÿä»£ç†å„ç§ç±»å‹çš„å¯¹è±¡ã€‚</strong></p><p>è¦å®ç°åŠ¨æ€ä»£ç†ï¼Œéœ€è¦<code>java.lang.reflect.InvocationHandler</code>æ¥å£å’Œ <code>java.lang.reflect.Proxy</code>ç±»çš„æ”¯æŒã€‚</p><ol><li><p>ç¼–å†™æŠ½è±¡ä¸»é¢˜æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">AbstractHost</span> </span>&#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æˆ¿ä¸œä¹°æˆ¿</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sell</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br></code></pre></div></td></tr></table></figure></li><li><p>ç¼–å†™å…·ä½“ä¸»é¢˜ç±»</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Host</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AbstractHost</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sell</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æˆ¿ä¸œå–å‡ºæˆ¿å­&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure></li><li><p>ç¼–å†™åŠ¨æ€ä»£ç†ç±»â€”â€”å®ç°äº†InvocationHandler</p><p>ç¼–å†™ä¸€ä¸ªå¯ä»¥è·å–ä»£ç†å®ä¾‹çš„æ–¹æ³•ï¼Œå¹¶é‡å†™invokeæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProxyHouse</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InvocationHandler</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> Object target;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">newProxyInstance</span><span class="hljs-params">(Object target)</span></span>&#123;<br>        <span class="hljs-keyword">this</span>.target = target;<br>        Object res = Proxy.newProxyInstance(target.getClass().getClassLoader(),<br>                target.getClass().getInterfaces(), <span class="hljs-keyword">this</span>);<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>        Object ret;<br>        <span class="hljs-keyword">try</span>&#123;<br>            ret = method.invoke(target,args);<br>        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>            log.error(<span class="hljs-string">&quot;è°ƒç”¨&#123;&#125;.&#123;&#125;å‘ç”Ÿå¼‚å¸¸&quot;</span>, target.getClass().getName(), method.getName(), e);<br>            <span class="hljs-keyword">throw</span> e;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ret;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ProxyHouse proxyHouse = <span class="hljs-keyword">new</span> ProxyHouse();<br>        AbstractHost host = (AbstractHost)proxyHouse.newProxyInstance(<span class="hljs-keyword">new</span> Host());<br>        host.sell();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure></li></ol></li></ul><p><strong>åŠ¨æ€ä»£ç†æ­¥éª¤ï¼š</strong></p><ul><li><p>æŠ½è±¡ä¸»é¢˜ç±»</p></li><li><p>å…·ä½“ä¸»é¢˜ç±»</p></li><li><p>åŠ¨æ€ä»£ç†ç±»</p><p>åªèƒ½ä»£ç†æ¥å£ï¼Œä¸æ”¯æŒæŠ½è±¡ç±»ï¼Œä»£ç†ç±»éœ€è¦å®ç°InvocationHandlerï¼Œå®ç°invokeæ–¹æ³•ã€‚invokeæ–¹æ³•å°±æ˜¯è°ƒç”¨è¢«ä»£ç†æ¥å£çš„æ‰€æœ‰æ–¹æ³•æ—¶éœ€è¦è°ƒç”¨çš„ï¼Œè¿”å›çš„å€¼æ˜¯è¢«ä»£ç†æ¥å£çš„ä¸€ä¸ªå®ç°ç±»ã€‚</p></li></ul><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>èŒè´£æ¸…æ™°ï¼šå…·ä½“è§’è‰²æ˜¯å®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç”¨å…³å¿ƒå…¶ä»–éæœ¬èŒè´£çš„äº‹åŠ¡ï¼Œé€šè¿‡åæœŸçš„ä»£ç†å®Œæˆä¸€ä»¶äº‹åŠ¡ï¼Œä»£ç æ¸…æ™°ã€‚</li><li>é«˜æ‰©å±•æ€§ï¼šå¯ä»¥æ‰©å±•å¤šä¸ªå®ç°äº†æŠ½è±¡è§’è‰²çš„ç±»ï¼Œè¿™æ ·ï¼Œå“ªæ€•ä»£ç†ç±»ä¸åšä¿®æ”¹ä»ç„¶å¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚è¿˜å¯ä»¥é€šè¿‡ç»™ä»£ç†ç±»å¢åŠ é¢å¤–çš„åŠŸèƒ½æ¥æ‰©å±•å§”æ‰˜ç±»çš„åŠŸèƒ½ï¼Œè¿™æ ·åšæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ä»£ç†ç±»è€Œä¸éœ€è¦å†ä¿®æ”¹å§”æ‰˜ç±»ï¼ŒåŒæ ·ç¬¦åˆå¼€é—­åŸåˆ™ã€‚</li><li>æ™ºèƒ½æ€§ï¼šåŠ¨æ€ä»£ç†çš„æ™ºèƒ½åŒ–</li></ul><img src="H:\blog\Javaç¬”è®°â€”â€”Spring.assets\image-20210731212052039.png" alt="image-20210731212052039" style="zoom: 80%;" /><h2 id="ğŸ†AOP"><a href="#ğŸ†AOP" class="headerlink" title="ğŸ†AOP"></a>ğŸ†AOP</h2><p>Springä¸­å®ç°AOP</p><p>é¦–å…ˆåŠ å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.aspectj<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aspectjweaver<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.9.8.M1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h3 id="ä¸‰ç§å®ç°æ–¹å¼"><a href="#ä¸‰ç§å®ç°æ–¹å¼" class="headerlink" title="ä¸‰ç§å®ç°æ–¹å¼"></a>ä¸‰ç§å®ç°æ–¹å¼</h3><ol><li><p><strong>ä½¿ç”¨springæ¥å£å®ç°</strong></p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.service.UserServiceImpl&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;log&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.log.Log&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;afterLog&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.log.AfterLog&quot;</span>/&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pointCut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(* com.twg.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">&quot;log&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointCut&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">&quot;afterLog&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointCut&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br></code></pre></div></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>        <span class="hljs-comment">//        åŠ¨æ€ä»£ç†çš„æ˜¯æ¥å£ï¼</span><br>        UserService bean = (UserService)context.getBean(<span class="hljs-string">&quot;userService&quot;</span>);<br><br>        bean.add();<br><br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure></li><li><p><strong>è‡ªå®šä¹‰åˆ‡é¢å®ç°</strong></p><p>æ­¥éª¤ï¼š</p><ol><li><p>ç¼–å†™è‡ªå®šä¹‰åˆ‡é¢ç±»</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAspect</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•æ‰§è¡Œå‰çš„æ“ä½œã€‚ã€‚ã€‚byè‡ªå®šä¹‰åˆ‡é¢&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">after</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æ–¹æ³•æ‰§è¡Œåçš„æ“ä½œã€‚ã€‚ã€‚byè‡ªå®šä¹‰åˆ‡é¢&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myAspect&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.aspect.MyAspect&quot;</span>/&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;myAspect&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;point&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(* com.twg.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;before&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;point&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:after</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;after&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;point&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>        <span class="hljs-comment">//        åŠ¨æ€ä»£ç†çš„æ˜¯æ¥å£ï¼</span><br>        UserService bean = (UserService)context.getBean(<span class="hljs-string">&quot;userService&quot;</span>);<br>        bean.add();<br><br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure><img src="H:\blog\Javaç¬”è®°â€”â€”Spring.assets\image-20210802091936937.png" alt="image-20210802091936937" style="zoom:67%;" /></li></ol></li><li><p><strong>æ³¨è§£å®ç°</strong>â€”â€”ç›¸å½“äºå¯¹æ–¹æ³•2çš„ç®€åŒ–</p><ol><li><p>ç¼–å†™åˆ‡ç‰‡ç±»</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Aspect</span> <span class="hljs-comment">//æ ‡æ³¨è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªåˆ‡é¢</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AspectByAnno</span> </span>&#123;<br><br>    <span class="hljs-meta">@Before(&quot;execution(* com.twg.service.UserServiceImpl.*(..))&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;======æ–¹æ³•æ‰§è¡Œå‰======by annotation&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@After(&quot;execution(* com.twg.service.UserServiceImpl.*(..))&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">after</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;======æ–¹æ³•æ‰§è¡Œå======by annotation&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//åœ¨ç¯ç»•å¢å¼ºä¸­ï¼Œå¯ä»¥ç»™å®šä¸€ä¸ªå‚æ•°ï¼Œä»£è¡¨æˆ‘ä»¬è¦å¤„ç†åˆ‡å…¥çš„ç‚¹</span><br>    <span class="hljs-meta">@Around(&quot;execution(* com.twg.service.UserServiceImpl.*(..))&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">around</span><span class="hljs-params">(ProceedingJoinPoint jp)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ç¯ç»•å‰&quot;</span>);<br>        <span class="hljs-comment">// æ‰§è¡Œæ–¹æ³•</span><br>        Object proceed = jp.proceed();<br>        System.out.println(<span class="hljs-string">&quot;ç¯ç»•å&quot;</span>);<br><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li><p>æµ‹è¯•</p></li></ol><img src="H:\blog\Javaç¬”è®°â€”â€”Spring.assets\image-20210802094214172.png" alt="image-20210802094214172" style="zoom:67%;" /></li></ol><h2 id="ğŸ€Mybatis"><a href="#ğŸ€Mybatis" class="headerlink" title="ğŸ€Mybatis"></a>ğŸ€Mybatis</h2><ol><li><p><strong>å¯¼å…¥jaråŒ…</strong></p><p>junit, mybatis, mysql, spring, aop, mybatis-spring</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>   <br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.20<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>   <br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>   <br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>   <br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>   <br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.aspectj<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aspectjweaver<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.9.8.M1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>   <br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>   <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p><strong>é…ç½®mybatis</strong></p><ol><li><p>å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Vip</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> wallet;<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶â€”â€”mybatis-config.xml</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.twg.pojo&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?useSSL=true<span class="hljs-symbol">&amp;amp;</span>useUnicode=true<span class="hljs-symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="hljs-symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.mapper.VipMapper&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>ç¼–å†™æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">VipMapper</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Vip&gt; <span class="hljs-title">selectAll</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li><p>mapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.twg.mapper.VipMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectAll&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;vip&quot;</span>&gt;</span><br>        select * from test.vip<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>æµ‹è¯•</p></li></ol><img src="H:\blog\Javaç¬”è®°â€”â€”Spring.assets\image-20210802103559615.png" alt="image-20210802103559615" style="zoom:67%;" /></li></ol><h2 id="ğŸ¥¨æ•´åˆMybatis"><a href="#ğŸ¥¨æ•´åˆMybatis" class="headerlink" title="ğŸ¥¨æ•´åˆMybatis"></a>ğŸ¥¨æ•´åˆMybatis</h2><ol><li><p>é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">        http://www.springframework.org/schema/aop</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?useSSL=true<span class="hljs-symbol">&amp;amp;</span>useUnicode=true<span class="hljs-symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="hljs-symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;configLocation&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;mybatis-config.xml&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapperLocations&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath:com/twg/mapper/*.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSession&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;vipMapper&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.mapper.VipMapperImpl&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sqlSessionTemplate&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sqlSession&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>mapperImpl</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VipMapperImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">VipMapper</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> SqlSessionTemplate sqlSessionTemplate;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSqlSessionTemplate</span><span class="hljs-params">(SqlSessionTemplate sqlSessionTemplate)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.sqlSessionTemplate = sqlSessionTemplate;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Vip&gt; <span class="hljs-title">selectAll</span><span class="hljs-params">()</span> </span>&#123;<br>        VipMapper mapper = sqlSessionTemplate.getMapper(VipMapper.class);<br>        <span class="hljs-keyword">return</span> mapper.selectAll();<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testMybatisSpring</span><span class="hljs-params">()</span></span>&#123;<br>    ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;spring-dao.xml&quot;</span>);<br>    VipMapper vipMapper = context.getBean(<span class="hljs-string">&quot;vipMapper&quot;</span>, VipMapper.class);<br>    List&lt;Vip&gt; vips = vipMapper.selectAll();<br>    <span class="hljs-keyword">for</span> (Vip vip : vips) &#123;<br>        System.out.println(vip);<br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="H:\blog\Javaç¬”è®°â€”â€”Spring.assets\image-20210802115620873.png" alt="image-20210802115620873"></p></li></ol><p>æ–¹å¼äºŒï¼š</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VipMapperImpl2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SqlSessionDaoSupport</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">VipMapper</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Vip&gt; <span class="hljs-title">selectAll</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> getSqlSession().getMapper(VipMapper.class).selectAll();<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;vipMapper1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.mapper.VipMapperImpl2&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></div></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testMybatisSpring</span><span class="hljs-params">()</span></span>&#123;<br>    ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">&quot;spring-dao.xml&quot;</span>);<br>    VipMapper vipMapper = context.getBean(<span class="hljs-string">&quot;vipMapper&quot;</span>, VipMapper.class);<br>    List&lt;Vip&gt; vips = vipMapper.selectAll();<br>    <span class="hljs-keyword">for</span> (Vip vip : vips) &#123;<br>        System.out.println(vip);<br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸éœ€è¦SqlSessionTemplateæˆå‘˜å˜é‡æ¥getMapperã€‚=ï¼Œç”±äºè¿™é‡Œç»§æ‰¿äº†ä¸€ä¸ªSqlSessionDaoSupportï¼Œé€šè¿‡å…¶ä¸­çš„getSqlSession()ä¾¿å¯ä»¥å¾—åˆ°ä¸€ä¸ªSqlSessionã€‚</p><h2 id="å£°æ˜å¼äº‹åŠ¡"><a href="#å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="å£°æ˜å¼äº‹åŠ¡"></a>å£°æ˜å¼äº‹åŠ¡</h2><h3 id="äº‹ç‰©ï¼Ÿ"><a href="#äº‹ç‰©ï¼Ÿ" class="headerlink" title="äº‹ç‰©ï¼Ÿ"></a>äº‹ç‰©ï¼Ÿ</h3><p>æŠŠä¸€ç»„ä¸šåŠ¡å½“æˆä¸€ä¸ªä¸šåŠ¡æ¥åšï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ï¼›æ¶‰åŠæ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ã€‚</p><h3 id="äº‹ç‰©ACIDåŸåˆ™"><a href="#äº‹ç‰©ACIDåŸåˆ™" class="headerlink" title="äº‹ç‰©ACIDåŸåˆ™"></a>äº‹ç‰©ACIDåŸåˆ™</h3><p>åŸå­æ€§ï¼›ä¸€è‡´æ€§ï¼›éš”ç¦»æ€§ï¼›æŒä¹…æ€§</p><h3 id="Springä¸­çš„äº‹ç‰©"><a href="#Springä¸­çš„äº‹ç‰©" class="headerlink" title="Springä¸­çš„äº‹ç‰©"></a>Springä¸­çš„äº‹ç‰©</h3><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--é…ç½®å£°æ˜å‹äº‹åŠ¡--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;transactionManager&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span>        <br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>    <span class="hljs-comment">&lt;!--ç»“åˆAOPå®ç°äº‹åŠ¡çš„ç»‡å…¥--&gt;</span>    <span class="hljs-comment">&lt;!--é…ç½®äº‹åŠ¡çš„é€šçŸ¥--&gt;</span>    <br><span class="hljs-tag">&lt;<span class="hljs-name">tx:advice</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;advice&quot;</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">&quot;transactionManager&quot;</span>&gt;</span>        <br><span class="hljs-tag">&lt;<span class="hljs-name">tx:attributes</span>&gt;</span>            <br><span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;add&quot;</span>/&gt;</span><span class="hljs-comment">&lt;!--ç»™å“ªäº›æ–¹æ³•é…ç½®äº‹åŠ¡--&gt;</span>            <br><span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;update&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span>            <br><span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;query&quot;</span> <span class="hljs-attr">read-only</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span>           <br><span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;del&quot;</span>  <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span>            <br><span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;*&quot;</span>  <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span>        <br><span class="hljs-tag">&lt;/<span class="hljs-name">tx:attributes</span>&gt;</span>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">tx:advice</span>&gt;</span>    <span class="hljs-comment">&lt;!--é…ç½®äº‹åŠ¡åˆ‡å…¥--&gt;</span>    <br><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span>        <br><span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pointCut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(* com.LLP.dao.*.*(..))&quot;</span>/&gt;</span>        <br><span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">&quot;advice&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointCut&quot;</span>/&gt;</span>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mybatis</title>
    <link href="/2021/08/08/Java%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Mybatis/"/>
    <url>/2021/08/08/Java%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Mybatis/</url>
    
    <content type="html"><![CDATA[<h1 id="Javaç¬”è®°â€”â€”Mybatis"><a href="#Javaç¬”è®°â€”â€”Mybatis" class="headerlink" title="Javaç¬”è®°â€”â€”Mybatis"></a>Javaç¬”è®°â€”â€”Mybatis</h1><h2 id="ğŸ›´æˆ‘çš„ç¬¬ä¸€ä¸ªMybatisç¨‹åº"><a href="#ğŸ›´æˆ‘çš„ç¬¬ä¸€ä¸ªMybatisç¨‹åº" class="headerlink" title="ğŸ›´æˆ‘çš„ç¬¬ä¸€ä¸ªMybatisç¨‹åº"></a>ğŸ›´æˆ‘çš„ç¬¬ä¸€ä¸ªMybatisç¨‹åº</h2><h3 id="1ã€åˆ›å»ºæ•°æ®åº“"><a href="#1ã€åˆ›å»ºæ•°æ®åº“" class="headerlink" title="1ã€åˆ›å»ºæ•°æ®åº“"></a>1ã€åˆ›å»ºæ•°æ®åº“</h3><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210720211142864.png" alt="image-20210720211142864" style="zoom:67%;" /><p>è¿™æ˜¯ä¹‹å‰æˆ‘åšè®¾è®¡æ¨¡å¼è¯¾è®¾ä¸­å»ºçš„ä¸€å¼ è¡¨ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥æŸ¥è¯¢è¿™è¿™å¼ è¡¨ä¸­æ‰€æœ‰çš„è®°å½•ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œå°±åªæŸ¥ä¸‹å‰3ä¸ªå±æ€§å§ã€‚</p><h3 id="2ã€åˆ›å»ºmavené¡¹ç›®"><a href="#2ã€åˆ›å»ºmavené¡¹ç›®" class="headerlink" title="2ã€åˆ›å»ºmavené¡¹ç›®"></a>2ã€åˆ›å»ºmavené¡¹ç›®</h3><p>â€‹    åˆ é™¤srcç›®å½•ï¼›</p><p>â€‹    å¯¼å…¥ä¾èµ–ï¼šmysqlã€mybatisã€junit</p><h3 id="3ã€åˆ›å»ºå­æ¨¡å—module"><a href="#3ã€åˆ›å»ºå­æ¨¡å—module" class="headerlink" title="3ã€åˆ›å»ºå­æ¨¡å—module"></a>3ã€åˆ›å»ºå­æ¨¡å—module</h3><p>åŒæ ·é€‰æ‹©mavené¡¹ç›®ï¼Œè¿™æ ·åé¢çš„å†æ¬¡åˆ›å»ºmavené¡¹ç›®æ—¶å¯ä»¥ç›´æ¥ä»çˆ¶é¡¹ç›®ç»§æ‰¿é…ç½®é¡¹ã€‚</p><h3 id="4ã€ç¼–å†™mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#4ã€ç¼–å†™mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="4ã€ç¼–å†™mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>4ã€ç¼–å†™mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</h3><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?useSSL=true<span class="hljs-symbol">&amp;amp;</span>useUnicode=true<span class="hljs-symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="hljs-symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/twg/dao/UserDao.xml&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h3 id="5ã€ç¼–å†™mybatiså·¥å…·ç±»"><a href="#5ã€ç¼–å†™mybatiså·¥å…·ç±»" class="headerlink" title="5ã€ç¼–å†™mybatiså·¥å…·ç±»"></a>5ã€ç¼–å†™mybatiså·¥å…·ç±»</h3><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MybatisUtils</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqlSessionFactory sqlSessionFactory;<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            String resource = <span class="hljs-string">&quot;org/mybatis/example/mybatis-config.xml&quot;</span>;<br>            InputStream inputStream = Resources.getResourceAsStream(resource);<br>            SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title">getSqlSession</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> sqlSessionFactory.openSession();<br>    &#125;<br>    <br>&#125;<br></code></pre></div></td></tr></table></figure><h3 id="6ã€ç¼–å†™ä»£ç "><a href="#6ã€ç¼–å†™ä»£ç " class="headerlink" title="6ã€ç¼–å†™ä»£ç "></a>6ã€ç¼–å†™ä»£ç </h3><ul><li><p>å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id, String username, String password)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.id = id;<br>        <span class="hljs-keyword">this</span>.username = username;<br>        <span class="hljs-keyword">this</span>.password = password;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure></li><li><p>DAO</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.twg.dao;<br><br><span class="hljs-keyword">import</span> com.twg.entity.User;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDao</span> </span>&#123;<br>    <span class="hljs-function">List&lt;User&gt; <span class="hljs-title">getUserList</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li><p>DAOæŒä¹…å±‚æ˜ å°„æ–‡ä»¶ï¼Œç”±åŸæ¥çš„UserDaoImplç±»è½¬å˜æˆä¸€ä¸ªMapperé…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.twg.dao.UserDao&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserList&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.twg.entity.User&quot;</span>&gt;</span><br>        select * from test.t_user<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></div></td></tr></table></figure><p>ç‰¹åˆ«æ³¨æ„ï¼š</p><p>namespaceï¼šæŒ‡å®šï¼ˆç»‘å®šï¼‰äº†DAOæ¥å£çš„ä½ç½®ï¼›</p><p>idï¼šä¸ºnamespaceæ‰€ç»‘å®šçš„æ¥å£ä¸­çš„æ–¹æ³•åï¼›</p><p>resultTypeï¼šæŒ‡å®šäº†idæ‰€ç»‘å®šçš„æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œå¦‚æœæ˜¯è¿”å›ä¸€ä¸ªé›†åˆï¼Œåˆ™è¿™é‡Œå†™é›†åˆä¸­å…ƒç´ çš„ç±»å‹ï¼›</p></li></ul><h3 id="7ã€æµ‹è¯•"><a href="#7ã€æµ‹è¯•" class="headerlink" title="7ã€æµ‹è¯•"></a>7ã€æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.twg.dao;<br><br><span class="hljs-keyword">import</span> com.twg.entity.User;<br><span class="hljs-keyword">import</span> com.twg.utils.MybatisUtils;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoTest</span> </span>&#123;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br>        SqlSession sqlSession = MybatisUtils.getSqlSession();<br><br>        <span class="hljs-comment">// æ–¹æ³•1ï¼šgetMapper</span><br>        UserDao userDao = sqlSession.getMapper(UserDao.class);<br>        List&lt;User&gt; userList = userDao.getUserList();<br>        <span class="hljs-comment">// æ–¹æ³•2ï¼š</span><br>        <span class="hljs-comment">//List&lt;User&gt; userList = sqlSession.selectList(&quot;com.twg.dao.UserDao.getUserList&quot;);</span><br><br>        <span class="hljs-keyword">for</span> (User user : userList) &#123;<br>            System.out.println(user);<br>        &#125;<br><br>        sqlSession.close();<br><br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure><h3 id="8ã€å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜"><a href="#8ã€å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜" class="headerlink" title="8ã€å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜"></a>8ã€å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜</h3><ul><li><p>æ˜ å°„æ–‡ä»¶æ²¡æœ‰åœ¨mybatisä¸»é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210720205949405.png" alt="image-20210720205949405"></p></li><li><p>æ„å»ºé¡¹ç›®åï¼Œæ‰¾ä¸åˆ°æ˜ å°„æ–‡ä»¶</p><ul><li>åœ¨porn.xmlä¸­é…ç½®resourcesï¼Œæ¥é˜²æ­¢èµ„æºå¯¼å‡ºå¼‚å¸¸ï¼›</li><li>ä¹Ÿå¯ä»¥ç›´æ¥å°†æ˜ å°„æ–‡ä»¶æ”¾åˆ°resourcesç›®å½•ä¸‹ï¼›</li></ul></li><li><p>æ˜ å°„æ–‡ä»¶ä¸­çš„å‚æ•°ä¸€å®šè¦å†™å¯¹</p><ul><li>namespaceï¼šè¡¨æ˜è¿™ä¸ªæ˜ å°„æ–‡ä»¶æ‰€ç»‘å®šçš„æ¥å£ç±»æ˜¯å“ªä¸ª</li><li>idï¼šç»‘å®šæ¥å£ä¸­çš„å“ªä¸ªæ–¹æ³•ï¼Œæ–¹æ³•åä¸€å®šè¦å’Œæ¥å£ä¸­å®šä¹‰çš„åå­—ä¸€æ ·</li><li>resultTypeï¼šè¡¨æ˜è¿”å›å€¼ç±»å‹</li></ul><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210720210326930.png" alt="image-20210720210326930"></p></li></ul><h2 id="ğŸ›«è§£é”å…¶å®ƒå§¿åŠ¿â€”â€”CRUD"><a href="#ğŸ›«è§£é”å…¶å®ƒå§¿åŠ¿â€”â€”CRUD" class="headerlink" title="ğŸ›«è§£é”å…¶å®ƒå§¿åŠ¿â€”â€”CRUD"></a>ğŸ›«è§£é”å…¶å®ƒå§¿åŠ¿â€”â€”CRUD</h2><ol><li><p>å›é¡¾ä¸‹é€šè¿‡mybatiså†™ä¸€ä¸ªæ¥å£çš„æµç¨‹</p><ol><li><p>åœ¨Mapperä¸­å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•</p></li><li><p>åœ¨æ˜ å°„æ–‡ä»¶(XXMapper.xml)ä¸­ç»‘å®šè¿™ä¸ªæ–¹æ³•</p></li><li><p>è¿›è¡Œæµ‹è¯•/ä½¿ç”¨ï¼Œæ³¨æ„å¦‚æœæ˜¯<strong>å¢åˆ æ”¹</strong>éœ€è¦æäº¤äº‹ç‰©ï¼ˆâ€sqlSession.commit();â€ï¼‰</p></li></ol></li><li><p>çœ‹çœ‹åœ¨æ˜ å°„æ–‡ä»¶ä¸­è¿˜å¯ä»¥å†™å“ªäº›æ ‡ç­¾</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210721221129218.png" alt="image-20210721221129218"></p></li><li><p>å¢</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å‘ç”¨æˆ·è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½•</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> user:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> æ–°å¢åŠ çš„è®°å½•çš„id</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">inserUser</span><span class="hljs-params">(User user)</span></span>;<br></code></pre></div></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;inserUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.twg.entity.User&quot;</span>&gt;</span><br>    insert into test.t_user (username, password)<br>    values (#&#123;username&#125;, #&#123;password&#125;)<br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>åˆ </p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é€šè¿‡æŒ‡å®šidåˆ é™¤ä¸€æ¡ç”¨æˆ·è¡¨è®°å½•</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">delUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br></code></pre></div></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;delUser&quot;</span>&gt;</span><br>    delete<br>    from t_user<br>    where id = #&#123;id&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>æ”¹</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ›´æ–°ä¸€æ¡ç”¨æˆ·è¡¨ä¿¡æ¯</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> user</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">updateUser</span><span class="hljs-params">(User user)</span></span>;<br></code></pre></div></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.twg.entity.User&quot;</span>&gt;</span><br>    update t_user<br>    set username    = #&#123;username&#125;,<br>        password=#&#123;password&#125;<br>    where id = #&#123;id&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>æŸ¥</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> id:ç”¨æˆ·çš„id</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> è¿”å›æŒ‡å®šç”¨æˆ·idçš„ä¿¡æ¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function">User <span class="hljs-title">getUserById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br></code></pre></div></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.twg.entity.User&quot;</span>&gt;</span><br>    select *<br>    from test.t_user<br>    where id = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li></ol><h2 id="ğŸä¸‡èƒ½çš„Map"><a href="#ğŸä¸‡èƒ½çš„Map" class="headerlink" title="ğŸä¸‡èƒ½çš„Map"></a>ğŸä¸‡èƒ½çš„Map</h2><p>å½“å®ä½“ç±»çš„å±æ€§è¿‡å¤šæ—¶ï¼ˆè¡¨çš„å­—æ®µå¤ªå¤šï¼‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨Mapã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é€šè¿‡mapçš„æ–¹å¼æŸ¥æ‰¾æŒ‡ç‚¹ç”¨æˆ·</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> map</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-function">User <span class="hljs-title">getUserById2</span><span class="hljs-params">(Map&lt;String, Object&gt; map)</span></span>;<br></code></pre></div></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById2&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.twg.entity.User&quot;</span>&gt;</span><br>    select *<br>    from test.t_user<br>    where id = #&#123;helloId&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></div></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testGetUserById2</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MybatisUtils.getSqlSession();<br><br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>    map.put(<span class="hljs-string">&quot;helloId&quot;</span>,<span class="hljs-number">1</span>);<br>    System.out.println(mapper.getUserById2(map));<br><br>    sqlSession.close();<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="ğŸ­æ¨¡ç³ŠæŸ¥è¯¢"><a href="#ğŸ­æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="ğŸ­æ¨¡ç³ŠæŸ¥è¯¢"></a>ğŸ­æ¨¡ç³ŠæŸ¥è¯¢</h2><p>ä¸ºäº†é˜²æ­¢SQLæ³¨å…¥ï¼Œæ³¨æ„åœ¨ä¼ å…¥å‚æ•°æ—¶å°†å‚æ•°å†™si.</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">//æ–¹æ³•1</span><br>List&lt;User&gt; userList = mapper.getUserList(<span class="hljs-string">&quot;%æ%&quot;</span>);<br></code></pre></div></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-operator">/</span><span class="hljs-operator">/</span>æ–¹æ³•<span class="hljs-number">2</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">where</span> name <span class="hljs-keyword">like</span> &quot;%&quot;#&#123;<span class="hljs-keyword">value</span>&#125;&quot;%&quot;<br></code></pre></div></td></tr></table></figure><h2 id="ğŸ€ç¯å¢ƒé…ç½®"><a href="#ğŸ€ç¯å¢ƒé…ç½®" class="headerlink" title="ğŸ€ç¯å¢ƒé…ç½®"></a>ğŸ€ç¯å¢ƒé…ç½®</h2><h3 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h3><p>Mybatiså¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ˜¯æ¯ä¸ªSqlSessionFactoryåªèƒ½é€‰æ‹©ä¸€ç§ã€‚</p><p>é»˜è®¤äº‹ç‰©ç®¡ç†å™¨â€”â€”JDBC</p><p>è¿æ¥æ± â€”â€”POOLED</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210725203805540.png" alt="image-20210725203805540"></p><h3 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><p>å¯ä»¥é€šè¿‡propertieså±æ€§æ¥åº”ç”¨é…ç½®æ–‡ä»¶ã€‚</p><p>è¿™äº›å±æ€§éƒ½æ˜¯å¯ä»¥æ›¿æ¢äº†ï¼Œä¾‹å¦‚.propertiesæ–‡ä»¶</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210725205432826.png" alt="image-20210725205432826"></p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210725205256245.png" alt="image-20210725205256245"></p><p>å¯ä»¥é€šè¿‡å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶æ¥ç¡®å®šå‚æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<propertiy>æ ‡ç­¾æ¥æŒ‡å®šã€‚å¤–éƒ¨æ–‡ä»¶çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210725205507441.png" alt="image-20210725205507441"></p><p>é…ç½®å¥½å‚æ•°ï¼Œå°±å¯ä»¥é€šè¿‡ <strong>${ }</strong> çš„æ–¹å¼ä½¿ç”¨äº†ã€‚</p><h3 id="ç±»å‹åˆ«å"><a href="#ç±»å‹åˆ«å" class="headerlink" title="ç±»å‹åˆ«å"></a>ç±»å‹åˆ«å</h3><p>ä¸ºä»€ä¹ˆè¦å–åˆ«åï¼Ÿâ€”â€”ä¸ºäº†ç®€æ´</p><p>ä¸‹é¢è¿™äº›è¿”å›å€¼ç±»å‹ã€å‚æ•°ç±»å‹å†™çš„å¤ªé•¿äº†ï¼Œä¹Ÿå®¹æ˜“å‡ºé”™ã€‚</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210725205938230.png" alt="image-20210725205938230"></p><p>2ç§è§£å†³åŠæ³•ï¼š</p><ul><li>ç»™å®ä½“ç±»å–åˆ«å</li><li>ç»™å®ä½“ç±»çš„åŒ…å–åˆ«åï¼Œè¿™é‡Œè‡ªåŠ¨è‡ªåŠ¨å°†åˆ«åå–æˆï¼Œè¿™ä¸ªåŒ…ä¸­ç±»åï¼Œå¹¶å°†é¦–å­—æ¯å°å†™ã€‚å¦‚æœéœ€è¦æ”¹æˆåˆ«çš„åå­—ï¼Œåœ¨å®ä½“ç±»ä¸ŠåŠ ä¸Šæ³¨è§£@Alias(â€œxxxâ€)</li></ul><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210725210404834.png" alt="image-20210725210404834"></p><h3 id="æ˜ å°„å™¨"><a href="#æ˜ å°„å™¨" class="headerlink" title="æ˜ å°„å™¨"></a>æ˜ å°„å™¨</h3><p>ç»‘å®šæ˜ å°„æ–‡ä»¶ã€‚</p><ul><li>é€šè¿‡æŒ‡å®šèµ„æºç›®å½•â€”â€”æ¨èâœ¨</li></ul><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/twg/dao/UserMapper.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></div></td></tr></table></figure><ul><li>ä¸‹é¢ä¸¤ç§æœ‰é™åˆ¶ï¼š<ul><li>æ¥å£å’Œå…¶é…ç½®æ–‡ä»¶éœ€è¦åœ¨åŒä¸€åŒ…ä¸‹</li><li>éœ€è¦åŒå</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.twg.dao.UserMapper&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></div></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.twg.dao.UserMapper&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h3 id="ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"><a href="#ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"></a>ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ</h3><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210725212908950.png" alt="image-20210725212908950"></p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210725213039250.png" alt="image-20210725213039250"></p><h2 id="ğŸ—è§£å†³å±æ€§åä¸å­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜"><a href="#ğŸ—è§£å†³å±æ€§åä¸å­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜" class="headerlink" title="ğŸ—è§£å†³å±æ€§åä¸å­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜"></a>ğŸ—è§£å†³å±æ€§åä¸å­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜</h2><p>é—®é¢˜ï¼šå½“å±æ€§åä¸å­—æ®µåä¸ä¸€è‡´æ—¶ï¼ŒæŸ¥è¯¢å‡ºæ¥çš„ç»“æœä¼šæ˜¾ç¤ºâ€œnullâ€</p><p>ä¾‹å¦‚ï¼Œåœ¨è¡¨ä¸­å¯†ç å­—æ®µæ˜¯pwdï¼Œä½†æ˜¯æˆ‘åœ¨å®ä½“ç±»ä¸­çš„å±æ€§å†™çš„æ˜¯password.</p><p>è§£å†³ï¼š</p><ul><li><p>èµ·åˆ«å</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.twg.entity.User&quot;</span>&gt;</span><br>    select id,name,pwd as password<br>    from test.t_user<br>    where id = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>resultMap</p><p>ç»“æœé›†æ˜ å°„</p>  <resultMap id="UserMap" type="User">      <result column="pwd" property="password"/>  </resultMap>  <select id="getUserById" resultMap="UserMap">      select id,name,pwd      from test.t_user      where id = #{id}  </select></li></ul><h2 id="ğŸ“ƒæ—¥å¿—"><a href="#ğŸ“ƒæ—¥å¿—" class="headerlink" title="ğŸ“ƒæ—¥å¿—"></a>ğŸ“ƒæ—¥å¿—</h2><p>å½“ä»£ç å‡ºç°å¼‚å¸¸ï¼Œéœ€è¦æ’é”™æ—¶ï¼Œæ—¥å¿—å°±æ˜¯æœ€å¥½çš„å·¥å…·ï¼</p><p>ä»¥å‰ï¼šæ‰‹åŠ¨è¾“å‡ºï¼Œæ‰“å°</p><p>ç°åœ¨ï¼šæ—¥å¿—å·¥å‚</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;logImpl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br></code></pre></div></td></tr></table></figure><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210725220515609.png" alt="image-20210725220515609"></p><h3 id="Log4j"><a href="#Log4j" class="headerlink" title="Log4j"></a>Log4j</h3><p>ä¹Ÿæ˜¯ä¸€ç§æ—¥å¿—ï¼Œæ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡ä»–å¯ä»¥æ§åˆ¶æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼Œæ—¥å¿—çš„è¾“é€ç›®çš„åœ°ã€æ—¥å¿—çš„çº§åˆ«ç­‰ã€‚</p><p>1ã€å¯¼å…¥log4jä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.17<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure><p>2ã€æ·»åŠ log4j.propertiesé…ç½®æ–‡ä»¶</p><figure class="highlight properties"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç </span><br><span class="hljs-meta">log4j.rootLogger</span>=<span class="hljs-string">DEBUG,console,file</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span><br><span class="hljs-meta">log4j.appender.console</span> = <span class="hljs-string">org.apache.log4j.ConsoleAppender</span><br><span class="hljs-meta">log4j.appender.console.Target</span> = <span class="hljs-string">System.out</span><br><span class="hljs-meta">log4j.appender.console.Threshold</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.appender.console.layout</span> = <span class="hljs-string">org.apache.log4j.PatternLayout</span><br><span class="hljs-meta">log4j.appender.console.layout.ConversionPattern</span>=<span class="hljs-string">ã€%cã€‘-%m%n</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span><br><span class="hljs-meta">log4j.appender.file</span> = <span class="hljs-string">org.apache.log4j.RollingFileAppender</span><br><span class="hljs-meta">log4j.appender.file.File</span>=<span class="hljs-string">./log/kuang.log</span><br><span class="hljs-meta">log4j.appender.file.MaxFileSize</span>=<span class="hljs-string">10mb</span><br><span class="hljs-meta">log4j.appender.file.Threshold</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.appender.file.layout</span>=<span class="hljs-string">org.apache.log4j.PatternLayout</span><br><span class="hljs-meta">log4j.appender.file.layout.ConversionPattern</span>=<span class="hljs-string">[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">#æ—¥å¿—è¾“å‡ºçº§åˆ«</span><br><span class="hljs-meta">log4j.logger.org.mybatis</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.logger.java.sql</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.logger.java.sql.Statement</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.logger.java.sql.ResultSet</span>=<span class="hljs-string">DEBUG</span><br><span class="hljs-meta">log4j.logger.java.sql.PreparedStatement</span>=<span class="hljs-string">DEBUG</span><br></code></pre></div></td></tr></table></figure><p>3ã€é…ç½®mybatis</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;logImpl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;LOG4J&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br></code></pre></div></td></tr></table></figure><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210726202742355.png" alt="image-20210726202742355"></p><h2 id="ğŸ“‘åˆ†é¡µ"><a href="#ğŸ“‘åˆ†é¡µ" class="headerlink" title="ğŸ“‘åˆ†é¡µ"></a>ğŸ“‘åˆ†é¡µ</h2><p>ä¸ºä»€ä¹ˆéœ€è¦åˆ†é¡µâ€”â€”æ•°æ®å¤ªå¤šï¼Œä¸æ–¹ä¾¿å¤„ç†</p><p>ä¹‹å‰ï¼šé€šè¿‡SQLä¸­çš„limit</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span> limit <span class="hljs-number">3</span><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span> æŸ¥è¯¢[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>)<br></code></pre></div></td></tr></table></figure><p>ç°åœ¨ï¼šmybatiså®ç°</p><h2 id="âš™ä½¿ç”¨æ³¨è§£"><a href="#âš™ä½¿ç”¨æ³¨è§£" class="headerlink" title="âš™ä½¿ç”¨æ³¨è§£"></a>âš™ä½¿ç”¨æ³¨è§£</h2><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.mybatis.example;<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">BlogMapper</span> </span>&#123;<br>  <span class="hljs-meta">@Select(&quot;SELECT * FROM blog WHERE id = #&#123;id&#125;&quot;)</span><br>  <span class="hljs-function">Blog <span class="hljs-title">selectBlog</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210726211745259.png" alt="image-20210726211745259" style="zoom:200%;" /><p>åŒæ ·ï¼Œä½¿ç”¨æ³¨è§£è¿™ç§æ–¹å¼ï¼Œä¹Ÿéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œmapperã€‚</p><p>å½“å­˜åœ¨å¤šä¸ªå‚æ•°æ—¶ï¼Œæ¯ä¸ªå‚æ•°å‰é¢å¿…é¡»åŠ ä¸Š@param()æ³¨è§£</p><ul><li>åŸºæœ¬æ•°æ®ç±»å‹ã€Stringéœ€è¦åŠ ä¸Š</li><li>åº”ç”¨ç±»å‹ä¸éœ€è¦</li><li>åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥ä¸ç”¨</li><li>åœ¨sqlä¸­å¼•ç”¨çš„å°±æ˜¯@paramä¸­å¡«å†™çš„å‚æ•°</li></ul><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> </span>&#123;<br>  <span class="hljs-meta">@Select(&quot;SELECT * FROM user where id = #&#123;id&#125; and name = #&#123;name&#125;&quot;)</span><br>  <span class="hljs-function">User <span class="hljs-title">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@param(&quot;id&quot;)</span> <span class="hljs-keyword">int</span> id, <span class="hljs-meta">@param(&quot;name&quot;)</span> String username)</span></span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="ğŸˆLombok"><a href="#ğŸˆLombok" class="headerlink" title="ğŸˆLombok"></a>ğŸˆLombok</h2><p>ä½¿ç”¨Lombokï¼Œå¯ä»¥ä¸å¿…å†å†™å“ªäº›æ­»æ¿çš„getterã€setteræ–¹æ³•äº†ã€‚</p><p>ä½†æ˜¯ï¼šèˆå¼ƒäº†ä¸€å®šè§„èŒƒï¼Œå¾—åˆ°äº†ä¸€äº›ä¾¿åˆ©ã€‚</p><ol><li><p>ideaå®‰è£…Lombokæ’ä»¶</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210726214816522.png" alt="image-20210726214816522"></p></li><li><p>å¯¼å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>ä½¿ç”¨æ³¨è§£@Data</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210726215304305.png" alt="image-20210726215304305"></p></li></ol><h2 id="ğŸåŠ¨æ€SQL"><a href="#ğŸåŠ¨æ€SQL" class="headerlink" title="ğŸåŠ¨æ€SQL"></a>ğŸåŠ¨æ€SQL</h2><p>whatï¼šæ ¹æ®ä¸åŒçš„æ¡ä»¶ç”Ÿæˆä¸åŒçš„SQLè¯­å¥</p><p>åœ¨å®é™…çš„åº”ç”¨ä¸­å¸¸å¸¸é€šè¿‡æŒ‡å®šå¤šä¸ªæ¡ä»¶æ¥æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€å¼ è´­ä¹°è®°å½•è¡¨ï¼Œæˆ‘éœ€è¦å¯ä»¥æŒ‡å®šVIPçš„idï¼ˆv_idï¼‰ï¼Œäº§å“çš„id(p_id)ä»¥åŠè´­ä¹°æ—¶é—´æ¥æŸ¥è¯¢ï¼Œå½“ç”¨æˆ·æ²¡æœ‰æŒ‡å®šæŸä¸ªæ¡ä»¶æ—¶ï¼ŒæŸ¥è¯¢æ—¶å°±ä¸å¯¹è¿™ä¸ªå­—æ®µè¿›è¡Œé™åˆ¶ï¼Œè¿™é‡Œå°±å¯ä»¥é€šè¿‡åŠ¨æ€SQLæ¥å®ç°ã€‚</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210727162040219.png" alt="image-20210727162040219"></p><p>å®˜ç½‘ä¸­ç»™äº†è¿™æ ·ä¸€äº›æ ‡ç­¾</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210727163240019.png" alt="image-20210727163240019"></p><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><ol><li><p>ç¼–å†™æ¥å£</p><p>æ¥å£ä¸­æœ‰ä¸€ä¸ªMapå‚æ•°ï¼Œæ˜¯ä¸ºäº†æŒ‡å®šæŸ¥è¯¢æ¡ä»¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">BuyProductMapper</span> </span>&#123;<br>    <span class="hljs-comment">/**é€šè¿‡å¤šä¸ªæ¡ä»¶ï¼ŒæŸ¥è¯¢BuyProductè¡¨</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> map</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;BuyProduct&gt; <span class="hljs-title">getBuyIf</span><span class="hljs-params">(Map map)</span></span>;<br>&#125;<br><br></code></pre></div></td></tr></table></figure></li><li><p>ç¼–å†™mapper</p><p>ä¸ºäº†å®ç°åŠ¨æ€çš„SQLï¼Œè¿™é‡Œä¸»è¦æ˜¯ä½¿ç”¨äº†<if>æ ‡ç­¾ï¼Œå½“æˆ‘ä»¬ä¼ çš„mapå‚æ•°ä¸­ï¼Œå­˜åœ¨æŸä¸ªkeyï¼Œå°±åœ¨åŸå…ˆçš„SQLè¯­å¥åé¢æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.twg.dao.BuyProductMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getBuyIf&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;BuyProduct&quot;</span>&gt;</span><br>        select * from test.buyproduct where 1=1<br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;v_id != null&quot;</span>&gt;</span><br>            and v_id = #&#123;v_id&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;p_id != null&quot;</span>&gt;</span><br>            and p_id = #&#123;p_id&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;time != null&quot;</span>&gt;</span><br>            and time &gt; #&#123;time&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>æµ‹è¯•</p></li></ol><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BuyProductMapperTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getBuyIf</span><span class="hljs-params">()</span></span>&#123;<br>        SqlSession sqlSession = MybatisUtils.getSqlSession();<br><br>        BuyProductMapper mapper = sqlSession.getMapper(BuyProductMapper.class);<br>        HashMap&lt;String, String&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br><span class="hljs-comment">//        map.put(&quot;v_id&quot;,&quot;1&quot;);</span><br><span class="hljs-comment">//        map.put(&quot;p_id&quot;,&quot;1&quot;);</span><br>        map.put(<span class="hljs-string">&quot;time&quot;</span>,<span class="hljs-string">&quot;2021-7-1&quot;</span>);<br>        List&lt;BuyProduct&gt; buys = mapper.getBuyIf(map);<br>        <span class="hljs-keyword">for</span> (BuyProduct buy : buys) &#123;<br>            System.out.println(buy);<br>        &#125;<br><br>        sqlSession.close();<br><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><ul><li><p>map:{â€œtimeâ€,â€2021-7-1â€}</p><p>å¯ä»¥çœ‹åˆ°æŸ¥è¯¢åˆ°äº†æ‰€æœ‰æ—¶é—´åœ¨2021-7-1ä¹‹åçš„è®°å½•</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210727162919531.png" alt="image-20210727162919531"></p></li><li><p>map:{(â€œv_idâ€,â€1â€), (â€œp_idâ€,â€1â€)}</p><p>é€šè¿‡æŒ‡å®šç”¨æˆ·idå’Œäº§å“idï¼Œæˆ‘ä»¬æŸ¥è¯¢åˆ°äº†ä¸€æ¡æ•°æ®</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210727163057263.png" alt="image-20210727163057263"></p></li></ul><h3 id="chooseã€whenã€otherwise"><a href="#chooseã€whenã€otherwise" class="headerlink" title="chooseã€whenã€otherwise"></a>chooseã€whenã€otherwise</h3><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨æ‰€æœ‰çš„æ¡ä»¶ï¼Œè€Œåªæ˜¯æƒ³ä»å¤šä¸ªæ¡ä»¶ä¸­é€‰æ‹©ä¸€ä¸ªä½¿ç”¨ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒMyBatis æä¾›äº† choose å…ƒç´ ï¼Œå®ƒæœ‰ç‚¹åƒ Java ä¸­çš„ switch è¯­å¥ã€‚</p><ol><li><p>æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»å¤šä¸ªæ¡ä»¶ä¸­é€‰å–ä¸€ä¸ªæ¥æŸ¥è¯¢è´­ç‰©è®°å½•</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> map</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;BuyProduct&gt; <span class="hljs-title">getBuyChoose</span><span class="hljs-params">(Map map)</span></span>;<br></code></pre></div></td></tr></table></figure></li><li><p>mapper</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getBuyChoose&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;BuyProduct&quot;</span>&gt;</span><br>    select * from test.buyproduct<br>    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">choose</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;v_id&quot;</span>&gt;</span><br>                and v_id like #&#123;v_id&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;p_id&quot;</span>&gt;</span><br>                and p_id like #&#123;p_id&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">otherwise</span>&gt;</span><br>                and time &gt;= CURDATE()<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">otherwise</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">choose</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></div></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä½¿ç”¨äº†<select>æ ‡ç­¾ï¼Œ<em>where</em> å…ƒç´ åªä¼šåœ¨å­å…ƒç´ è¿”å›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥ â€œWHEREâ€ å­å¥ã€‚è€Œä¸”ï¼Œè‹¥å­å¥çš„å¼€å¤´ä¸º â€œANDâ€ æˆ– â€œORâ€ï¼Œ<em>where</em> å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤ã€‚<select>ç­‰ä»·äºä¸‹é¢çš„<trim>ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">trim</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">&quot;WHERE&quot;</span> <span class="hljs-attr">prefixOverrides</span>=<span class="hljs-string">&quot;AND |OR &quot;</span>&gt;</span><br>  ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">trim</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>æµ‹è¯•</p></li></ol><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getBuyChoose</span><span class="hljs-params">()</span></span>&#123;<br>    SqlSession sqlSession = MybatisUtils.getSqlSession();<br><br>    BuyProductMapper mapper = sqlSession.getMapper(BuyProductMapper.class);<br>    HashMap&lt;String, String&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>    <span class="hljs-comment">//        map.put(&quot;v_id&quot;,&quot;1&quot;);</span><br>    <span class="hljs-comment">//        map.put(&quot;p_id&quot;,&quot;1&quot;);</span><br>    List&lt;BuyProduct&gt; buys = mapper.getBuyChoose(map);<br>    <span class="hljs-keyword">for</span> (BuyProduct buy : buys) &#123;<br>        System.out.println(buy);<br>    &#125;<br>    sqlSession.close();<br>&#125;<br></code></pre></div></td></tr></table></figure><ul><li>å½“mapä¸ºç©ºæ—¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ä¸­å†™çš„sqlï¼Œä»–ä¼šé»˜è®¤æ·»åŠ <otherwise>ä¸­çš„æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤æŸ¥è¯¢åˆ°ä»Šå¤©çš„è´­ä¹°è®°å½•ã€‚</li></ul><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210727174434406.png" alt="image-20210727174434406"></p><ul><li><p>map:{(â€œv_idâ€,â€1â€), (â€œp_idâ€,â€1â€)}</p><p>ç”±äºchooseã€whenã€otherwiseç±»ä¼¼äºJavaä¸­çš„switchè¯­å¥ï¼Œå“ªæ€•æˆ‘è¿™é‡Œç»™å‡ºäº†ä¸¤ä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œå®ƒæ ¹æ®æˆ‘ä»¬å†™çš„mapperï¼Œå®ƒä¼šä¼˜å…ˆå–v_idä½œä¸ºæ¡ä»¶ï¼Œæ‰€ä»¥æŸ¥è¯¢å‡ºäº†ä¸‹é¢è¿™äº›è®°å½•ã€‚</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210727174807964.png" alt="image-20210727174807964"></p></li></ul><h3 id="trimã€whereã€set"><a href="#trimã€whereã€set" class="headerlink" title="trimã€whereã€set"></a>trimã€whereã€set</h3><p><em>where</em> å…ƒç´ åªä¼šåœ¨å­å…ƒç´ è¿”å›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥ â€œWHEREâ€ å­å¥ã€‚è€Œä¸”ï¼Œè‹¥å­å¥çš„å¼€å¤´ä¸º â€œANDâ€ æˆ– â€œORâ€ï¼Œ<em>where</em> å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤ã€‚</p><p>å¦‚æœ <em>where</em> å…ƒç´ ä¸ä½ æœŸæœ›çš„ä¸å¤ªä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ trim å…ƒç´ æ¥å®šåˆ¶ <em>where</em> å…ƒç´ çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œå’Œ <em>where</em> å…ƒç´ ç­‰ä»·çš„è‡ªå®šä¹‰ trim å…ƒç´ ä¸ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">trim</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">&quot;WHERE&quot;</span> <span class="hljs-attr">prefixOverrides</span>=<span class="hljs-string">&quot;AND |OR &quot;</span>&gt;</span><br>  ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">trim</span>&gt;</span><br></code></pre></div></td></tr></table></figure><p><em>set</em> å…ƒç´ ä¼šåŠ¨æ€åœ°åœ¨è¡Œé¦–æ’å…¥ SET å…³é”®å­—ï¼Œå¹¶ä¼šåˆ æ‰é¢å¤–çš„é€—å·ï¼ˆè¿™äº›é€—å·æ˜¯åœ¨ä½¿ç”¨æ¡ä»¶è¯­å¥ç»™åˆ—èµ‹å€¼æ—¶å¼•å…¥çš„ï¼‰ã€‚</p><p>æ¥çœ‹çœ‹ä¸ <em>set</em> å…ƒç´ ç­‰ä»·çš„è‡ªå®šä¹‰ <em>trim</em> å…ƒç´ å§ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">trim</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">&quot;SET&quot;</span> <span class="hljs-attr">suffixOverrides</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span><br>  ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">trim</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h3><figure class="highlight pgsql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs pgsql">&lt;<span class="hljs-keyword">select</span> id=&quot;selectPostIn&quot; resultType=&quot;domain.blog.Post&quot;&gt;<br>  <span class="hljs-keyword">SELECT</span> *<br>  <span class="hljs-keyword">FROM</span> POST P<br>  <span class="hljs-keyword">WHERE</span> ID <span class="hljs-keyword">in</span><br>  &lt;<span class="hljs-keyword">foreach</span> item=&quot;item&quot; <span class="hljs-keyword">index</span>=&quot;index&quot; collection=&quot;list&quot;<br>      <span class="hljs-keyword">open</span>=&quot;(&quot; separator=&quot;,&quot; <span class="hljs-keyword">close</span>=&quot;)&quot;&gt;<br>        #&#123;item&#125;<br>  &lt;/<span class="hljs-keyword">foreach</span>&gt;<br>&lt;/<span class="hljs-keyword">select</span>&gt;<br></code></pre></div></td></tr></table></figure><p>foreachå…ƒç´ çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå®ƒå…è®¸ä½ æŒ‡å®šä¸€ä¸ªé›†åˆï¼Œå£°æ˜å¯ä»¥åœ¨å…ƒç´ ä½“å†…ä½¿ç”¨çš„é›†åˆé¡¹ï¼ˆitemï¼‰å’Œç´¢å¼•ï¼ˆindexï¼‰å˜é‡ã€‚å®ƒä¹Ÿå…è®¸ä½ æŒ‡å®šå¼€å¤´ä¸ç»“å°¾çš„å­—ç¬¦ä¸²ä»¥åŠé›†åˆé¡¹è¿­ä»£ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚</p><h2 id="ğŸŒŠç¼“å­˜"><a href="#ğŸŒŠç¼“å­˜" class="headerlink" title="ğŸŒŠç¼“å­˜"></a>ğŸŒŠç¼“å­˜</h2><p>å°†æ•°æ®ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚</p><ul><li>ä¸€çº§ç¼“å­˜ï¼ˆæœ¬åœ°ç¼“å­˜ï¼‰â€”â€”é»˜è®¤ï¼ŒsqlSessionåŸŸ</li><li>äºŒçº§ç¼“å­˜â€”â€”namespace</li><li>è‡ªå®šä¹‰ç¼“å­˜</li></ul><h3 id="ä¸€çº§ç¼“å­˜"><a href="#ä¸€çº§ç¼“å­˜" class="headerlink" title="ä¸€çº§ç¼“å­˜"></a>ä¸€çº§ç¼“å­˜</h3><p>ä¸æ•°æ®åº“åŒä¸€æ¬¡ä¼šè¯æœŸé—´æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ï¼›</p><p>ä¹‹åå†æ¬¡æŸ¥è¯¢æ—¶ä¼šç›´æ¥ä»ç¼“å­˜ä¸­è·å–ï¼›</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testGetUserById</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MybatisUtils.getSqlSession();<br><br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    System.out.println(mapper.getUserById(<span class="hljs-number">1</span>));<br>    System.out.println(<span class="hljs-string">&quot;-----------------------&quot;</span>);<br>    System.out.println(mapper.getUserById(<span class="hljs-number">1</span>));<br>    sqlSession.close();<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210728220543416.png" alt="image-20210728220543416"></p><p>ä»æ—¥å¿—ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶æŸ¥è¯¢äº†ä¸¤æ¬¡ï¼Œä½†æ˜¯åªæœ‰ä¸€æ¡selectè¯­å¥ã€‚</p><p>å¤±æ•ˆçš„æƒ…å†µï¼š</p><ul><li>æŸ¥è¯¢ä¸åŒçš„ä¸œè¥¿</li><li>å¢åˆ æ”¹æ“ä½œï¼Œå¯èƒ½ä¼šæ”¹å˜æ•°æ®ï¼Œç¼“å­˜ä¹Ÿä¼šå¤±æ•ˆ</li><li>æŸ¥è¯¢ä¸åŒçš„mapper</li></ul><h3 id="äºŒçº§ç¼“å­˜"><a href="#äºŒçº§ç¼“å­˜" class="headerlink" title="äºŒçº§ç¼“å­˜"></a>äºŒçº§ç¼“å­˜</h3><p>å› ä¸ºä¸€çº§ç¼“å­˜çš„ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥å‡ºç°äº†äºŒçº§ç¼“å­˜ã€‚â€”â€”namespaceåŸŸï¼Œå…¨å±€ç¼“å­˜ã€‚</p><p>å·¥ä½œæœºåˆ¶</p><ul><li>ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šæ”¾åˆ°ä¸€çº§ç¼“å­˜</li><li>å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›æ­¤æ—¶ä¸€çº§ç¼“å­˜çš„æ•°æ®å°±ä¼šä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­</li><li>ï¼ˆåœ¨åŒä¸€ä¸ªmapperï¼‰æ–°çš„ä¼šè¯å†æ¬¡æŸ¥è¯¢ä¿¡æ¯æ—¶ï¼Œå°±ä¼šç›´æ¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–æ•°æ®</li><li>ä¸åŒçš„mapperæŸ¥è¯¢å‡ºçš„æ•°æ®ä¼šæ”¾åˆ°è‡ªå·±å¯¹åº”çš„ç¼“å­˜ä¸­</li></ul><p>æ­¥éª¤ï¼š</p><ol><li><p>æ˜¾å¼åœ°åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å¯å…¨å±€ç¼“å­˜</p><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210729092625651.png" alt="image-20210729092625651"></p></li><li><p>åœ¨å½“å‰mapperä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªå¯ç”¨äº†æœ¬åœ°çš„ä¼šè¯ç¼“å­˜ï¼Œå®ƒä»…ä»…å¯¹ä¸€ä¸ªä¼šè¯ä¸­çš„æ•°æ®è¿›è¡Œç¼“å­˜ã€‚ è¦å¯ç”¨å…¨å±€çš„äºŒçº§ç¼“å­˜ï¼Œåªéœ€è¦åœ¨ä½ çš„ SQL æ˜ å°„æ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œï¼š</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">cache</span>/&gt;</span><br></code></pre></div></td></tr></table></figure><p>ä¹Ÿå¯ä»¥å®šåˆ¶å…¶ä¸­çš„å‚æ•°ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">cache</span></span><br><span class="hljs-tag">  <span class="hljs-attr">eviction</span>=<span class="hljs-string">&quot;FIFO&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">flushInterval</span>=<span class="hljs-string">&quot;60000&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;512&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">readOnly</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testGetUserById</span><span class="hljs-params">()</span> </span>&#123;<br>    SqlSession sqlSession = MybatisUtils.getSqlSession();<br>    UserMapper mapper = sqlSession.getMapper(UserMapper.class);<br>    System.out.println(mapper.getUserById(<span class="hljs-number">1</span>));<br>    sqlSession.close();<br><br>    SqlSession sqlSession2 = MybatisUtils.getSqlSession();<br>    UserMapper mapper2 = sqlSession2.getMapper(UserMapper.class);<br>    System.out.println(<span class="hljs-string">&quot;-----------------------&quot;</span>);<br>    System.out.println(mapper2.getUserById(<span class="hljs-number">1</span>));<br>    sqlSession2.close();<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="H:\blog\Javaç¬”è®°â€”â€”Mybatis.assets\image-20210729093139833.png" alt="image-20210729093139833"></p><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘åˆ›å»ºäº†ä¸¤ä¸ªsqlsessionå¯¹è±¡ï¼Œå¹¶é€šè¿‡è¯¥å¯¹è±¡è·å–ä¸­åŒç±»å‹çš„mapperï¼Œå½“æˆ‘ä½¿ç”¨å®Œç¬¬ä¸€ä¸ªsqlsessionå¹¶å…³é—­åï¼Œå†ä½¿ç”¨ä¸€ä¸ªæ–°çš„sqlsessionæ—¶ï¼Œå¯ä»¥çœ‹åˆ°æ—¥å¿—ä¸­å¹¶æ²¡æœ‰å†æ¬¡æŸ¥è¯¢æ•°æ®åº“ï¼Œè¯´æ˜äºŒçº§ç¼“å­˜èµ·ä½œç”¨äº†ã€‚</p><h3 id="è‡ªå®šä¹‰ç¼“å­˜Ehcache"><a href="#è‡ªå®šä¹‰ç¼“å­˜Ehcache" class="headerlink" title="è‡ªå®šä¹‰ç¼“å­˜Ehcache"></a>è‡ªå®šä¹‰ç¼“å­˜Ehcache</h3><p>é™¤äº†ä¸Šè¿°è‡ªå®šä¹‰ç¼“å­˜çš„æ–¹å¼ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å®ç°ä½ è‡ªå·±çš„ç¼“å­˜ï¼Œæˆ–ä¸ºå…¶ä»–ç¬¬ä¸‰æ–¹ç¼“å­˜æ–¹æ¡ˆåˆ›å»ºé€‚é…å™¨ï¼Œæ¥å®Œå…¨è¦†ç›–ç¼“å­˜è¡Œä¸ºã€‚</p></li><li><p>å¯¼å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.caches/mybatis-ehcache --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.caches<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-ehcache<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></div></td></tr></table></figure></li><li><p>å¯ç”¨ç¼“å­˜</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">cache</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>/&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>æ·»åŠ ehcacheé…ç½®æ–‡ä»¶â€”â€”ehcache.xml</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"> <span class="hljs-meta">&lt;?xml version=1.0 encoding=UTF-8 ?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ehcache</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">http://www.w3.org/2001/XMLSchema-instance</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:noNamespaceSchemaLocation</span>=<span class="hljs-string">http://ehcache.org/ehcache.xsd</span></span><br><span class="hljs-tag">         <span class="hljs-attr">updateCheck</span>=<span class="hljs-string">false</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">diskStore</span> <span class="hljs-attr">path</span>=<span class="hljs-string">./tmpdir/Tmp_EhCache/</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">defaultCache</span></span><br><span class="hljs-tag">            <span class="hljs-attr">eternal</span>=<span class="hljs-string">false</span></span><br><span class="hljs-tag">            <span class="hljs-attr">maxElementsInMemory</span>=<span class="hljs-string">10000</span></span><br><span class="hljs-tag">            <span class="hljs-attr">overflowToDisk</span>=<span class="hljs-string">false</span></span><br><span class="hljs-tag">            <span class="hljs-attr">diskPersistent</span>=<span class="hljs-string">false</span></span><br><span class="hljs-tag">            <span class="hljs-attr">timeToIdleSeconds</span>=<span class="hljs-string">1800</span></span><br><span class="hljs-tag">            <span class="hljs-attr">timeToLiveSeconds</span>=<span class="hljs-string">259200</span></span><br><span class="hljs-tag">            <span class="hljs-attr">memoryStoreEvictionPolicy</span>=<span class="hljs-string">LRU/</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">cache</span></span><br><span class="hljs-tag">            <span class="hljs-attr">name</span>=<span class="hljs-string">cloud_user</span></span><br><span class="hljs-tag">            <span class="hljs-attr">eternal</span>=<span class="hljs-string">false</span></span><br><span class="hljs-tag">            <span class="hljs-attr">maxElementsInMemory</span>=<span class="hljs-string">5000</span></span><br><span class="hljs-tag">            <span class="hljs-attr">overflowToDisk</span>=<span class="hljs-string">false</span></span><br><span class="hljs-tag">            <span class="hljs-attr">diskPersistent</span>=<span class="hljs-string">false</span></span><br><span class="hljs-tag">            <span class="hljs-attr">timeToIdleSeconds</span>=<span class="hljs-string">1800</span></span><br><span class="hljs-tag">            <span class="hljs-attr">timeToLiveSeconds</span>=<span class="hljs-string">1800</span></span><br><span class="hljs-tag">            <span class="hljs-attr">memoryStoreEvictionPolicy</span>=<span class="hljs-string">LRU/</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ehcache</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
